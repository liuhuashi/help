<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"> 
    <meta name="csrf-token" content=""> 
    <title>mysqlnd_ms_get_stats - 开发帮助文档</title> 
    <meta name="keyword" content="function.mysqlnd-ms-get-stats"> 
    <meta name="description" content="function.mysqlnd-ms-get-stats"> 
    <meta name="author" content="Moments"> 
    <link href="/favicon.ico" rel="shortcut icon"> 
    <link href="/css/blog.css" rel="stylesheet"> 
    <script src="/js/blog.js"></script> 
</head>
<body>
<header class="sticky-top">
    <nav class="navbar navbar-expand navbar-dark bg-secondary justify-content-between text-uppercase">
        <div class="navbar-nav" style="overflow:hidden;">
            <a class="navbar-brand" href="https://help.pythonschool.com">
                <span class="d-md-none">
                    <svg class="text-warning" width="24" height="24" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#emoji-sunglasses"/>
                    </svg>
                </span>
                <span class="d-none d-md-flex">开发帮助文档</span>
            </a>
            <div class="navbar-nav-scroll" style="overflow: hidden;">
                <ul class="navbar-nav text-nowrap pb-4" style="overflow:auto;">
                                            <li class="nav-item">
                            <a class="nav-link" href="/docs/laravel/index.html">laravel</a>
                        </li>
                                            <li class="nav-item">
                            <a class="nav-link active" href="/docs/php/index.html">php</a>
                        </li>
                                    </ul>
            </div>
        </div>
        <div class="d-inline-flex">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/liuhuashi">
                        <svg class="text-light" width="24" height="24" fill="currentColor">
                            <use xlink:href="/css/bootstrap-icons.svg#github"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<div class="container-fluid">
    <div id="aside-hidden" class="position-fixed" style="left:0;top: 58px;cursor:pointer;z-index: 10000;">
        <svg class="align-text-bottom text-warning" width="16" height="16" fill="currentColor" stroke="currentColor" stroke-width="1">
            <use xlink:href="/css/bootstrap-icons.svg#arrow-left-square"/>
        </svg>
    </div>
    <div class="row">
        <div class="aside col-md-3 col-lg-2 border-right shadow position-sticky" style="overflow:auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
    <form class="row border-bottom p-3 bg-white sticky-top">
        <input id="search-version" class="form-control" data-version="843" type="search" placeholder="英文逗号分隔,分词搜索">
    </form>
    <ul class="nav navbar-nav nav-pills flex-column pt-2 figure-caption">
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.mysqlnd-ms-dump-servers.html" title="mysqlnd_ms_dump_servers">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_ms_dump_servers
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.mysqlnd-ms-fabric-select-global.html" title="mysqlnd_ms_fabric_select_global">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_ms_fabric_select_global
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.mysqlnd-ms-fabric-select-shard.html" title="mysqlnd_ms_fabric_select_shard">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_ms_fabric_select_shard
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.mysqlnd-ms-get-last-gtid.html" title="mysqlnd_ms_get_last_gtid">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_ms_get_last_gtid
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.mysqlnd-ms-get-last-used-connection.html" title="mysqlnd_ms_get_last_used_connection">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_ms_get_last_used_connection
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.mysqlnd-ms-get-stats.html" title="mysqlnd_ms_get_stats">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_ms_get_stats
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.mysqlnd-ms-match-wild.html" title="mysqlnd_ms_match_wild">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_ms_match_wild
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.mysqlnd-ms-query-is-select.html" title="mysqlnd_ms_query_is_select">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_ms_query_is_select
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.mysqlnd-ms-set-qos.html" title="mysqlnd_ms_set_qos">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_ms_set_qos
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.mysqlnd-ms-set-user-pick-server.html" title="mysqlnd_ms_set_user_pick_server">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_ms_set_user_pick_server
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.mysqlnd-ms-xa-begin.html" title="mysqlnd_ms_xa_begin">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_ms_xa_begin
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.mysqlnd-ms-xa-commit.html" title="mysqlnd_ms_xa_commit">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_ms_xa_commit
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.mysqlnd-ms-xa-gc.html" title="mysqlnd_ms_xa_gc">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_ms_xa_gc
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.mysqlnd-ms-xa-rollback.html" title="mysqlnd_ms_xa_rollback">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_ms_xa_rollback
                </a>
            </li>
            </ul>
</div>        <div class="aside-middle col-md-9 col-lg-10 row">
    <div class="col-md-9 col-xl-10" style="overflow: auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
        <div class="container main-h4-1">
            <div class="page-content">
                <div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.mysqlnd-ms-get-last-used-connection.html">« mysqlnd_ms_get_last_used_connection</a></li>
      <li style="float: right;"><a href="function.mysqlnd-ms-match-wild.html">mysqlnd_ms_match_wild »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="documentation.html">PHP Manual</a></li>
    <li><a href="ref.mysqlnd-ms.html">Mysqlnd_ms 函数</a></li>
    <li>Returns query distribution and connection statistics</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.mysqlnd-ms-get-stats" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysqlnd_ms_get_stats</h1>
  <p class="verinfo">(PECL mysqlnd_ms &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">mysqlnd_ms_get_stats</span> — <span class="dc-title">Returns query distribution and connection statistics</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.mysqlnd-ms-get-stats-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   
   <span class="methodname"><strong>mysqlnd_ms_get_stats</strong></span>
    (
   ) : <span class="type">array</span></div>

  <p class="para rdfs-comment">
   Returns an array of statistics collected by the replication
   and load balancing plugin.
  </p>
  <p class="para">
   The PHP configuration setting
   <code class="literal"><a href="mysqlnd-ms.configuration.html#ini.mysqlnd-ms.collect-statistics" class="link">mysqlnd_ms.collect_statistics</a></code>
   controls the collection of statistics. The collection of statistics
   is disabled by default for performance reasons.
  </p>
  <p class="para">
   The scope of the statistics is the
   <code class="literal">PHP</code> process.
   Depending on your deployment model a
   <code class="literal">PHP</code> process may handle one or multiple requests.
  </p>
  <p class="para">
   Statistics are aggregated for all connections and all storage handler. It is not possible
   to tell how much queries originating from
   <code class="literal">mysqli</code>,
   <code class="literal">PDO_MySQL</code> or
   <code class="literal">mysql</code> API calls have
   contributed to the aggregated data values.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mysqlnd-ms-get-stats-parameters">
  <h3 class="title">参数</h3>
  <p class="para">此函数没有参数。</p>
 </div>


<div class="refsect1 returnvalues" id="refsect1-function.mysqlnd-ms-get-stats-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns <strong><code>null</code></strong> if
   the PHP configuration directive
   <a href="mysqlnd-ms.configuration.html#ini.mysqlnd-ms.enable" class="link"><code class="literal">mysqlnd_ms.enable</code></a>
   has disabled the plugin. Otherwise, returns array of statistics.
  </p>
  <p class="para">
   Array of statistics
  </p>
  <table class="doctable informaltable">
   
    <col width="1*">
    <col width="7*">
    <col width="2*">
    <thead>
     <tr>
      <th>Statistic</th>
      <th>Description</th>
      <th>Version</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>
       <code class="literal">use_slave</code>
      </td>
      <td>
       <p class="para">
         The semantics of this statistic has changed between 1.0.1 - 1.1.0.
       </p>
       <p class="para">
         The meaning for version 1.0.1 is as follows.
         Number of statements considered as read-only by the built-in query analyzer.
         Neither statements which begin with a SQL hint to force
         use of slave nor statements directed to a slave by an user-defined
         callback are included. The total number of statements sent to the slaves is
         <code class="literal">use_slave</code> + <code class="literal">use_slave_sql_hint</code> +
         <code class="literal">use_slave_callback</code>.
        </p>
        <p class="para">
         PECL/mysqlnd_ms 1.1.0 introduces a new concept of chained filters. The
         statistics is now set by the internal load balancing filter. With
         version 1.1.0 the load balancing filter is always the last in the
         filter chain, if used. In future versions a load balancing filter may be
         followed by other filters causing another change in the meaning of
         the statistic. If, in the future, a load balancing filter is followed
         by another filter it is no longer guaranteed that the statement, which
         increments <code class="literal">use_slave</code>, will be executed on the slaves.
        </p>
        <p class="para">
         The meaning for version 1.1.0 is as follows. Number of statements
         sent to the slaves. Statements directed to a slave by the user filter
         (an user-defined callback) are not included. The latter are counted by
         <code class="literal">use_slave_callback</code>.
        </p>
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">use_master</code>
      </td>
      <td>
       <p class="para">
         The semantics of this statistic has changed between 1.0.1 - 1.1.0.
       </p>
       <p class="para">
        The meaning for version 1.0.1 is as follows.
        Number of statements not considered as read-only by the built-in query analyzer.
        Neither statements which begin with a SQL hint to force
        use of master nor statements directed to a master by an user-defined
        callback are included. The total number of statements sent to the master is
        <code class="literal">use_master</code> + <code class="literal">use_master_sql_hint</code> +
        <code class="literal">use_master_callback</code>.
       </p>
       <p class="para">
         PECL/mysqlnd_ms 1.1.0 introduces a new concept of chained filters. The
         statictics is now set by the internal load balancing filter. With
         version 1.1.0 the load balancing filter is always the last in the
         filter chain, if used. In future versions a load balancing filter may be
         followed by other filters causing another change in the meaning of
         the statistic. If, in the future, a load balancing filter is followed
         by another filter it is no longer guaranteed that the statement, which
         increments <code class="literal">use_master</code>, will be executed on the slaves.
        </p>
        <p class="para">
         The meaning for version 1.1.0 is as follows. Number of statements
         sent to the masters. Statements directed to a master by the user filter
         (an user-defined callback) are not included. The latter are counted by
         <code class="literal">use_master_callback</code>.
        </p>
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">use_slave_guess</code>
      </td>
      <td>
       Number of statements the built-in query analyzer recommends sending to
       a slave because they contain no SQL hint to force use of a
       certain server. The recommendation may be overruled in the following.
       It is not guaranteed whether the statement will be executed on a slave
       or not. This is how often the internal <code class="literal">is_select</code>
       function has guessed that a slave shall be used. Please, see also the
       user space function <span class="function"><a href="function.mysqlnd-ms-query-is-select.html" class="function">mysqlnd_ms_query_is_select()</a></span>.
      </td>
      <td>Since 1.1.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">use_master_guess</code>
      </td>
      <td>
       Number of statements the built-in query analyzer recommends sending to
       a master because they contain no SQL hint to force use of a
       certain server. The recommendation may be overruled in the following.
       It is not guaranteed whether the statement will be executed on a slave
       or not. This is how often the internal <code class="literal">is_select</code>
       function has guessed that a master shall be used. Please, see also the
       user space function <span class="function"><a href="function.mysqlnd-ms-query-is-select.html" class="function">mysqlnd_ms_query_is_select()</a></span>.
      </td>
      <td>Since 1.1.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">use_slave_sql_hint</code>
      </td>
      <td>
       Number of statements sent to a slave because statement begins with
       the SQL hint to force use of slave.
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">use_master_sql_hint</code>
      </td>
      <td>
       Number of statements sent to a master because statement begins with
       the SQL hint to force use of master.
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">use_last_used_sql_hint</code>
      </td>
      <td>
       Number of statements sent to server which has run the previous statement,
       because statement begins with the SQL hint to force use of previously
       used server.
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">use_slave_callback</code>
      </td>
      <td>
       Number of statements sent to a slave because an user-defined callback
       has chosen a slave server for statement execution.
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">use_master_callback</code>
      </td>
      <td>
       Number of statements sent to a master because an user-defined callback
       has chosen a master server for statement execution.
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">non_lazy_connections_slave_success</code>
      </td>
      <td>
       Number of successfully opened slave connections from
       configurations not using
       <code class="literal"><a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.lazy-connections" class="link">lazy connections</a></code>.
       The total number of successfully opened slave connections
       is <code class="literal">non_lazy_connections_slave_success</code> +
       <code class="literal">lazy_connections_slave_success</code>
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">non_lazy_connections_slave_failure</code>
      </td>
      <td>
       Number of failed slave connection attempts from
       configurations not using
       <code class="literal"><a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.lazy-connections" class="link">lazy connections</a></code>.
       The total number of failed slave connection attempts
       is <code class="literal">non_lazy_connections_slave_failure</code> +
       <code class="literal">lazy_connections_slave_failure</code>
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">non_lazy_connections_master_success</code>
      </td>
      <td>
       Number of successfully opened master connections from
       configurations not using
       <code class="literal"><a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.lazy-connections" class="link">lazy connections</a></code>.
       The total number of successfully opened master connections
       is <code class="literal">non_lazy_connections_master_success</code> +
       <code class="literal">lazy_connections_master_success</code>
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">non_lazy_connections_master_failure</code>
      </td>
      <td>
       Number of failed master connection attempts from
       configurations not using
       <code class="literal"><a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.lazy-connections" class="link">lazy connections</a></code>.
       The total number of failed master connection attempts
       is <code class="literal">non_lazy_connections_master_failure</code> +
       <code class="literal">lazy_connections_master_failure</code>
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">lazy_connections_slave_success</code>
      </td>
      <td>
       Number of successfully opened slave connections from
       configurations using
       <code class="literal"><a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.lazy-connections" class="link">lazy connections</a></code>.
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">lazy_connections_slave_failure</code>
      </td>
      <td>
       Number of failed slave connection attempts from
       configurations using
       <code class="literal"><a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.lazy-connections" class="link">lazy connections</a></code>.
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">lazy_connections_master_success</code>
      </td>
      <td>
       Number of successfully opened master connections from
       configurations using
       <code class="literal"><a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.lazy-connections" class="link">lazy connections</a></code>.
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">lazy_connections_master_failure</code>
      </td>
      <td>
       Number of failed master connection attempts from
       configurations using
       <code class="literal"><a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.lazy-connections" class="link">lazy connections</a></code>.
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">trx_autocommit_on</code>
      </td>
      <td>
       Number of <code class="literal">autocommit</code> mode activations via API calls.
       This figure may be used to monitor activity related to the plugin configuration
       setting
       <a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.trx-stickiness" class="link"><code class="literal">trx_stickiness</code></a>.
       If, for example, you want to know if a certain API call invokes the
       <code class="literal">mysqlnd</code> library function <code class="literal">trx_autocommit()</code>,
       which is a requirement for
       <a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.trx-stickiness" class="link"><code class="literal">trx_stickiness</code></a>,
       you may call the user API function in question and check if the
       statistic has changed. The statistic is modified only by the
       plugins internal subclassed <code class="literal">trx_autocommit()</code>
       method.
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">trx_autocommit_off</code>
      </td>
      <td>
       Number of <code class="literal">autocommit</code> mode deactivations via API calls.
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">trx_master_forced</code>
      </td>
      <td>
       Number of statements redirected to the master while
       <a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.trx-stickiness" class="link"><code class="literal">trx_stickiness=master</code></a>
       and <code class="literal">autocommit</code> mode is disabled.
      </td>
      <td>Since 1.0.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">gtid_autocommit_injections_success</code>
      </td>
      <td>
       Number of successful SQL injections in autocommit mode as part
       of the plugins client-side
       <a href="mysqlnd-ms.gtid.html" class="link">global transaction id emulation</a>.
      </td>
      <td>Since 1.2.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">gtid_autocommit_injections_failure</code>
      </td>
      <td>
       Number of failed SQL injections in autocommit mode as part
       of the plugins client-side
       <a href="mysqlnd-ms.gtid.html" class="link">global transaction id emulation</a>.
      </td>
      <td>Since 1.2.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">gtid_commit_injections_success</code>
      </td>
      <td>
       Number of successful SQL injections in commit mode as part
       of the plugins client-side
       <a href="mysqlnd-ms.gtid.html" class="link">global transaction id emulation</a>.
      </td>
      <td>Since 1.2.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">gtid_commit_injections_failure</code>
      </td>
      <td>
       Number of failed SQL injections in commit mode as part
       of the plugins client-side
       <a href="mysqlnd-ms.gtid.html" class="link">global transaction id emulation</a>.
      </td>
      <td>Since 1.2.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">gtid_implicit_commit_injections_success</code>
      </td>
      <td>
       Number of successful SQL injections when implicit commit is detected as part
       of the plugins client-side
       <a href="mysqlnd-ms.gtid.html" class="link">global transaction id emulation</a>.
       Implicit commit happens, for example, when autocommit has been turned
       off, a query is executed and autocommit is enabled again. In that case,
       the statement will be committed by the server and SQL to maintain is
       injected before the autocommit is re-enabled. Another sequence
       causing an implicit commit is <code class="literal">begin()</code>,
       <code class="literal">query()</code>, <code class="literal">begin()</code>. The second call
       to <code class="literal">begin()</code> will implicitly commit the transaction
       started by the first call to <code class="literal">begin()</code>.
       <code class="literal">begin()</code> refers to internal library calls not actual
       PHP user API calls.
      </td>
      <td>Since 1.2.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">gtid_implicit_commit_injections_failure</code>
      </td>
      <td>
       Number of failed SQL injections when implicit commit is detected as part
       of the plugins client-side
       <a href="mysqlnd-ms.gtid.html" class="link">global transaction id emulation</a>.
       Implicit commit happens, for example, when autocommit has been turned
       off, a query is executed and autocommit is enabled again. In that case,
       the statement will be committed by the server and SQL to maintain is
       injected before the autocommit is re-enabled.
      </td>
      <td>Since 1.2.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">transient_error_retries</code>
      </td>
      <td>
       How often an operation has been retried when a transient error was
       detected. See also,
       <a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.transient_error" class="link"><code class="literal">transient_error</code></a>
       plugin configuration file setting.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">fabric_sharding_lookup_servers_success</code>
      </td>
      <td>
       Number of successful <code class="literal">sharding.lookup_servers</code>
       remote procedure calls to MySQL Fabric.
       A call is considered successful if the plugin could reach MySQL
       Fabric and got any reply. The reply itself may or may not be
       understood by the plugin. Success refers to the network transport
       only. If the reply was not understood or indicates a valid error condition,
       <code class="literal">fabric_sharding_lookup_servers_xml_failure</code>
       gets incremented.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">fabric_sharding_lookup_servers_failure</code>
      </td>
      <td>
       Number of failed <code class="literal">sharding.lookup_servers</code>
       remote procedure calls to MySQL Fabric.
       A remote procedure call is considered failed if there was a
       network error in connecting to, writing to or reading from
       MySQL Fabric.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">fabric_sharding_lookup_servers_time_total</code>
      </td>
      <td>
       Time spent connecting to,writing to and reading from MySQL
       Fabrich during the <code class="literal">sharding.lookup_servers</code>
       remote procedure call. The value is aggregated for all calls. Time is
       measured in microseconds.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">fabric_sharding_lookup_servers_bytes_total</code>
      </td>
      <td>
       Total number of bytes received from MySQL Fabric in reply to
       <code class="literal">sharding.lookup_servers</code> calls.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">fabric_sharding_lookup_servers_xml_failure</code>
      </td>
      <td>
       How often a reply from MySQL Fabric to
       <code class="literal">sharding.lookup_servers</code> calls was not understood.
       Please note, the current experimental implementation does not
       distinguish between valid errors returned and malformed replies.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">xa_begin</code>
      </td>
      <td>
       How many XA/distributed transactions have been started
       using <span class="function"><a href="function.mysqlnd-ms-xa-begin.html" class="function">mysqlnd_ms_xa_begin()</a></span>.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">xa_commit_success</code>
      </td>
      <td>
       How many XA/distributed transactions have been successfully committed
       using <span class="function"><a href="function.mysqlnd-ms-xa-commit.html" class="function">mysqlnd_ms_xa_commit()</a></span>.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">xa_commit_failure</code>
      </td>
      <td>
       How many XA/distributed transactions failed to commit
       during <span class="function"><a href="function.mysqlnd-ms-xa-commit.html" class="function">mysqlnd_ms_xa_commit()</a></span>.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">xa_rollback_success</code>
      </td>
      <td>
       How many XA/distributed transactions have been successfully rolled back
       using <span class="function"><a href="function.mysqlnd-ms-xa-rollback.html" class="function">mysqlnd_ms_xa_rollback()</a></span>. The figure does
       not include implict rollbacks performed as a result of
       <span class="function"><a href="function.mysqlnd-ms-xa-commit.html" class="function">mysqlnd_ms_xa_commit()</a></span> failure.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">xa_rollback_failure</code>
      </td>
      <td>
       How many XA/distributed transactions could not be rolled back.
       This includes failures of <span class="function"><a href="function.mysqlnd-ms-xa-rollback.html" class="function">mysqlnd_ms_xa_rollback()</a></span>
       but also failured during rollback when closing a connection, if
       <code class="literal">rollback_on_close</code> is set. Please, see also
       <code class="literal">xa_rollback_on_close</code> below.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">xa_participants</code>
      </td>
      <td>
       Total number of participants in any XA transaction started with
       <span class="function"><a href="function.mysqlnd-ms-xa-begin.html" class="function">mysqlnd_ms_xa_begin()</a></span>.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">xa_rollback_on_close</code>
      </td>
      <td>
       How many XA transactions have been rolled back implicitly when
       a connection was close and <code class="literal">rollback_on_close</code> is set.
       Depending on your coding policies, this may hint a flaw in your code as
       you may prefer to explicitly clean up resources.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">pool_masters_total</code>
      </td>
      <td>
       Number of master servers (connections) in the internal connection pool.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">pool_slaves_total</code>
      </td>
      <td>
       Number of slave servers (connections) in the internal connection pool.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">pool_masters_active</code>
      </td>
      <td>
       Number of master servers (connections) from the internal connection pool
       which are currently used for picking a connection.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">pool_slaves_active</code>
      </td>
      <td>
       Number of slave servers (connections) from the internal connection pool
       which are currently used for picking a connection.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

       <tr>
      <td>
       <code class="literal">pool_updates</code>
      </td>
      <td>
       How often the active connection list has been replaced and a
       new set of master and slave servers had been installed.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">pool_master_reactivated</code>
      </td>
      <td>
       How often a master connection has been reused after being
       flushed from the active list.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

     <tr>
      <td>
       <code class="literal">pool_slave_reactivated</code>
      </td>
      <td>
       How often a slave connection has been reused after being
       flushed from the active list.
      </td>
      <td>Since 1.6.0.</td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-function.mysqlnd-ms-get-stats-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   </p><div class="example" id="example-1835">
    <p><strong>示例 #1 <span class="function"><strong>mysqlnd_ms_get_stats()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysqlnd_ms.enable = %d\n"</span><span style="color: #007700">, </span><span style="color: #0000BB">ini_get</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysqlnd_ms.enable"</span><span style="color: #007700">));<br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysqlnd_ms.collect_statistics = %d\n"</span><span style="color: #007700">, </span><span style="color: #0000BB">ini_get</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysqlnd_ms.collect_statistics"</span><span style="color: #007700">));<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">mysqlnd_ms_get_stats</span><span style="color: #007700">());<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
mysqlnd_ms.enable = 1
mysqlnd_ms.collect_statistics = 1
array(26) {
  ["use_slave"]=&gt;
  string(1) "0"
  ["use_master"]=&gt;
  string(1) "0"
  ["use_slave_guess"]=&gt;
  string(1) "0"
  ["use_master_guess"]=&gt;
  string(1) "0"
  ["use_slave_sql_hint"]=&gt;
  string(1) "0"
  ["use_master_sql_hint"]=&gt;
  string(1) "0"
  ["use_last_used_sql_hint"]=&gt;
  string(1) "0"
  ["use_slave_callback"]=&gt;
  string(1) "0"
  ["use_master_callback"]=&gt;
  string(1) "0"
  ["non_lazy_connections_slave_success"]=&gt;
  string(1) "0"
  ["non_lazy_connections_slave_failure"]=&gt;
  string(1) "0"
  ["non_lazy_connections_master_success"]=&gt;
  string(1) "0"
  ["non_lazy_connections_master_failure"]=&gt;
  string(1) "0"
  ["lazy_connections_slave_success"]=&gt;
  string(1) "0"
  ["lazy_connections_slave_failure"]=&gt;
  string(1) "0"
  ["lazy_connections_master_success"]=&gt;
  string(1) "0"
  ["lazy_connections_master_failure"]=&gt;
  string(1) "0"
  ["trx_autocommit_on"]=&gt;
  string(1) "0"
  ["trx_autocommit_off"]=&gt;
  string(1) "0"
  ["trx_master_forced"]=&gt;
  string(1) "0"
  ["gtid_autocommit_injections_success"]=&gt;
  string(1) "0"
  ["gtid_autocommit_injections_failure"]=&gt;
  string(1) "0"
  ["gtid_commit_injections_success"]=&gt;
  string(1) "0"
  ["gtid_commit_injections_failure"]=&gt;
  string(1) "0"
  ["gtid_implicit_commit_injections_success"]=&gt;
  string(1) "0"
  ["gtid_implicit_commit_injections_failure"]=&gt;
  string(1) "0"
  ["transient_error_retries"]=&gt;
  string(1) "0"
}
</pre></div>
    </div>
   </div>
  
 </div>


 <div class="refsect1 seealso" id="refsect1-function.mysqlnd-ms-get-stats-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member">
     <a href="mysqlnd-ms.configuration.html" class="link">Runtime configuration</a>
    </li>
    <li class="member">
     <a href="mysqlnd-ms.configuration.html#ini.mysqlnd-ms.collect-statistics" class="link">mysqlnd_ms.collect_statistics</a>
    </li>
    <li class="member">
     <a href="mysqlnd-ms.configuration.html#ini.mysqlnd-ms.enable" class="link">mysqlnd_ms.enable</a>
    </li>
    <li class="member">
     <a href="mysqlnd-ms.plugin-ini-json.html#mysqlnd-ms.monitoring" class="link">Monitoring</a>
    </li>
   </ul>
  
 </div>


</div></div></div>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-xl-2" id="toc-list">
        <ul></ul>
    </div>
</div>    </div>
</div>
<span id="back-top">
<svg width="20" height="20" fill="currentColor">
    <use xlink:href="/css/bootstrap-icons.svg#chevron-up"/>
</svg>
</span>
 
<script>
    // 浏览量统计
    $(function () {
        let formdata = new FormData();
        formdata.append('_token', '');
        formdata.append('id', 4237);
        $.ajax({
            url: $(".sticky-top .navbar-brand").attr('href') + "/api/doc/clicks",
            type: 'POST',
            data: formdata,
            processData: false,
            contentType: false
        });
    });
    // aside-hidden
    $(function () {
        $('#aside-hidden').on('click', function () {
            $('.aside').toggle(0, function () {
                if ($(this).is(':visible')) {
                    $('.aside-middle').removeClass('col-md-12 col-lg-12').addClass('col-md-9 col-lg-10');
                } else {
                    $('.aside-middle').removeClass('col-md-9 col-lg-10').addClass('col-md-12 col-lg-12');
                }
            });
        });
    });
</script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?1522d01c436f59ddc8389f25bfa9d53e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>