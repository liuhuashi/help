<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"> 
    <meta name="csrf-token" content=""> 
    <title>邮件发送 - 开发帮助文档</title> 
    <meta name="keyword" content="mail"> 
    <meta name="description" content="mail"> 
    <meta name="author" content="Moments"> 
    <link href="/favicon.ico" rel="shortcut icon"> 
    <link href="/css/blog.css" rel="stylesheet"> 
    <script src="/js/blog.js"></script> 
</head>
<body>
<header class="sticky-top">
    <nav class="navbar navbar-expand navbar-dark bg-secondary justify-content-between text-uppercase">
        <div class="navbar-nav" style="overflow:hidden;">
            <a class="navbar-brand" href="https://help.pythonschool.com">
                <span class="d-md-none">
                    <svg class="text-warning" width="24" height="24" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#emoji-sunglasses"/>
                    </svg>
                </span>
                <span class="d-none d-md-flex">开发帮助文档</span>
            </a>
            <div class="navbar-nav-scroll" style="overflow: hidden;">
                <ul class="navbar-nav text-nowrap pb-4" style="overflow:auto;">
                                            <li class="nav-item">
                            <a class="nav-link active" href="/docs/laravel/index.html">laravel</a>
                        </li>
                                            <li class="nav-item">
                            <a class="nav-link" href="/docs/php/index.html">php</a>
                        </li>
                                    </ul>
            </div>
        </div>
        <div class="d-inline-flex">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/liuhuashi">
                        <svg class="text-light" width="24" height="24" fill="currentColor">
                            <use xlink:href="/css/bootstrap-icons.svg#github"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<div class="container-fluid">
    <div id="aside-hidden" class="position-fixed" style="left:0;top: 58px;cursor:pointer;z-index: 10000;">
        <svg class="align-text-bottom text-warning" width="16" height="16" fill="currentColor" stroke="currentColor" stroke-width="1">
            <use xlink:href="/css/bootstrap-icons.svg#arrow-left-square"/>
        </svg>
    </div>
    <div class="row">
        <div class="aside col-md-3 col-lg-2 border-right shadow position-sticky" style="overflow:auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
    <form class="row border-bottom p-3 bg-white sticky-top">
        <input id="search-version" class="form-control" data-version="7" type="search" placeholder="英文逗号分隔,分词搜索">
    </form>
    <ul class="nav navbar-nav nav-pills flex-column pt-2 figure-caption">
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/artisan.html" title="Artisan 命令行">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Artisan 命令行
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/authentication.html" title="用户认证">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    用户认证
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/authorization.html" title="用户授权">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    用户授权
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/blade.html" title="Blade 模板">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Blade 模板
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/broadcasting.html" title="广播系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    广播系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/cache.html" title="缓存系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    缓存系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/collections.html" title="集合">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    集合
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/configuration.html" title="Configuration">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Configuration
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/console-tests.html" title="控制台测试">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    控制台测试
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/container.html" title="服务容器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    服务容器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/contracts.html" title="契约">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    契约
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/contributions.html" title="贡献导引">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    贡献导引
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/controllers.html" title="Controllers">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Controllers
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/csrf.html" title="CSRF 保护">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    CSRF 保护
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/database-testing.html" title="数据库测试">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库测试
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/database.html" title="数据库: 入门">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库: 入门
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/deployment.html" title="部署">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    部署
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/documentation.html" title="前言">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    前言
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/dusk.html" title="Laravel Dusk">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Dusk
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-collections.html" title="Eloquent: 集合">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 集合
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-mutators.html" title="Eloquent: 修改器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 修改器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-relationships.html" title="Eloquent: 关联">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 关联
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-resources.html" title="Eloquent: API 资源">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: API 资源
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-serialization.html" title="Eloquent: 序列化">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 序列化
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent.html" title="Eloquent: 入门">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 入门
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/encryption.html" title="加密解密">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    加密解密
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/envoy.html" title="Laravel Envoy">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Envoy
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/errors.html" title="错误处理">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    错误处理
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/events.html" title="事件系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    事件系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/facades.html" title="Facades">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Facades
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/filesystem.html" title="File Storage">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    File Storage
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/frontend.html" title="JavaScript &amp; CSS 脚手架">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    JavaScript &amp; CSS 脚手架
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/hashing.html" title="哈希加密">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    哈希加密
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/helpers.html" title="辅助函数">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    辅助函数
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/homestead.html" title="Laravel Homestead">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Homestead
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/horizon.html" title="Laravel Horizon">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Horizon
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/http-client.html" title="HTTP 客户端">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP 客户端
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/http-tests.html" title="HTTP Tests">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP Tests
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/installation.html" title="安装">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    安装
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/lifecycle.html" title="请求生命周期">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    请求生命周期
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/localization.html" title="本地化">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    本地化
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/logging.html" title="日志">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    日志
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/mail.html" title="邮件发送">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    邮件发送
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/middleware.html" title="中间件">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    中间件
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/migrations.html" title="数据库：迁移">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库：迁移
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/mix.html" title="编辑资源 (Mix)">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    编辑资源 (Mix)
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/mocking.html" title="Mocking">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Mocking
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/notifications.html" title="消息通知">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    消息通知
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/packages.html" title="Package Development">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Package Development
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/pagination.html" title="数据库: 分页">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库: 分页
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/passport.html" title="Laravel Passport">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Passport
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/passwords.html" title="重置密码">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    重置密码
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/providers.html" title="服务提供者">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    服务提供者
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/queries.html" title="数据库：查询构造器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库：查询构造器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/queues.html" title="队列">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    队列
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/redis.html" title="Redis">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Redis
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/releases.html" title="发行说明">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    发行说明
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/requests.html" title="HTTP 请求">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP 请求
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/responses.html" title="HTTP Responses">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP Responses
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/routing.html" title="路由">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    路由
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/sail.html" title="Laravel Sail">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Sail
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/sanctum.html" title="Laravel Sanctum">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Sanctum
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/scheduling.html" title="任务调度">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    任务调度
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/scout.html" title="Laravel Scout">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Scout
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/seeding.html" title="数据库：填充">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库：填充
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/session.html" title="HTTP 会话机制">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP 会话机制
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/socialite.html" title="Laravel 社会化登录">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 社会化登录
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/structure.html" title="目录结构">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    目录结构
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/telescope.html" title="Laravel Telescope">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Telescope
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/testing.html" title="测试：入门指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    测试：入门指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/upgrade.html" title="升级指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    升级指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/urls.html" title="生成 URL">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    生成 URL
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/valet.html" title="Laravel Valet">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Valet
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/validation.html" title="表单验证">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    表单验证
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/verification.html" title="Email 认证">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Email 认证
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/views.html" title="视图">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    视图
                </a>
            </li>
            </ul>
</div>        <div class="aside-middle col-md-9 col-lg-10 row">
    <div class="col-md-9 col-xl-10" style="overflow: auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
        <div class="container main-h4-1">
            <div class="page-content">
                <h1>邮件发送</h1>
<ul>
<li><a href="#introduction">简介</a>
<ul>
<li><a href="#configuration">配置</a></li>
<li><a href="#driver-prerequisites">驱动前提</a></li>
</ul></li>
<li><a href="#generating-mailables">创建通知</a></li>
<li><a href="#writing-mailables">编写通知</a>
<ul>
<li><a href="#configuring-the-sender">配置发送者</a></li>
<li><a href="#configuring-the-view">配置视图</a></li>
<li><a href="#view-data">视图数据</a></li>
<li><a href="#attachments">附件</a></li>
<li><a href="#inline-attachments">内部附件</a></li>
<li><a href="#customizing-the-swiftmailer-message">自定义 SwiftMail 消息</a></li>
</ul></li>
<li><a href="#markdown-mailables">Markdown 格式的通知</a>
<ul>
<li><a href="#generating-markdown-mailables">创建 Markdown 格式的通知</a></li>
<li><a href="#writing-markdown-messages">编写 Markdown 格式的通知</a></li>
<li><a href="#customizing-the-components">自定义组件</a></li>
</ul></li>
<li><a href="#sending-mail">发送邮件</a>
<ul>
<li><a href="#queueing-mail">队列邮件</a></li>
</ul></li>
<li><a href="#rendering-mailables">渲染通知</a>
<ul>
<li><a href="#previewing-mailables-in-the-browser">在浏览器中预览邮件通知</a></li>
</ul></li>
<li><a href="#localizing-mailables">本地化通知</a></li>
<li><a href="#mail-and-local-development">邮件与本地开发</a></li>
<li><a href="#events">事件</a></li>
</ul>
<p><a name="introduction"></a></p>
<h2>简介</h2>
<p>Laravel 基于热门的 <a href="https://swiftmailer.symfony.com/">SwiftMailer</a> 函数库提供了一套干净、简洁的 API ，可以为 SMTP、Mailgun、Postmark、Amazon SES 和 <code>sendmail</code> 提供驱动，让你可以快速从本地或云端服务自由地发送邮件。</p>
<p><a name="configuration"></a></p>
<h3>配置</h3>
<p>Laravel 的 email 服务可以通过 <code>mail</code> 配置文件进行配置。 这个文件中配置地每个邮件程序都可能有自己地配置项，甚至是独有的「传输方式」，这将允许你的应用程序使用不同的邮件服务来发送特定的邮件。例如，你的应用程序可能使用 Postmark 发送事务性邮件，而使用 Amazon SES 发送批量邮件。</p>
<p><a name="driver-prerequisites"></a></p>
<h3>驱动前提</h3>
<p>基于 API 的驱动，比如 Mailgun 和 Postmark 通常比 SMTP 服务器更简单快速。如果可以的话， 你应该尽可能使用这些驱动。所有的 API 驱动都需要 Guzzle HTTP 函数库，这个函数库可以通过 Composer 包管理安装：</p>
<pre><code>composer require guzzlehttp/guzzle</code></pre>
<h4>Mailgun 驱动</h4>
<p>要使用 <code>Mailgun</code> 驱动，首先必须安装 <code>Guzzle</code>, 之后将 <code>config/mail.php</code> 配置文件中的 <code>default</code> 选项设置为 <code>mailgun</code>. 接下来，确认 <code>config/services.php</code> 配置文件包含以下选项：</p>
<pre><code>'mailgun' =&gt; [
    'domain' =&gt; 'your-mailgun-domain',
    'secret' =&gt; 'your-mailgun-key',
],</code></pre>
<p>如果你不使用 &quot;US&quot; <a href="https://documentation.mailgun.com/en/latest/api-intro.html#mailgun-regions">Mailgun 区域</a>, 你可以在 <code>services</code> 配置文件中定义自己的区域终端地址：</p>
<pre><code>'mailgun' =&gt; [
    'domain' =&gt; 'your-mailgun-domain',
    'secret' =&gt; 'your-mailgun-key',
    'endpoint' =&gt; 'api.eu.mailgun.net',
],</code></pre>
<h4>Postmark 驱动</h4>
<p>要使用 <code>Postmark</code> 驱动， 需要先通过 <code>Composer</code> 安装 <code>Postmark</code> 的 <code>SwiftMailer</code> 函数库：</p>
<pre><code>composer require wildbit/swiftmailer-postmark</code></pre>
<p>然后, 安装 <code>Guzzle</code> 并为 <code>postmark</code> 设置 <code>config/mail.php</code> 配置文件中的 <code>default</code> 选项. 最后, 确认你的 <code>config/services.php</code> 配置文件包含以下选项:</p>
<pre><code>'postmark' =&gt; [
    'token' =&gt; 'your-postmark-token',
],</code></pre>
<h4>SES 驱动</h4>
<p>要使用 <code>Amazon SES</code> 驱动，你必须先安装 <code>PHP</code> 的 <code>Amazon AWS SDK</code> 。你可以在 <code>composer.json</code> 文件的 <code>require</code> 段落加入下面这一行并运行 <code>composer update</code> 命令：</p>
<pre><code>"aws/aws-sdk-php": "~3.0"</code></pre>
<p>然后，将 <code>config/mail.php</code> 配置文件的 <code>default</code> 选项设置成 <code>ses</code> 并确认你的 <code>config/services.php</code> 配置文件包含以下选项：</p>
<pre><code>'ses' =&gt; [
    'key' =&gt; 'your-ses-key',
    'secret' =&gt; 'your-ses-secret',
    'region' =&gt; 'ses-region',  // e.g. us-east-1
],</code></pre>
<p>如果你在执行 SES <code>SendRawEmail</code> 请求的时候需要包含 <a href="https://docs.aws.amazon.com/aws-sdk-php/v3/api/api-email-2010-12-01.html#sendrawemail">附加选项</a>， 你可以在 <code>ses</code> 配置中定义一个 <code>options</code> 数组：</p>
<pre><code>'ses' =&gt; [
    'key' =&gt; 'your-ses-key',
    'secret' =&gt; 'your-ses-secret',
    'region' =&gt; 'ses-region',  // e.g. us-east-1
    'options' =&gt; [
        'ConfigurationSetName' =&gt; 'MyConfigurationSet',
        'Tags' =&gt; [
            [
                'Name' =&gt; 'foo',
                'Value' =&gt; 'bar',
            ],
        ],
    ],
],</code></pre>
<p><a name="generating-mailables"></a></p>
<h2>生成 Mailables（可邮寄类）</h2>
<p>在 Laravel 中，应用发送的每种邮件都被表示为 <code>mailable</code> 类。这些类存储于 <code>app/Mail</code> 目录中。如果您的应用中没有该目录，别慌，当您使用 <code>make:mail</code> 命令生成您的首个 mailable 类时，应用将会自动创建它：</p>
<pre><code>php artisan make:mail OrderShipped</code></pre>
<p><a name="writing-mailables"></a></p>
<h2>编写 Mailables</h2>
<p>所有的 mailable 类的配置都在 <code>build</code> 方法中完成。您可以通过调用诸如 <code>from</code> ， <code>subject</code> ， <code>view</code> 和 <code>attach</code> 这样的各种各样的方法来配置邮件的内容及其发送。</p>
<p><a name="configuring-the-sender"></a></p>
<h3>配置发件人</h3>
<h4>使用 <code>from</code> 方法</h4>
<p>首先，让我们浏览一下邮件的发件人的配置。或者，换句话说，邮件来自谁。有两种方法配置发件人。第一种，您可以在您的 mailable 类的 <code>build</code> 方法中使用 <code>from</code> 方法：</p>
<pre><code>/**
 * 编译消息。
 *
 * @return $this
 */
public function build()
{
    return $this-&gt;from('example@example.com')
                -&gt;view('emails.orders.shipped');
}</code></pre>
<h4>使用全局的 <code>from</code> 地址</h4>
<p>当然，如果您的应用在任何邮件中使用的「发件人」地址都一致的话，在您生成的每一个 mailable 类中调用 <code>from</code> 方法可能会很麻烦。因此，您可以在您的 <code>config/mail.php</code> 文件中指定一个全局的「发件人」地址。当某个 mailable 类没有指定「发件人」时，它将使用该全局「发件人」：</p>
<pre><code>'from' =&gt; ['address' =&gt; 'example@example.com', 'name' =&gt; 'App Name'],</code></pre>
<p>此外，您亦可在您的 <code>config/mail.php</code> 配置文件中定义一个全局的「回复」地址：</p>
<pre><code>'reply_to' =&gt; ['address' =&gt; 'example@example.com', 'name' =&gt; 'App Name'],</code></pre>
<p><a name="configuring-the-view"></a></p>
<h3>配置邮件视图</h3>
<p>您可以在 mailable 类的 <code>build</code> 方法中使用 <code>view</code> 方法来指定在渲染邮件内容时要使用的模板。由于每封邮件通常使用 <a href="/docs/laravel_8_zh/blade.html">Blade 模板</a> 来渲染其内容，因此您可以在构建您的邮件 HTML 内容时使用 Blade 模板引擎提供的所有功能及享受其带来的便利性：</p>
<pre><code>/**
 * 构建邮件消息。
 *
 * @return $this
 */
public function build()
{
    return $this-&gt;view('emails.orders.shipped');
}</code></pre>
<blockquote>
<p>技巧：您可以创建一个 <code>resources/views/emails</code> 目录来存放您的所有邮件模板；当然，您也可以将其置于 <code>resources/views</code> 目录下的任何位置。</p>
</blockquote>
<h4>纯文本邮件</h4>
<p>您可以使用 <code>text</code> 方法来定义一个纯文本格式的邮件。和 <code>view</code> 方法一样，<code>text</code> 方法接受一个模板名，模板名指定了在渲染邮件内容时您想使用的模板。您既可以定义纯文本消息亦可定义 HTML 消息：</p>
<pre><code>/**
 * 构建邮件消息。
 *
 * @return $this
 */
public function build()
{
    return $this-&gt;view('emails.orders.shipped')
                -&gt;text('emails.orders.shipped_plain');
}</code></pre>
<p><a name="view-data"></a></p>
<h3>视图数据</h3>
<h4>通过 Public 属性</h4>
<p>通常情况下，您可能想要在渲染邮件的 HTML 内容时传递一些数据到视图中。有两种方法传递数据到时视图中。第一种，您在 mailable 类中定义的所有 public 的属性都将自动传递到视图中。因此，举个例子，您可以将数据传递到您的 mailable 类的构造函数中，并将其设置为类的 public 属性：</p>
<pre><code>&lt;?php

namespace App\Mail;

use App\Models\Order;
use Illuminate\Bus\Queueable;
use Illuminate\Mail\Mailable;
use Illuminate\Queue\SerializesModels;

class OrderShipped extends Mailable
{
    use Queueable, SerializesModels;

    /**
     * 订单实例。
     *
     * @var Order
     */
    public $order;

    /**
     * 创建一个消息实例。
     *
     * @param  \App\Models\Order  $order
     * @return void
     */
    public function __construct(Order $order)
    {
        $this-&gt;order = $order;
    }

    /**
     * 构造消息。
     *
     * @return $this
     */
    public function build()
    {
        return $this-&gt;view('emails.orders.shipped');
    }
}</code></pre>
<p>当数据被设置成为 public 属性之后，它将被自动传递到您的视图中，因此您可以像您在 Blade 模板中那样访问它们：</p>
<pre><code>&lt;div&gt;
    Price: {{ $order-&gt;price }}
&lt;/div&gt;</code></pre>
<h4>通过 <code>with</code> 方法：</h4>
<p>如果您想要在邮件数据发送到模板前自定义它们的格式，您可以使用 <code>with</code> 方法来手动传递数据到视图中。一般情况下，您还是需要通过 mailable 类的构造函数来传递数据；不过，您应该将它们定义为 <code>protected</code> 或 <code>private</code>以防止它们被自动传递到视图中。然后，在您调用 <code>with</code> 方法的时候，您可以以数组的形式传递您想要传递给模板的数据：</p>
<pre><code>&lt;?php

namespace App\Mail;

use App\Models\Order;
use Illuminate\Bus\Queueable;
use Illuminate\Mail\Mailable;
use Illuminate\Queue\SerializesModels;

class OrderShipped extends Mailable
{
    use Queueable, SerializesModels;

    /**
     * 订单实例。
     *
     * @var \App\Models\Order
     */
    protected $order;

    /**
     * 创建一个消息实例。
     *
     * @param  \App\Models\Order $order
     * @return void
     */
    public function __construct(Order $order)
    {
        $this-&gt;order = $order;
    }

    /**
     * 构造消息。
     *
     * @return $this
     */
    public function build()
    {
        return $this-&gt;view('emails.orders.shipped')
                    -&gt;with([
                        'orderName' =&gt; $this-&gt;order-&gt;name,
                        'orderPrice' =&gt; $this-&gt;order-&gt;price,
                    ]);
    }
}</code></pre>
<p>当数据使用 <code>with</code> 方法传递后，您便可在您的视图中使用它们，此时，您便可以像在 Blade 模板中那样来访问它们：</p>
<pre><code>&lt;div&gt;
    Price: {{ $orderPrice }}
&lt;/div&gt;</code></pre>
<p><a name="attachments"></a></p>
<h3>附件</h3>
<p>要在邮件中加入附件，在 <code>build</code> 方法中使用 <code>attach</code> 方法。<code>attach</code> 方法接受文件的绝对路径作为它的第一个参数：</p>
<pre><code>/**
 * 构建消息
 *
 * @return $this
 */
public function build()
{
    return $this-&gt;view('emails.orders.shipped')
                -&gt;attach('/path/to/file');
}</code></pre>
<p>附加文件到消息时，你也可以传递 <code>数组</code> 给 <code>attach</code> 方法作为第二个参数，以指定显示名称和 / 或是 MIME 类型：</p>
<pre><code>/**
 * 构建消息
 *
 * @return $this
 */
public function build()
{
    return $this-&gt;view('emails.orders.shipped')
                -&gt;attach('/path/to/file', [
                    'as' =&gt; 'name.pdf',
                    'mime' =&gt; 'application/pdf',
                ]);
}</code></pre>
<h4>从磁盘中添加附件</h4>
<p>如果您已在 <a href="/docs/laravel_8_zh/filesystem.html">文件存储</a> 上存储了一个文件，则可以使用 <code>attachFromStorage</code> 方法将其附加到电子邮件中：</p>
<pre><code>/**
 * 构建消息
 *
 * @return $this
 */
public function build()
{
   return $this-&gt;view('emails.orders.shipped')
               -&gt;attachFromStorage('/path/to/file');
}</code></pre>
<p>如有必要，您可以使用 <code>attachFromStorage</code> 方法的第二个和第三个参数指定文件的附件名称和其他选项：</p>
<pre><code>/**
 * 构建消息
 *
 * @return $this
 */
public function build()
{
   return $this-&gt;view('emails.orders.shipped')
               -&gt;attachFromStorage('/path/to/file', 'name.pdf', [
                   'mime' =&gt; 'application/pdf'
               ]);
}</code></pre>
<p>如果需要指定默认磁盘以外的存储磁盘，可以使用 <code>attachFromStorageDisk</code> 方法：</p>
<pre><code>/**
 * 构建消息
 *
 * @return $this
 */
public function build()
{
   return $this-&gt;view('emails.orders.shipped')
               -&gt;attachFromStorageDisk('s3', '/path/to/file');
}</code></pre>
<h4>原始数据附件</h4>
<p><code>attachData</code> 可以使用字节数据作为附件。例如，你可以使用这个方法将内存中生成而没有保存到磁盘中的 PDF 附加到邮件中。<code>attachData</code> 方法第一个参数接收原始字节数据，第二个参数为文件名，第三个参数接受一个数组以指定其他参数：</p>
<pre><code>/**
 * 构建消息
 *
 * @return $this
 */
public function build()
{
    return $this-&gt;view('emails.orders.shipped')
                -&gt;attachData($this-&gt;pdf, 'name.pdf', [
                    'mime' =&gt; 'application/pdf',
                ]);
}</code></pre>
<h3>内联附件</h3>
<p>在邮件中嵌入内联图片通常都很麻烦；不过，Laravel 提供了向邮件中附加图片并获取适当的 CID 的简便方法。可以使用邮件模板中 <code>$message</code> 变量的 <code>embed</code> 方法来嵌入内联图片。Laravel 自动使 <code>$message</code> 变量在全部邮件模板中可用，不需要担心如何手动传递它：</p>
<pre><code>&lt;body&gt;
    Here is an image:

    &lt;img src="{{ $message-&gt;embed($pathToImage) }}"&gt;
&lt;/body&gt;</code></pre>
<blockquote>
<p>注意：<code>$message</code> 在文本消息中不可用，因为文本消息不能使用内联附件。</p>
</blockquote>
<h4>嵌入原始数据附件</h4>
<p>如果已经有了希望嵌入邮件模板的原始数据串，可以使用 <code>$message</code> 变量的 <code>embedData</code> 方法：</p>
<pre><code>&lt;body&gt;
    Here is an image from raw data:

    &lt;img src="{{ $message-&gt;embedData($data, $name) }}"&gt;
&lt;/body&gt;</code></pre>
<h3>自定义 SwiftMailer 消息</h3>
<p><code>Mailable</code> 基类的 <code>withSwiftMessage</code> 方法允许你注册一个回调，它将在发送消息之前被调用，原始的 SwiftMailer 消息将作为该回调的参数。借此机会，你可以在发消息前对其进行定制。</p>
<pre><code>/**
 * 构建消息
 *
 * @return $this
 */
public function build()
{
    $this-&gt;view('emails.orders.shipped');

    $this-&gt;withSwiftMessage(function ($message) {
        $message-&gt;getHeaders()
                -&gt;addTextHeader('Custom-Header', 'HeaderValue');
    });
}</code></pre>
<h2>Markdown 格式的 Mailables 类</h2>
<p>Markdown 格式 mailable 消息允许你从预构建模板和 mailable 类中的邮件通知组件获益。由于消息使用 Markdown 书写，Laravel 能够渲染出美观的、响应式的 HTML 模板消息，还能自动生成文本副本。</p>
<p><a name="generating-markdown-mailables"></a></p>
<h3>Markdown 格式的 Mailable 类</h3>
<p>您可以在执行 <code>make:mail</code> Artisan 命令时使用 <code>--markdown</code> 选项来生成一个使用 Markdown 格式的模板的 mailable 类：</p>
<pre><code>php artisan make:mail OrderShipped --markdown=emails.orders.shipped</code></pre>
<p>然后，在它的 <code>build</code> 方法中配置 mailable 类时，请使用 <code>markdown</code> 方法来代替 <code>view</code> 方法。<code>markdown</code> 方法接受 Markdown 模板的名称和想要传递给模板的可选的数组形式的数据：</p>
<pre><code>/**
 * 构造邮件消息。
 *
 * @return $this
 */
public function build()
{
    return $this-&gt;from('example@example.com')
                -&gt;markdown('emails.orders.shipped');
}</code></pre>
<p><a name="writing-markdown-messages"></a></p>
<h3>编写 Markdown 消息</h3>
<p>Markdown mailable 类整合了 Markdown 语法和 Blade 组件，让您能够非常方便的使用 Laravel 预置组件来构建邮件消息：</p>
<pre><code>@component('mail::message')
# Order Shipped

Your order has been shipped!

@component('mail::button', ['url' =&gt; $url])
View Order
@endcomponent

Thanks,&lt;br&gt;
{{ config('app.name') }}
@endcomponent</code></pre>
<blockquote>
<p>技巧：在编写 Markdown 邮件的时候，请不要使用额外的缩进。Markdown 解析器会把缩进渲染成代码块。</p>
</blockquote>
<h4>按钮组件</h4>
<p>按钮组件用于渲染居中的按钮链接。它接受来嗯个参数，一个是 <code>url</code> 一个是可选的 <code>颜色</code> 。可用的颜色包括 <code>primary</code> ， <code>success</code> 和 <code>error</code> 。您可以在您的邮件消息中添加任意数量的按钮：</p>
<pre><code>@component('mail::button', ['url' =&gt; $url, 'color' =&gt; 'success'])
View Order
@endcomponent</code></pre>
<h4>面板组件</h4>
<p>面板组件在面板内渲染指定的文本块，面板与其他消息的背景色略有不同。它允许您绘制一个警示文本块：</p>
<pre><code>@component('mail::panel')
This is the panel content.
@endcomponent</code></pre>
<h4>表格组件</h4>
<p>表格组件允许你将 Markdown 表格转换成 HTML 表格。此组件接受 Markdown 表格作为其内容。列对齐支持默认的 Markdown 表格对齐语法：</p>
<pre><code>@component('mail::table')
| Laravel       | Table         | Example  |
| ------------- |:-------------:| --------:|
| Col 2 is      | Centered      | $10      |
| Col 3 is      | Right-Aligned | $20      |
@endcomponent</code></pre>
<h3>自定义组件</h3>
<p>可以将所有 Markdown 邮件组件导出到自己的应用，用作自定义组件的模板。若要导出这些组件，使用带有 <code>laravel-mail</code> 资产标签的 <code>vendor:publish</code> Artisan 命令：</p>
<pre><code>php artisan vendor:publish --tag=laravel-mail</code></pre>
<p>此命令将 Markdown 邮件组件导出到 <code>resources/views/vendor/mail</code> 目录。 <code>mail</code> 目录包含 <code>html</code> 和 <code>text</code> 子目录， 分别包含各自对应的可用组件描述。可以按照自己的意愿自定义这些组件。</p>
<h4>自定义 CSS</h4>
<p>组件导出以后，<code>resources/views/vendor/mail/html/themes</code> 目录有一个 <code>default.css</code> 文件。可以自此文件中自定义 CSS，这些样式将自动内联到 Markdown 邮件消息的 HTML 表示中。</p>
<p>如果想为 Laravel 的 Markdown 组件构建一个全新的主题，您可以在 <code>html/themes</code> 目录中新建一个 CSS 文件。 命名并保存 CSS 文件后，并更新 <code>mail</code> 配置文件的 <code>theme</code> 选项以匹配新主题的名称。</p>
<p>要为单个 mailable 自定义主题，可以将 mailable 类的 <code>$theme</code> 属性设置为发送 mailable 时应使用的主题名称。</p>
<h2>发送邮件</h2>
<p>若要发送邮件，使用 <code>Mail</code> <a href="/docs/laravel_8_zh/facades.html">facade</a> 的 <code>to</code> 方法。 <code>to</code> 方法接受 邮件地址、用户实例或用户集合。如果传递一个对象或者对象集合，mailer 在设置收件人时将自动使用它们的 <code>email</code> 和 <code>name</code> 属性，因此请确保对象的这些属性可用。一旦指定了收件人，就可以将 mailable 类实例传递给 <code>send</code> 方法：</p>
<pre><code>&lt;?php

namespace App\Http\Controllers;

use App\Http\Controllers\Controller;
use App\Mail\OrderShipped;
use App\Models\Order;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Mail;

class OrderController extends Controller
{
    /**
     * 发送给定的订单。
     *
     * @param  Request  $request
     * @param  int  $orderId
     * @return Response
     */
    public function ship(Request $request, $orderId)
    {
        $order = Order::findOrFail($orderId);

        // 发送订单...

        Mail::to($request-&gt;user())-&gt;send(new OrderShipped($order));
    }
}</code></pre>
<p>在发送消息时不止可以指定收件人。还可以通过链式调用「to」、「cc」、「bcc」一次性指定抄送和密送收件人：</p>
<pre><code>use Illuminate\Support\Facades\Mail;

Mail::to($request-&gt;user())
    -&gt;cc($moreUsers)
    -&gt;bcc($evenMoreUsers)
    -&gt;send(new OrderShipped($order));</code></pre>
<h4>遍历收件人列表</h4>
<p>有时，你需要通过遍历一个收件人/邮件地址数组的方式，给一系列收件人发送邮件。因为 <code>to</code> 方法会给 mailable 列表中的收件人追加邮件地址，你应该为每个收件人重建 mailable 实例。</p>
<pre><code>foreach (['taylor@example.com', 'dries@example.com'] as $recipient) {
    Mail::to($recipient)-&gt;send(new OrderShipped($order));
}</code></pre>
<h4>通过特定的 Mailer 发送邮件</h4>
<p>默认情况下，Laravel 将使用你的 <code>mail</code> 配置文件中配置为 <code>default</code> 邮件程序。 但是，你可以使用 <code>mailer</code> 方法通过特定的邮件程序配置发送：</p>
<pre><code>Mail::mailer('postmark')
        -&gt;to($request-&gt;user())
        -&gt;send(new OrderShipped($order));</code></pre>
<p><a name="queueing-mail"></a></p>
<h3>邮件队列</h3>
<h4>将邮件消息加入队列</h4>
<p>由于发送邮件消息可能大幅度延长应用的响应时间，许多开发者选择将邮件消息加入队列放在后台发送。Laravel 使用内置的 <a href="/docs/laravel_8_zh/queues.html">统一队列 API</a> 简化了这一工作。若要将邮件消息加入队列，可以在指定消息的接收者后，使用 <code>Mail</code> facade 的 <code>queue</code> 方法：</p>
<pre><code>Mail::to($request-&gt;user())
    -&gt;cc($moreUsers)
    -&gt;bcc($evenMoreUsers)
    -&gt;queue(new OrderShipped($order));</code></pre>
<p>此方法自动将作业推送到队列中以便消息在后台发送。使用此特性之前，需要 <a href="/docs/laravel_8_zh/queues.html">配置队列</a> ：</p>
<h4>延迟消息队列</h4>
<p>想要延迟发送队列化的邮件消息，可以使用 <code>later</code> 方法。<code>later</code> 方法的第一个参数的第一个参数是标示消息何时发送的 <code>DateTime</code> 实例：</p>
<pre><code>$when = now()-&gt;addMinutes(10);

Mail::to($request-&gt;user())
    -&gt;cc($moreUsers)
    -&gt;bcc($evenMoreUsers)
    -&gt;later($when, new OrderShipped($order));</code></pre>
<h4>推送到指定队列</h4>
<p>由于所有使用 <code>make:mail</code> 命令生成的 mailable 类都是用了 <code>Illuminate\Bus\Queueable</code> trait，因此你可以在任何 mailable 类实例上调用 <code>onQueue</code> 和 <code>onConnection</code> 方法来指定消息的连接和队列名：</p>
<pre><code>$message = (new OrderShipped($order))
                -&gt;onConnection('sqs')
                -&gt;onQueue('emails');

Mail::to($request-&gt;user())
    -&gt;cc($moreUsers)
    -&gt;bcc($evenMoreUsers)
    -&gt;queue($message);</code></pre>
<h4>默认队列</h4>
<p>如果你希望你的邮件类始终使用队列，你可以给邮件类实现 <code>ShouldQueue</code> 契约，现在即使你调用了   <code>send</code> 方法，邮件依旧使用队列的方式发送：</p>
<pre><code>use Illuminate\Contracts\Queue\ShouldQueue;

class OrderShipped extends Mailable implements ShouldQueue
{
    //
}</code></pre>
<p><a name="rendering-mailables"></a></p>
<h2>获取邮件内容</h2>
<p>有时您可能希望捕获邮件的 HTML 内容而不发送它。为此，可以调用邮件类的 <code>render</code> 方法。此方法将以字符串形式返回邮件类的渲染内容:</p>
<pre><code>$invoice = App\Models\Invoice::find(1);

return (new App\Mail\InvoicePaid($invoice))-&gt;render();</code></pre>
<p><a name="previewing-mailables-in-the-browser"></a></p>
<h3>在浏览器中预览邮件</h3>
<p>设计邮件模板时，可以方便地在浏览器中预览邮件，就像典型的 <code>Blade</code> 模板一样。因此， Laravel 允许您直接从路由闭包或控制器返回任何邮件类。当邮件返回时，它将渲染并显示在浏览器中，允许您快速预览其设计，而无需将其发送到实际的电子邮件地址</p>
<pre><code>Route::get('mailable', function () {
    $invoice = App\Models\Invoice::find(1);

    return new App\Mail\InvoicePaid($invoice);
});</code></pre>
<p><a name="localizing-mailables"></a></p>
<h2>邮件类的本地化</h2>
<p>Laravel 允许您以当前语言以外的语言发送邮件，如果是队列邮件，甚至会记住这个区域设置。</p>
<p>为了实现这一点，<code>Mail</code> Facade 提供了一个 <code>locale</code> 方法来设置所需的语言。在格式化邮件时，应用程序将更改为该区域设置，然后在格式化完成后恢复到以前的区域设置</p>
<pre><code>Mail::to($request-&gt;user())-&gt;locale('es')-&gt;send(
    new OrderShipped($order)
);</code></pre>
<h3>用户的个性化翻译</h3>
<p>有时，应用程序会为每个用户存储不同的区域设置。通过在一个或多个模型上实现<code>HasLocalePreference</code>锲约，可以指示 Laravel 在发送邮件时使用此存储的区域设置:</p>
<pre><code>use Illuminate\Contracts\Translation\HasLocalePreference;

class User extends Model implements HasLocalePreference
{
    /**
     * 返回用户的特定区域信息
     *
     * @return string
     */
    public function preferredLocale()
    {
        return $this-&gt;locale;
    }
}</code></pre>
<p>一旦实现了此契约，Laravel 将在向模型发送邮件和通知时自动使用该语言环境。因此，使用此接口时不需要调用 <code>locale</code> 方法:</p>
<pre><code>Mail::to($request-&gt;user())-&gt;send(new OrderShipped($order));</code></pre>
<p><a name="mail-and-local-development"></a></p>
<h2>本地开发</h2>
<p>当你正在开发一个邮件的应用程序时，您可能不想实际地向真实邮件地址发送邮件。Laravel 提供了几种在本地开发过程中「禁用」实际发送电子邮件的方法</p>
<h4>日志驱动</h4>
<p><code>log</code> 邮件驱动程序不发送邮件，而是将所有邮件消息写入日志文件用来校验。有关为每个环境配置应用程序的更多信息，请参阅<a href="/docs/laravel_8_zh/configuration.html">配置文档</a></p>
<h4>统一收件人</h4>
<p>Laravel 提供的另一个解决方案是为框架发送的所有邮件设置一个统一的收件人。这样应用程序生成的所有电子邮件都将发送到特定的地址，而不是发送消息时指定的地址。你可以在  <code>config/mail.php</code> 配置文件中的 <code>to</code> 选项来启用：</p>
<pre><code>'to' =&gt; [
    'address' =&gt; 'example@example.com',
    'name' =&gt; 'Example'
],</code></pre>
<h4>Mailtrap（虚拟的 smtp 测试服务）</h4>
<p>最后，您可以使用像 <a href="https://mailtrap.io">Mailtrap</a> 这样的服务和 <code>smtp</code> 驱动发送邮件消息到「dummy」邮箱中，这样做，您便可以在真实的邮箱客户端中查看您的邮件。此举的好处是允许您在 Mailtrap 的消息查看器中实际查看最终的邮件。</p>
<p><a name="events"></a></p>
<h2>事件</h2>
<p>在发送邮件消息的时候，Laravel 会启动两个事件。<code>MessageSending</code> 事件在发送消息前触发，<code>MessageSent</code> 事件在消息发送完成后触发。记住，这些事件都是在邮件被 <strong>发送</strong> 时触发，而不是在队列化的时候。您可以在 <code>EventServiceProvider</code> 中注册一个事件监听器：</p>
<pre><code>/**
 * 为应用映射事件监听器。
 *
 * @var array
 */
protected $listen = [
    'Illuminate\Mail\Events\MessageSending' =&gt; [
        'App\Listeners\LogSendingMessage',
    ],
    'Illuminate\Mail\Events\MessageSent' =&gt; [
        'App\Listeners\LogSentMessage',
    ],
];</code></pre>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-xl-2" id="toc-list">
        <ul></ul>
    </div>
</div>    </div>
</div>
<span id="back-top">
<svg width="20" height="20" fill="currentColor">
    <use xlink:href="/css/bootstrap-icons.svg#chevron-up"/>
</svg>
</span>
 
<script>
    // 浏览量统计
    $(function () {
        let formdata = new FormData();
        formdata.append('_token', '');
        formdata.append('id', 347);
        $.ajax({
            url: $(".sticky-top .navbar-brand").attr('href') + "/api/doc/clicks",
            type: 'POST',
            data: formdata,
            processData: false,
            contentType: false
        });
    });
    // aside-hidden
    $(function () {
        $('#aside-hidden').on('click', function () {
            $('.aside').toggle(0, function () {
                if ($(this).is(':visible')) {
                    $('.aside-middle').removeClass('col-md-12 col-lg-12').addClass('col-md-9 col-lg-10');
                } else {
                    $('.aside-middle').removeClass('col-md-9 col-lg-10').addClass('col-md-12 col-lg-12');
                }
            });
        });
    });
</script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?1522d01c436f59ddc8389f25bfa9d53e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>