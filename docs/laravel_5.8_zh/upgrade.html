<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"> 
    <meta name="csrf-token" content=""> 
    <title>Laravel 升级索引 - 开发帮助文档</title> 
    <meta name="keyword" content="upgrade"> 
    <meta name="description" content="upgrade"> 
    <meta name="author" content="Moments"> 
    <link href="/favicon.ico" rel="shortcut icon"> 
    <link href="/css/blog.css" rel="stylesheet"> 
    <script src="/js/blog.js"></script> 
</head>
<body>
<header class="sticky-top">
    <nav class="navbar navbar-expand navbar-dark bg-secondary justify-content-between text-uppercase">
        <div class="navbar-nav" style="overflow:hidden;">
            <a class="navbar-brand" href="https://help.pythonschool.com">
                <span class="d-md-none">
                    <svg class="text-warning" width="24" height="24" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#emoji-sunglasses"/>
                    </svg>
                </span>
                <span class="d-none d-md-flex">开发帮助文档</span>
            </a>
            <div class="navbar-nav-scroll" style="overflow: hidden;">
                <ul class="navbar-nav text-nowrap pb-4" style="overflow:auto;">
                                            <li class="nav-item">
                            <a class="nav-link active" href="/docs/laravel/index.html">laravel</a>
                        </li>
                                            <li class="nav-item">
                            <a class="nav-link" href="/docs/php/index.html">php</a>
                        </li>
                                    </ul>
            </div>
        </div>
        <div class="d-inline-flex">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/liuhuashi">
                        <svg class="text-light" width="24" height="24" fill="currentColor">
                            <use xlink:href="/css/bootstrap-icons.svg#github"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<div class="container-fluid">
    <div id="aside-hidden" class="position-fixed" style="left:0;top: 58px;cursor:pointer;z-index: 10000;">
        <svg class="align-text-bottom text-warning" width="16" height="16" fill="currentColor" stroke="currentColor" stroke-width="1">
            <use xlink:href="/css/bootstrap-icons.svg#arrow-left-square"/>
        </svg>
    </div>
    <div class="row">
        <div class="aside col-md-3 col-lg-2 border-right shadow position-sticky" style="overflow:auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
    <form class="row border-bottom p-3 bg-white sticky-top">
        <input id="search-version" class="form-control" data-version="5" type="search" placeholder="英文逗号分隔,分词搜索">
    </form>
    <ul class="nav navbar-nav nav-pills flex-column pt-2 figure-caption">
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/about.html" title="Laravel 5.8 中文文档">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 5.8 中文文档
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/api-authentication.html" title="API Authentication">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    API Authentication
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/artisan.html" title="Laravel 的 Artisan 命令行工具">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 Artisan 命令行工具
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/authentication.html" title="Laravel 的用户认证系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的用户认证系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/authorization.html" title="Laravel 的用户授权系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的用户授权系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/billing.html" title="Laravel 的收费系统 Cashier">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的收费系统 Cashier
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/blade.html" title="Laravel 的 Blade 模板引擎">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 Blade 模板引擎
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/braintree.html" title="Laravel Cashier (Braintree)">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Cashier (Braintree)
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/broadcasting.html" title="Laravel 的事件广播系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的事件广播系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/cache.html" title="Laravel 的缓存系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的缓存系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/collections.html" title="Laravel 的集合 Collection">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的集合 Collection
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/configuration.html" title="Laravel 的配置信息">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的配置信息
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/console-tests.html" title="Console Tests">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Console Tests
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/container.html" title="Laravel 服务容器解析">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 服务容器解析
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/contracts.html" title="Laravel 的契约 (Contracts)">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的契约 (Contracts)
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/contributions.html" title="Laravel 源代码贡献指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 源代码贡献指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/controllers.html" title="Laravel 的 HTTP 控制器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 HTTP 控制器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/csrf.html" title="Laravel 下的伪造跨站请求保护 CSRF">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 下的伪造跨站请求保护 CSRF
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/database-testing.html" title="Laravel 测试之 - 数据库测试">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 测试之 - 数据库测试
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/database.html" title="数据库：入门">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库：入门
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/deployment.html" title="Laravel 的部署">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的部署
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/documentation.html" title="主页(Index)">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    主页(Index)
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/dusk.html" title="Laravel 测试之 - 浏览器测试 (Laravel Dusk)">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 测试之 - 浏览器测试 (Laravel Dusk)
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/eloquent-collections.html" title="Eloquent：集合">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent：集合
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/eloquent-mutators.html" title="Eloquent： 修改器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent： 修改器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/eloquent-relationships.html" title="Eloquent：关联">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent：关联
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/eloquent-resources.html" title="Eloquent: API 资源">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: API 资源
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/eloquent-serialization.html" title="Eloquent: 序列化">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 序列化
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/eloquent.html" title="Eloquent: 入门">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 入门
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/encryption.html" title="Laravel 的加密解密机制">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的加密解密机制
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/envoy.html" title="Laravel 的远程服务器任务处理器 Envoy">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的远程服务器任务处理器 Envoy
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/errors.html" title="Laravel 的错误和日志记录">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的错误和日志记录
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/events.html" title="Laravel 的事件系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的事件系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/facades.html" title="Laravel 的 Facades">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 Facades
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/filesystem.html" title="Laravel 的文件系统和云存储功能集成">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的文件系统和云存储功能集成
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/frontend.html" title="Laravel 的前端资源处理 JavaScript＆CSS 构建">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的前端资源处理 JavaScript＆CSS 构建
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/hashing.html" title="Laravel 的哈希加密">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的哈希加密
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/helpers.html" title="Laravel 的辅助函数列表">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的辅助函数列表
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/homestead.html" title="Laravel 虚拟开发环境 Homestead">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 虚拟开发环境 Homestead
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/horizon.html" title="Laravel 队列监控面板 - Horizon">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 队列监控面板 - Horizon
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/http-tests.html" title="Laravel 测试之：HTTP 测试">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 测试之：HTTP 测试
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/installation.html" title="Laravel 安装指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 安装指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/license.html" title="license">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    license
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/lifecycle.html" title="Laravel 的请求生命周期">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的请求生命周期
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/localization.html" title="Laravel 的本地化功能">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的本地化功能
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/logging.html" title="Logging">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Logging
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/mail.html" title="Laravel 的 邮件发送功能">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 邮件发送功能
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/middleware.html" title="Laravel 的路由中间件">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的路由中间件
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/migrations.html" title="Laravel 的数据库迁移 Migrations">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的数据库迁移 Migrations
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/mix.html" title="Laravel 的资源任务编译器 Laravel Mix">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的资源任务编译器 Laravel Mix
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/mocking.html" title="Laravel 测试之：测试模拟器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 测试之：测试模拟器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/notifications.html" title="Laravel 的消息通知系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的消息通知系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/packages.html" title="Laravel 的扩展插件开发指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的扩展插件开发指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/pagination.html" title="Laravel 的分页功能">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的分页功能
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/passport.html" title="Laravel 的 API 认证系统 Passport">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 API 认证系统 Passport
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/passwords.html" title="Laravel 的密码重置功能">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的密码重置功能
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/providers.html" title="Laravel 的服务提供器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的服务提供器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/queries.html" title="Laravel 数据库之：数据库请求构建器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 数据库之：数据库请求构建器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/queues.html" title="Laravel 的队列系统介绍">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的队列系统介绍
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/readme.html" title="Laravel Documentation">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Documentation
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/redirects.html" title="Laravel 的 HTTP 重定向 Redirect">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 HTTP 重定向 Redirect
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/redis.html" title="Laravel 的 Redis 使用指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 Redis 使用指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/releases.html" title="发行说明">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    发行说明
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/requests.html" title="Laravel 的 HTTP 请求">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 HTTP 请求
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/responses.html" title="Laravel 的请求响应">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的请求响应
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/routing.html" title="Laravel HTTP 路由功能">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel HTTP 路由功能
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/scheduling.html" title="Laravel 的任务调度（计划任务）功能 Task Scheduling">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的任务调度（计划任务）功能 Task Scheduling
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/scout.html" title="Laravel 的搜索系统 Scout">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的搜索系统 Scout
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/seeding.html" title="Laravel 数据库之：数据填充">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 数据库之：数据填充
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/session.html" title="Laravel 的 HTTP 会话机制">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 HTTP 会话机制
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/socialite.html" title="Laravel 的 社会化登录功能">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 社会化登录功能
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/structure.html" title="Laravel 的文件夹结构">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的文件夹结构
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/telescope.html" title="Laravel Telescope">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Telescope
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/testing.html" title="Laravel 测试: 入门指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 测试: 入门指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/upgrade.html" title="Laravel 升级索引">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 升级索引
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/urls.html" title="Laravel 的 URL 生成">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 URL 生成
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/valet.html" title="Laravel 的开发环境 Valet">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的开发环境 Valet
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/validation.html" title="Laravel 的表单验证机制详解">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的表单验证机制详解
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/verification.html" title="Email Verification">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Email Verification
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/views.html" title="Laravel 的视图">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的视图
                </a>
            </li>
            </ul>
</div>        <div class="aside-middle col-md-9 col-lg-10 row">
    <div class="col-md-9 col-xl-10" style="overflow: auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
        <div class="container main-h4-1">
            <div class="page-content">
                <h1>Laravel 升级索引</h1>
<ul>
<li><a href="#upgrade-5.8.0">从 5.7 升级到 5.8.0</a></li>
</ul>
<p><a name="high-impact-changes"></a></p>
<h2>重大影响的改变</h2>
<div class="content-list">
<ul>
<li><a href="#cache-ttl-in-seconds">缓存的生成周期以秒为单位</a></li>
<li><a href="#cache-lock-safety-improvements">缓存锁的安全性改进</a></li>
<li><a href="#environment-variable-parsing">环境变量的语法解析</a></li>
<li><a href="#markdown-file-directory-change">Markdown 文件目录改变</a></li>
<li><a href="#nexmo-slack-notification-channels">Nexmo / Slack 通知频道改变</a></li>
</ul>
</div>
<p><a name="medium-impact-changes"></a></p>
<h2>中等影响的改变</h2>
<div class="content-list">
<ul>
<li><a href="#container-generators">容器生成 &amp; 标签服务</a></li>
<li><a href="#sqlite">SQLite 版本约束</a></li>
<li><a href="#string-and-array-helpers">用字符串和数据类取代 Helpers</a></li>
<li><a href="#deferred-service-providers">弃用 Deferred 服务提供者</a></li>
<li><a href="#psr-16-conformity">PSR-16 规范</a></li>
<li><a href="#model-names-ending-with-irregular-plurals">改进不规则复数的模型名称结尾</a></li>
<li><a href="#custom-pivot-models-with-incrementing-ids">自定义中间表模型增加自增 id 属性</a></li>
<li><a href="#pheanstalk-4">支持 Pheanstalk 4.0</a></li>
</ul>
</div>
<p><a name="upgrade-5.8.0"></a></p>
<h2>从 5.7 升级到 5.8.0</h2>
<h4>预计升级耗时：1小时</h4>
<blockquote>
<p>注：我们试图记录每一个可能发生的变化。因为大部分破坏性的变化在框架的内部，这些更改仅有一部分的更改可能影响你的应用。</p>
</blockquote>
<p><a name="updating-dependencies"></a></p>
<h3>更新依赖</h3>
<p>在 <code>composer.json</code> 文件中将 <code>laravel/framework</code> 更新为 <code>5.8.*</code> 。 </p>
<p>接下来，检查应用程序中已安装的第三方包是否支持 Laravel 5.8，并检查已安装的版本是否正确。</p>
<p><a name="the-application-contract"></a></p>
<h3>应用契约</h3>
<h4><code>environment</code> 方法</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>Illuminate/Contracts/Foundation/Application</code> 类 <code>environment</code> 方法的签名<a href="https://github.com/laravel/framework/pull/26296">已修改</a>。如果在您的应用程序中重写了这个方法，您应该更新此方法的签名：</p>
<pre><code>/**
 * Get or check the current application environment.
 *
 * @param  string|array  $environments
 * @return string|bool
 */
public function environment(...$environments);</code></pre>
<h4>新添加的方法</h4>
<p><strong>影响可能性：非常低</strong></p>
<p>新加方法 <code>bootstrapPath</code>, <code>configPath</code>, <code>databasePath</code>, <code>environmentPath</code>, <code>resourcePath</code>, <code>storagePath</code>, <code>resolveProvider</code>, <code>bootstrapWith</code>, <code>configurationIsCached</code>, <code>detectEnvironment</code>, <code>environmentFile</code>, <code>environmentFilePath</code>, <code>getCachedConfigPath</code>, <code>getCachedRoutesPath</code>, <code>getLocale</code>, <code>getNamespace</code>, <code>getProviders</code>, <code>hasBeenBootstrapped</code>, <code>loadDeferredProviders</code>, <code>loadEnvironmentFrom</code>, <code>routesAreCached</code>, <code>setLocale</code>, <code>shouldSkipMiddleware</code> 这个 <code>terminate</code>  方法 <a href="https://github.com/laravel/framework/pull/26477">将会添加到 <code>Illuminate/Contracts/Foundation/Application</code> 契约中</a>.</p>
<p>如果你实现了这个接口，你应该将这些方法添加到实现类中。</p>
<p><a name="authentication"></a></p>
<h3>认证</h3>
<h4>重置密码通知路由参数</h4>
<p><strong>影响可能性：非常低</strong></p>
<p>当用户点击重置密码链接时，Laravel 使用 <code>route</code> 助手生成 URL ，以创建指向以 <code>password.reset</code> 命名的路由，当使用 Laravel 5.7 的时候，token 将会被传递到不带显式名称的 <code>route</code> 助手，比如：</p>
<pre><code>route('password.reset', $token);</code></pre>
<p>当你使用 Laravel 5.8 时，token 作为显式参数传递给 <code>route</code> 助手：</p>
<pre><code>route('password.reset', ['token' =&gt; $token]);</code></pre>
<p>因此，如果你要定义自己的 <code>password.reset</code> 路由，则它的 uri 中一定要包含一个 token 参数。</p>
<h4>重新定义默认密码的长度</h4>
<p><strong>影响可能性：非常低</strong></p>
<p>选择或重置密码时所需的密码长度 <a href="https://github.com/laravel/framework/pull/25957">改为至少需要8个字符</a>.</p>
<p><a name="cache"></a></p>
<h3>缓存</h3>
<p><a name="cache-ttl-in-seconds"></a></p>
<h4>TTL单位为改秒</h4>
<p><strong>影响可能性：非常高</strong></p>
<p>为了在存储数据时允许更精细的到期时间，缓存数据的生存时间从分改为秒。 Illuminate\Cache\Repository 类和它的扩展类的 <code>put</code> ， <code>putMany</code> ， <code>add</code> ， <code>remember</code> 和 <code>setDefaultCacheTime</code> 方法，以及所有缓存存储器的 put 方法都完成了此更新。详情请看 <a href="https://github.com/laravel/framework/pull/27276">相关的 PR</a> 。</p>
<p>如果要向这些方法中的任何一个传递整数，请更新代码以确保保留在缓存中的数据传递的数值是秒。另外，你可以传递一个 <code>DateTime</code> 实例指示数据何时到期：</p>
<pre><code>// Laravel 5.7 - Store item for 30 minutes...
Cache::put('foo', 'bar', 30);

// Laravel 5.8 - Store item for 30 seconds...
Cache::put('foo', 'bar', 30);

// Laravel 5.7 / 5.8 - Store item for 30 seconds...
Cache::put('foo', 'bar', now()-&gt;addSeconds(30));</code></pre>
<blockquote>
<p>{提示} 此更改使 Laravel 缓存系统完全符合 <a href="https://www.php-fig.org/psr/psr-16/">PSR-16</a> 缓存库标准 。</p>
</blockquote>
<p><a name="psr-16-conformity"></a></p>
<h4>遵循 PSR-16</h4>
<p><strong>影响可能性：中等</strong></p>
<p>除了以上返回值有变化之外，本次升级还更新了 <code>Illuminate\Cache\Repository</code> 类中的 <code>put</code>， <code>putMany</code> 和 <code>add</code> 方法的 TTL 参数，使之更符合 PSR-16 规范。新特性提供了一个默认的 <code>null</code> ，所以如果不指定 TTL 值，那么缓存将会永久存储不会过期。此外，如果缓存项的 TTL 为 0 或者更小，那么将会被清除。参阅 <a href="https://github.com/laravel/framework/pull/27217">相关的 PR</a> 获取更多信息。</p>
<p>KeyWritten 事件基于这些变动 <a href="https://github.com/laravel/framework/pull/27265">也进行了更新</a> 。</p>
<p><a name="cache-lock-safety-improvements"></a></p>
<h4>锁安全性改善</h4>
<p><strong>影响可能性：高</strong></p>
<p>在 Laravel 5.7 以及 Laravel 更早的版本的中，一些缓存驱动提供的 “原子锁” 特性，可能由于一些意外行为导致锁被提前释放。</p>
<p>例如： <strong>客户端 A</strong> 获取了一个 10 秒过期的锁 <code>foo</code>。客户端 A 实际上需要耗费 20 秒来完成它的任务。在<strong>客户端 A</strong> 任务执行期间，锁被缓存系统自动释放。之后 <strong>客户端 B</strong> 获取到锁 <code>foo</code>。最终 <strong>客户端 A</strong> 完成了它的任务并释放掉锁 <code>foo</code>，但是无意中释放了 <strong>客户端 B</strong> 所持有的锁。这时候 <strong>客户端 C</strong> 又可以获取到锁。</p>
<p>为了缓解这种情况，现在使用嵌入的「范围令牌」生成锁，这样可以确保在正常情况下，只有锁的持有者才能释放锁。</p>
<p>如果你正在使用 <code>Cache::lock()-&gt;get(Closure)</code> 方法使用锁，则不需要进行任何更改：</p>
<pre><code>Cache::lock('foo', 10)-&gt;get(function () {
    // Lock will be released safely automatically...
});</code></pre>
<p>但是，如果要手动调用， <code>Cache::lock()-&gt;release()</code> ，则必须更新代码以维护锁的实例。然后，在完成任务后，可以在同一个锁实例上调用 <code>release</code> 方法。例如：</p>
<pre><code>if (($lock = Cache::lock('foo', 10))-&gt;get()) {
    // Perform task...

    $lock-&gt;release();
}</code></pre>
<p>有时，您可能希望在一个进程中获取锁定并在另一个进程中释放它。例如，您可以在 Web 请求期间获取锁定，并希望在该请求触发的排队作业结束时释放锁定。在这种情况下，您应该将锁定的作用域「owner token」传递给排队的作业，以便作业可以使用给定的令牌重新实例化锁：</p>
<pre><code>// Within Controller...
$podcast = Podcast::find(1);

if (($lock = Cache::lock('foo', 120))-&gt;get()) {
    ProcessPodcast::dispatch($podcast, $lock-&gt;owner());
}

// Within ProcessPodcast Job...
Cache::restoreLock('foo', $this-&gt;owner)-&gt;release();</code></pre>
<p>如果您想在不尊重其当前所有者的情况下释放锁定，您可以使用以下 <code>forceRelease</code> 方法：</p>
<pre><code>Cache::lock('foo')-&gt;forceRelease();</code></pre>
<p><a name="the-repository-and-store-contracts"></a></p>
<h4>The <code>Repository</code> 和 <code>Store</code> 契约</h4>
<p><strong>影响可能性：非常低</strong></p>
<p>为了完全符合 <code>PSR-16</code> 的要求，<code>Illuminate\Contracts\Cache\Repository</code> 契约的 <code>put</code> 和 <code>forever</code> 方法的返回值以及 <code>Illuminate\Contracts\Cache\Store</code> 契约的 <code>put</code>, <code>putMany</code> 和 <code>forever</code> 方法 <a href="https://github.com/laravel/framework/pull/26726">已更改</a> 从 <code>void</code> 到 <code>bool</code> 。</p>
<p><a name="collections"></a></p>
<h3>集合</h3>
<h4><code>add</code> 方法</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>add</code> 方法 <a href="https://github.com/laravel/framework/pull/27082">已被移动</a> 从 Eloquent 集合类 到集合的基类. 如果您继承 <code>Illuminate\Support\Collection</code> 类中的 <code>add</code> 方法, 请使用它的基类:</p>
<pre><code>public function add($item);</code></pre>
<h4><code>firstWhere</code> 方法</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>firstWhere</code> 方法参数 已更改 匹配 <code>where</code> 方法的签名。如果要重写此方法，则应更新方法的参数来匹配其父级:</p>
<pre><code>/**
 * Get the first item by the given key value pair.
 *
 * @param  string  $key
 * @param  mixed  $operator
 * @param  mixed  $value
 * @return mixed
 */
public function firstWhere($key, $operator = null, $value = null);</code></pre>
<p><a name="console"></a></p>
<h3>终端</h3>
<h4><code>Kernel</code> 契约</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>terminate</code> 方法 已经添加到 <code>Illuminate/Contracts/Console/Kernel</code> 契约中。如果你实现了这个接口，则应该将这个方法添加到实现类中。</p>
<p><a name="container"></a></p>
<h3>容器</h3>
<p><a name="container-generators"></a></p>
<h4>容器的生成 &amp; 标签服务</h4>
<p><strong>影响可能性：中等</strong></p>
<p>容器的 <code>tagged</code> 方法使用 PHP 生成器通过给定的标记惰性地实例化服务。由于这种改变，<code>tagged</code> 方法返回 <code>iterable</code> 类型，而不是 数组。如果你这个方法使用了类型提示的返回值，则应确保将类型提示也更改为 <code>iterable</code> 类型。</p>
<p>另外，不能再通过数组偏移值直接访问标记服务 ，比如 <code>$container-&gt;tagged('foo')[0]</code>。</p>
<h4><code>resolve</code> 方法</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>resolve</code> 方法 接收一个新布尔参数，该参数指示事件在对象实例化期间是否应触发 / 执行（解析回调）。如果你重写了这个方法，你必须更新方法签名以匹配父方法。</p>
<h4><code>addContextualBinding</code> 方法</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>Illuminate\Contracts\Container\Container</code> 契约增加了 <code>addContextualBinding</code> 方法。如果要实现此接口，则应将此方法加到你的实现中。</p>
<h4><code>tagged</code> 方法</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>tagged</code> 方法现在 改为 返回 <code>iterable</code> 类型而不是 <code>array</code> 类型。如果你的代码参数有类型提示，找到所有 <code>tagged</code> 方法提示 <code>array</code> 类型的地方，将类型提示改为 <code>iterable</code> 类型。</p>
<h4><code>flush</code> 方法</h4>
<p><code>Illuminate\Contracts\Container\Container</code> 契约增加了 <code>flush</code> 方法。如果要实现此接口，则应将此方法加到你的实现中。</p>
<p><a name="database"></a></p>
<h3>数据库</h3>
<h4>未被引号包围的 MySQL JSON 值</h4>
<p><strong>影响可能性：低</strong></p>
<p>在使用 MySQL 和 MariaDB 的时候，Query 构造器返回的 JSON 值将不会使用引号包围。其他数据库将和这里的行为保持一致:</p>
<pre><code>$value = DB::table('users')-&gt;value('options-&gt;language');

dump($value);

// Laravel 5.7...
'"en"'

// Laravel 5.8...
'en'</code></pre>
<p>结果为，不再支持或不再需要 <code>-&gt;&gt;</code> 操作符了。</p>
<p><a name="sqlite"></a></p>
<h4>SQLite</h4>
<p><strong>影响可能性：中等</strong></p>
<p>从 Laravel 5.8 开始， <a href="https://github.com/laravel/framework/pull/25995">最早版本 SQLite 支持</a> 一直到 SQLite 3.7.11。如果你使用的是更早之前的 SQLite 版本，你应该升级 (推荐升级到 SQLite 3.8.8+)。</p>
<h4>迁移 &amp; <code>bigIncrements</code></h4>
<p><strong>影响可能性：无</strong></p>
<p><a href="https://github.com/laravel/framework/pull/26472">从 Laravel 5.8开始</a>, 迁移使用 <code>bigIncrements</code> 做为 ID 字段的默认方法. 以前, ID 字段使用是 <code>increments</code> 方法.</p>
<p>这个改变不会影响到目前的代码; 但是，外键字段的类型要与主键的类型保持一致。一个使用 <code>increments</code> 方法是不能创建一个使用 <code>bigIncrements</code> 方法外键约束的.</p>
<p><a name="eloquent"></a></p>
<h3>Eloquent</h3>
<p><a name="model-names-ending-with-irregular-plurals"></a></p>
<h4>模型命名中的不规则复数结尾</h4>
<p><strong>影响可能性：中等</strong></p>
<p>从 Laravel 5.8 起，含有不规则复数形式结尾的复合名称模型命名 <a href="https://github.com/laravel/framework/pull/26421">现在可以正确的进行复数化</a>.</p>
<pre><code>// Laravel 5.7...
App\Feedback.php -&gt; feedback (correctly pluralized)
App\UserFeedback.php -&gt; user_feedbacks (incorrectly pluralized)

// Laravel 5.8
App\Feedback.php -&gt; feedback (correctly pluralized)
App\UserFeedback.php -&gt; user_feedback (correctly pluralized)</code></pre>
<p>如果你的模型名称没有正确的使用复数名称，你在模型中定义 <code>$table</code> 属性之后还是可以继续使用它的：</p>
<pre><code>/**
 * The table associated with the model.
 *
 * @var string
 */
protected $table = 'user_feedbacks';</code></pre>
<p><a name="custom-pivot-models-with-incrementing-ids"></a></p>
<h4>带有递增 ID 的自定义中继模型</h4>
<p>如果你用一个自定义的中继模型定义了多对多的关系，而且这个中继模型拥有一个自增的主键，你应当确保这个自定义中继模型类中定义了一个 <code>incrementing</code> 属性其值为 <code>true</code>：</p>
<pre><code>/**
 * Indicates if the IDs are auto-incrementing.
 *
 * @var bool
 */
public $incrementing = true;</code></pre>
<h4><code>loadCount</code> 方法</h4>
<p><strong>影响可能性：低</strong></p>
<p>基础类 <code>Illuminate\Database\Eloquent\Model</code> 中添加了 <code>loadCount</code> 方法。如果你的应用中也定义了 <code>loadCount</code> 方法，可能会和 <code>Eloquent</code> 中的相冲突。</p>
<h4><code>originalIsEquivalent</code> 方法</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>Illuminate\Database\Eloquent\Concerns\HasAttributes</code> trait 中的 <code>originalIsEquivalent</code> 成员方法从 protected <a href="https://github.com/laravel/framework/pull/26391">改变为</a> public 。</p>
<h4><code>deleted_at</code> 属性的自动软删除转换</h4>
<p><strong>影响可能性：低</strong></p>
<p>当你的 <code>Eloquent</code> 模型使用了 <code>Illuminate\Database\Eloquent\SoftDeletes</code> trait 时 <code>deleted_at</code> 成员属性 <a href="https://github.com/laravel/framework/pull/26985">现将会自动转换</a> 成为一个 Carbon 实例。你可以重写这个行为，通过为该成员属性编写你的自定义 <code>accessor</code> 或者手动将它添加到 <code>casts</code> 属性中：</p>
<pre><code>protected $casts = ['deleted_at' =&gt; 'string'];</code></pre>
<h4>BelongsTo 的 <code>getForeignKey</code> &amp; <code>getOwnerKey</code> 方法</h4>
<p><strong>影响可能性：低</strong></p>
<p><code>BelongsTo</code> 关联关系中的 <code>getForeignKey</code> 和 <code>getQualifiedForeignKey</code> 方法已分别重命名为 <code>getForeignKeyName</code> 和 <code>getQualifiedForeignKeyName</code>，使得方法名和在 Laravel 提供的其他关联关系中保持一致。</p>
<p><a name="environment-variable-parsing"></a></p>
<h3>环境变量的解析</h3>
<p><strong>影响可能性：高</strong></p>
<p><a href="https://github.com/vlucas/phpdotenv">phpdotenv</a> 包用于 <code>.env</code> 文件解析已经发布了新版，将会影响到 <code>env</code> 全局方法的返回结果. 具体来说, <code>#</code> 未加引号的将被视为注释:</p>
<p>以前的做法</p>
<pre><code>ENV_VALUE=foo#bar

env('ENV_VALUE'); // foo#bar</code></pre>
<p>现在的做法</p>
<pre><code>ENV_VALUE=foo#bar
env('ENV_VALUE'); // foo</code></pre>
<p>对于以前的做法你需要使用引号将其包起来:</p>
<pre><code>ENV_VALUE="foo#bar"

env('ENV_VALUE'); // foo#bar</code></pre>
<p>更多信息, 请点击此链接 <a href="https://github.com/vlucas/phpdotenv/blob/master/UPGRADING.md">phpdotenv 升级说明</a>.</p>
<p><a name="events"></a></p>
<h3>事件</h3>
<h4><code>fire</code> 方法</h4>
<p><strong>影响可能性：低</strong></p>
<p><code>Illuminate/Events/Dispatcher</code> 类中的 <code>fire</code> 方法 （在 Larevel 5.4 中不赞成使用） 已经被 <a href="https://github.com/laravel/framework/pull/26392">移除</a> 了。
你应当使用它的替代方法 <code>dispatch</code> 。</p>
<p><a name="exception-handling"></a></p>
<h3>异常处理器</h3>
<h4><code>ExceptionHandler</code> 契约</h4>
<p><strong>影响可能性：低</strong></p>
<p><code>Illuminate\Contracts\Debug\ExceptionHandler</code> <a href="https://github.com/laravel/framework/pull/26193">契约中新增了</a> <code>shouldReport</code> 方法。 现在当你实现异常处理器的接口时，你需要同时实现此方法。</p>
<h4><code>renderHttpException</code> 方法</h4>
<p><strong>影响可能性：低</strong></p>
<p><code>Illuminate\Foundation\Exceptions\Handler</code> 类中 <code>renderHttpException</code> 方法的签名 <a href="https://github.com/laravel/framework/pull/25975">有改动</a> 。现在如果你在异常处理器中重写此方法，应当修改方法的签名以和其父类保持一致：</p>
<pre><code>/**
 * Render the given HttpException.
 *
 * @param  \Symfony\Component\HttpKernel\Exception\HttpExceptionInterface  $e
 * @return \Symfony\Component\HttpFoundation\Response
 */
protected function renderHttpException(HttpExceptionInterface $e);</code></pre>
<p><a name="mail"></a></p>
<h3>Mail</h3>
<p><a name="markdown-file-directory-change"></a></p>
<h3>Markdown文件目录有改变</h3>
<p><strong>影响可能性：高</strong></p>
<p>如果你使用此命令 <code>vendor:publish</code> 生成邮件的Markdown服务， 你需要将此目录 <code>/resources/views/vendor/mail/markdown</code> 改为 <code>text</code>。</p>
<p>此外, <code>markdownComponentPaths</code> 方法 <a href="https://github.com/laravel/framework/pull/26938">已经重命名</a> 为 <code>textComponentPaths</code>。 如果你重写了此方法则需要更新。</p>
<h4>签名方法已经改动到 <code>PendingMail</code> 类中</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>Illuminate\Mail\PendingMail</code> 类中的 <code>send</code>, <code>sendNow</code>, <code>queue</code>, <code>later</code> 和 <code>fill</code> 方法 <a href="https://github.com/laravel/framework/pull/26790">已被更改</a> 为需接收一个 <code>Illuminate\Contracts\Mail\Mailable</code> 实例作为参数，而不是 <code>Illuminate\Mail\Mailable</code> 实例。如果你要重写其中的方法，你需要更新其形参，和其父类保持一致。</p>
<p><a name="queue"></a></p>
<h3>队列</h3>
<p><a name="pheanstalk-4"></a></p>
<h4>Pheanstalk 4.0</h4>
<p><strong>影响可能性：中</strong></p>
<p>Laravel 5.8 提供了支持 <code>~4.0</code> 发布版本的 Pheanstalk 队列。如果你正在应用中使用 Pheanstalk 库，请通过 Composer 升级你的库到 <code>~4.0</code> 发布版本。</p>
<h4><code>Job</code> 契约</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>isReleased</code>， <code>hasFailed</code> 和 <code>markAsFailed</code> 方法 已被加入到 <code>Illuminate\Contracts\Queue\Job</code> 契约中 。如果你正在实现这个接口，你应该添加这些方法到你的实现代码中。</p>
<h4><code>Job::failed</code> &amp; <code>FailingJob</code> 类</h4>
<p><strong>影响可能性：非常低</strong></p>
<p>在 Laravel 5.7 中，当一个队列任务失败后，队列 worker 将执行 <code>FailingJob::handle</code> 方法。在 Laravel 5.8 中，<code>FailingJob</code> 类中的逻辑已被迁移到了 <code>fail</code> 方法中，该方法就定义在这个任务类中。正因如此， <code>fail</code> 方法被纳入了 <code>Illuminate\Contracts\Queue\Job</code> 契约。</p>
<p><code>Illuminate\Queue\Jobs\Job</code> 基类包含了 <code>fail</code> 的实现，在常规的应用里不需要改任何代码。然而，如果你正在搭建自定义的队列驱动，起了一个任务类，该任务类 没有 继承由 Laravel 提供的任务基类，你应该在你自定义的任务类中手动实现 <code>fail</code> 方法。作为实现的参考，你可以查阅 Laravel 的任务基类。</p>
<p>这个改变允许定制队列驱动，从而在对任务删除过程获得更多的控制。</p>
<h4>Redis Blocking Pop</h4>
<p><strong>影响可能性：非常低</strong></p>
<p>现在使用 Redis 队列驱动的 「blocking pop」特性是安全的。在之前，如果 Redis 服务或者 worker 掉线的同时取出任务，可能造成队列中的任务丢失（小概率事件）。 为了让 blocking pops 变得安全，将给每一个 Laravel 队列创建一个新的带有 <code>:notify</code> 后缀的 Redis list 。</p>
<p><a name="requests"></a></p>
<h3>请求</h3>
<h4><code>TransformsRequest</code> 中间件</h4>
<p><strong>影响可能性：低</strong></p>
<p>现在，当请求输入是一个数组时， <code>Illuminate\Foundation\Http\Middleware\TransformsRequest</code> 中间件的 <code>transform</code> 方法将接收到「全限定」 请求输入的 key ：</p>
<pre><code>'employee' =&gt; [
    'name' =&gt; 'Taylor Otwell',
],

/**
 * Transform the given value.
 *
 * @param  string  $key
 * @param  mixed  $value
 * @return mixed
 */
protected function transform($key, $value)
{
    dump($key); // 'employee.name' (Laravel 5.8)
    dump($key); // 'name' (Laravel 5.7)
}</code></pre>
<p><a name="routing"></a></p>
<h3>路由</h3>
<h4><code>UrlGenerator</code> 契约</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>previous</code> 方法 已经添加到 <code>Illuminate\Contracts\Routing\UrlGenerator</code> contract 中。如果要调用这个接口，你应该将这个方法添加到你的实现中。</p>
<h4>Illuminate/Routing/UrlGenerator 中的 cachedSchema 特性</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>Illuminate/Routing/UrlGenerator</code> 中的 <code>$cachedSchema</code> 属性 (在 Laravel 5.7 中已被弃用) <a href="https://github.com/laravel/framework/pull/26728">已更改为</a> <code>$cachedScheme</code>。</p>
<p><a name="sessions"></a></p>
<h3>Sessions</h3>
<h4><code>StartSession</code> 中间件</h4>
<p><strong>影响可能性：非常低</strong></p>
<p>Session 的持久性逻辑已 从 terminate() 方法移动到 handle() 方法。 如果你要重写其中的方法， 则应该更新它们以反映这些更改。</p>
<p><a name="support"></a></p>
<h3>Support</h3>
<p><a name="string-and-array-helpers"></a></p>
<h4>优先使用字符串和数组类而不是辅助函数</h4>
<p><strong>影响可能性：中等</strong></p>
<p>所有的 <code>array_*</code> and <code>str_*</code> 全局辅助函数 都被废弃。你需要直接使用 <code>Illuminate\Support\Arr</code> 和 <code>Illuminate\Support\Str</code> 提供的方法。</p>
<p>这个调整的影响被标记为中等，因为这些辅助函数被转移到新的 <a href="https://github.com/laravel/helpers">laravel/helpers</a> 扩展包中，以便更好地向后兼容。</p>
<p><a name="deferred-service-providers"></a></p>
<h4>延迟的服务提供者</h4>
<p><strong>影响可能性：中等</strong></p>
<p>服务提供程序的用于指示是否延迟提供程序的 <code>defer</code> 布尔属性已经被废弃。现在如果要将服务提供者标记为延迟的需要通过实现 <code>Illuminate\Contracts\Support\DeferrableProvider</code> 契约来完成。</p>
<h4>只读 <code>env</code> 辅助函数</h4>
<p><strong>影响可能性：低</strong></p>
<p>之前你可以使用 <code>env</code> 辅助函数来动态改变值。但是从 Laravel 5.8开始，将不生效。
可以考虑使用 <code>config</code> 辅助函数来处理。</p>
<p>之前的做法:</p>
<pre><code>dump(env('APP_ENV')); // local

putenv('APP_ENV=staging');

dump(env('APP_ENV')); // staging</code></pre>
<p>现在的做法:</p>
<pre><code>dump(env('APP_ENV')); // local

putenv('APP_ENV=staging');

dump(env('APP_ENV')); // local</code></pre>
<p><a name="testing"></a></p>
<h3>测试</h3>
<h4><code>setUp</code> &amp; <code>tearDown</code> 方法</h4>
<p><code>setUp</code> 和 <code>tearDown</code> 方法现在需要返回一个空类型:</p>
<pre><code>protected function setUp(): void
protected function tearDown(): void</code></pre>
<h4>PHPUnit 8</h4>
<p><strong>影响可能性：可选</strong></p>
<p>默认情况下， Laravel 5.8 使用 PHPUnit 7.。不过， 你可以升级到 PHPUnit 8，但是这需要 PHP &gt;= 7.2。更多细节请阅读 <a href="https://phpunit.de/announcements/phpunit-8.html">PHPUnit 8 版本声明</a>。</p>
<p><a name="validation"></a></p>
<h3>验证</h3>
<h4><code>Validator</code> 契约</h4>
<p><strong>影响可能性：低</strong></p>
<p><code>Illuminate\Contracts\Validation\Validator</code> 中 新增了 <code>validated</code> 方法：</p>
<pre><code>/**
 * Get the attributes and values that were validated.
 *
 * @return array
 */
public function validated();</code></pre>
<p>如果你调用了这个接口，需要添加此方法的实现。</p>
<h4><code>ValidatesAttributes</code> 特性</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>Illuminate\Validation\Concerns\ValidatesAttributes</code> 特性中的 <code>parseTable</code>、 <code>getQueryColumn</code> 和 <code>requireParameterCoun</code>t 方法可见性从 <code>protected</code> 调整为了 <code>public</code>。</p>
<h4><code>DatabasePresenceVerifier</code> 类</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>Illuminate\Validation\DatabasePresenceVerifier</code> 类的 <code>table</code> 方法可见性从 <code>protected</code> 调整为了 <code>public</code>。</p>
<h4><code>Validator</code> 类</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>Illuminate\Validation\Validator</code> 类的 <code>getPresenceVerifierFor</code> 方法可见性从 <code>protected</code> 调整为了 <code>public</code>。</p>
<h4>邮箱验证</h4>
<p><strong>影响可能性：非常低</strong></p>
<p>邮箱验证规则现在回检测邮箱地址是否兼容 <a href="https://tools.ietf.org/html/rfc6530">RFC5630</a>， 使验证逻辑和 SwiftMailer 保持一致。在 Laravel 5.7， email 规则只验证邮箱地址是否兼容 <a href="https://tools.ietf.org/html/rfc822">RFC822</a>。</p>
<p>因此 当使用 Laravel 5.8 时，之前认为无效的邮箱地址现在将被视为有效，如 (e.g hej@bär.se)。 通常，这被看做一个 bug 修复； 不过， 我们还是将其列到这里给你一个提醒。<a href="https://github.com/laravel/framework/pull/26503">如果您遇到有关此更改的任何问题，请通知我们</a>。</p>
<p><a name="view"></a></p>
<h3>视图</h3>
<h4><code>getData</code> 方法</h4>
<p><strong>影响可能性：非常低</strong></p>
<p><code>Illuminate\Contracts\View\View</code> 契约中新增了 <code>getData</code> 方法。如果你调用了这个接口， 则需要添加该方法的实现。</p>
<p><a name="notifications"></a></p>
<h3>通知</h3>
<p><a name="nexmo-slack-notification-channels"></a></p>
<h4>Nexmo / Slack 通知频道</h4>
<p><strong>影响可能性：高</strong></p>
<p>Nexmo 和 Slack 通知频道已经被提前到官方扩展中。要在自己的应用中使用这些频道，需要安装以下扩展包：</p>
<pre><code>composer require laravel/nexmo-notification-channel
composer require laravel/slack-notification-channel</code></pre>
<p><a name="miscellaneous"></a></p>
<h3>其他</h3>
<p>我们还鼓励你查看 <a href="https://github.com/laravel/laravel">laravel/laravel 代码仓库</a>的更新日志。尽管其中的很多更新不是必须的，但是你可以将你的应用中的这些文件与代码仓库保持同步。其中一些更新已经在这篇升级指南中提到了，但是还有很多其他的小更新（如对配置文件或注释的更改）就不会列出。你可以通过 <a href="https://github.com/laravel/laravel/compare/5.7...master">GitHub 比较工具</a> 查看哪些更新对你而言更加重要。</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-xl-2" id="toc-list">
        <ul></ul>
    </div>
</div>    </div>
</div>
<span id="back-top">
<svg width="20" height="20" fill="currentColor">
    <use xlink:href="/css/bootstrap-icons.svg#chevron-up"/>
</svg>
</span>
 
<script>
    // 浏览量统计
    $(function () {
        let formdata = new FormData();
        formdata.append('_token', '');
        formdata.append('id', 217);
        $.ajax({
            url: $(".sticky-top .navbar-brand").attr('href') + "/api/doc/clicks",
            type: 'POST',
            data: formdata,
            processData: false,
            contentType: false
        });
    });
    // aside-hidden
    $(function () {
        $('#aside-hidden').on('click', function () {
            $('.aside').toggle(0, function () {
                if ($(this).is(':visible')) {
                    $('.aside-middle').removeClass('col-md-12 col-lg-12').addClass('col-md-9 col-lg-10');
                } else {
                    $('.aside-middle').removeClass('col-md-9 col-lg-10').addClass('col-md-12 col-lg-12');
                }
            });
        });
    });
</script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?1522d01c436f59ddc8389f25bfa9d53e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>