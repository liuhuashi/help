<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"> 
    <meta name="csrf-token" content=""> 
    <title>新特性 - 开发帮助文档</title> 
    <meta name="keyword" content="migration80.new-features"> 
    <meta name="description" content="migration80.new-features"> 
    <meta name="author" content="Moments"> 
    <link href="/favicon.ico" rel="shortcut icon"> 
    <link href="/css/blog.css" rel="stylesheet"> 
    <script src="/js/blog.js"></script> 
</head>
<body>
<header class="sticky-top">
    <nav class="navbar navbar-expand navbar-dark bg-secondary justify-content-between text-uppercase">
        <div class="navbar-nav" style="overflow:hidden;">
            <a class="navbar-brand" href="https://help.pythonschool.com">
                <span class="d-md-none">
                    <svg class="text-warning" width="24" height="24" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#emoji-sunglasses"/>
                    </svg>
                </span>
                <span class="d-none d-md-flex">开发帮助文档</span>
            </a>
            <div class="navbar-nav-scroll" style="overflow: hidden;">
                <ul class="navbar-nav text-nowrap pb-4" style="overflow:auto;">
                                            <li class="nav-item">
                            <a class="nav-link" href="/docs/laravel/index.html">laravel</a>
                        </li>
                                            <li class="nav-item">
                            <a class="nav-link active" href="/docs/php/index.html">php</a>
                        </li>
                                    </ul>
            </div>
        </div>
        <div class="d-inline-flex">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/liuhuashi">
                        <svg class="text-light" width="24" height="24" fill="currentColor">
                            <use xlink:href="/css/bootstrap-icons.svg#github"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<div class="container-fluid">
    <div id="aside-hidden" class="position-fixed" style="left:0;top: 58px;cursor:pointer;z-index: 10000;">
        <svg class="align-text-bottom text-warning" width="16" height="16" fill="currentColor" stroke="currentColor" stroke-width="1">
            <use xlink:href="/css/bootstrap-icons.svg#arrow-left-square"/>
        </svg>
    </div>
    <div class="row">
        <div class="aside col-md-3 col-lg-2 border-right shadow position-sticky" style="overflow:auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
    <form class="row border-bottom p-3 bg-white sticky-top">
        <input id="search-version" class="form-control" data-version="26" type="search" placeholder="英文逗号分隔,分词搜索">
    </form>
    <ul class="nav navbar-nav nav-pills flex-column pt-2 figure-caption">
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/migration80.deprecated.html" title="PHP 8.0 废弃的功能">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    PHP 8.0 废弃的功能
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/migration80.incompatible.html" title="不向后兼容的变更">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    不向后兼容的变更
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/migration80.new-features.html" title="新特性">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    新特性
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/migration80.other-changes.html" title="其他变更">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    其他变更
                </a>
            </li>
            </ul>
</div>        <div class="aside-middle col-md-9 col-lg-10 row">
    <div class="col-md-9 col-xl-10" style="overflow: auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
        <div class="container main-h4-1">
            <div class="page-content">
                <div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="migration80.html">« 从 PHP 7.4.x 移植到 PHP 8.0.x</a></li>
      <li style="float: right;"><a href="migration80.incompatible.html">不向后兼容的变更 »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="documentation.html">PHP Manual</a></li>
    <li><a href="migration80.html">从 PHP 7.4.x 移植到 PHP 8.0.x</a></li>
    <li>新特性</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="migration80.new-features" class="sect1">
 <h2 class="title">新特性</h2>

 <div class="sect2" id="migration80.new-features.core">
  <h3 class="title">PHP 核心中的新特性</h3>

  <div class="sect3" id="migration80.new-features.core.named-arguments">
   <h4 class="title">命名参数</h4>

   <p class="para">
    
    新增<a href="functions.arguments.html#functions.named-arguments" class="link">命名参数</a>的功能。
   </p>
  </div>

  <div class="sect3" id="migration80.new-features.core.attributes">
   <h4 class="title">注解（Attributes）</h4>

   <p class="para">
    新增<a href="language.attributes.html" class="link">注解</a>的功能。
    
    
    
    
   </p>
  </div>

  <div class="sect3" id="migration80.new-features.core.property-promotion">
   <h4 class="title">构造器属性提升（Constructor Property Promotion）</h4>

   <p class="para">
    新增<a href="language.oop5.decon.html#language.oop5.decon.constructor.promotion" class="link">构造器属性提升</a>功能
    在构造函数中声明类的属性）。
    
   </p>
  </div>

  <div class="sect3" id="migration80.new-features.core.union-types">
   <h4 class="title">联合类型</h4>

   <p class="para">
    新增 <a href="language.types.declarations.html#language.types.declarations.union" class="link">联合类型</a>。
    
   </p> 
  </div>

  <div class="sect3" id="migration80.new-features.core.match">
   <h4 class="title">Match 表达式</h4>

   <p class="para">
    新增 <a href="control-structures.match.html" class="link"><code class="literal">match</code> 表达式</a>。
    
   </p>
  </div>

  <div class="sect3" id="migration80.new-features.core.nullsafe-operator">
   <h4 class="title">Nullsafe 运算符</h4>

   <p class="para">
    新增<a href="language.oop5.basic.html#language.oop5.basic.nullsafe" class="link">Nullsafe 运算符</a>(<code class="literal">?-&gt;</code>)。
    
   </p>
  </div>

  <div class="sect3" id="migration80.new-features.core.others">
   <h4 class="title">其他新特性</h4>

   <ul class="itemizedlist">
    <li class="listitem">
     <p class="para">
      新增 <a href="class.weakmap.html" class="link">WeakMap</a> 类。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      新增 <strong class="classname">ValueError</strong> 类。
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      现在，只要类型兼容，任意数量的函数参数都可以用一个可变参数替换。
      例如允许编写下面的代码：
     </p>
     <p class="para">
      </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">class </span><span style="color: #0000BB">A </span><span style="color: #007700">{<br>     public function </span><span style="color: #0000BB">method</span><span style="color: #007700">(</span><span style="color: #0000BB">int $many</span><span style="color: #007700">, </span><span style="color: #0000BB">string $parameters</span><span style="color: #007700">, </span><span style="color: #0000BB">$here</span><span style="color: #007700">) {}<br>}<br>class </span><span style="color: #0000BB">B </span><span style="color: #007700">extends </span><span style="color: #0000BB">A </span><span style="color: #007700">{<br>     public function </span><span style="color: #0000BB">method</span><span style="color: #007700">(...</span><span style="color: #0000BB">$everything</span><span style="color: #007700">) {}<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     
    </li>
    <li class="listitem">
     <p class="para">
      <span class="type"><span class="type static">static</span></span> ("后期静态绑定"中) 可以作为返回类型：
     </p>
     <p class="para">
      </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">class </span><span style="color: #0000BB">Test </span><span style="color: #007700">{<br>     public function </span><span style="color: #0000BB">create</span><span style="color: #007700">(): static {<br>          return new static();<br>     }<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      
     
    </li>
    <li class="listitem">
     <p class="para">
      现在可以通过 <code class="code">$object::class</code> 获取类名，返回的结果和 <code class="code">get_class($object)</code> 一致。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <a href="language.oop5.basic.html#language.oop5.basic.new" class="link"><code class="literal">new</code></a>、<a href="language.operators.type.html" class="link"><code class="literal">instanceof</code></a> 可用于任何表达式，
      用法为 <code class="code">new (expression)(...$args)</code> 和 <code class="code">$obj instanceof (expression)</code>。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      添加对一些变量语法一致性的修复，例如现在能够编写
      <code class="code">Foo::BAR::$baz</code>。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      添加 <span class="interfacename"><a href="class.stringable.html" class="interfacename">Stringable</a></span> interface，
      当一个类定义 <a href="language.oop5.magic.html#object.tostring" class="link">__toString()</a> 方法后会自动实现该接口。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Trait 可以定义私有抽象方法（abstract private method）。
      类必须实现 trait 定义的该方法。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      可作为表达式使用 <code class="literal">throw</code>。
      使得可以编写以下用法：
      </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$fn </span><span style="color: #007700">= </span><span style="color: #0000BB">fn</span><span style="color: #007700">() =&gt; throw new </span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">'Exception in arrow function'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$user </span><span style="color: #007700">= </span><span style="color: #0000BB">$session</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">user </span><span style="color: #007700">?? throw new </span><span style="color: #0000BB">Exception</span><span style="color: #007700">(</span><span style="color: #DD0000">'Must have user'</span><span style="color: #007700">);</span>
</span>
</code></div>
      </div>

      
     
    </li>
    <li class="listitem">
     <p class="para">
      参数列表中的末尾逗号为可选。
      </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">function </span><span style="color: #0000BB">functionWithLongSignature</span><span style="color: #007700">(<br>    </span><span style="color: #0000BB">Type1 $parameter1</span><span style="color: #007700">,<br>    </span><span style="color: #0000BB">Type2 $parameter2</span><span style="color: #007700">, </span><span style="color: #FF8000">// &lt;-- 这个逗号也被允许了<br></span><span style="color: #007700">) {<br>}</span>
</span>
</code></div>
      </div>

      
     
    </li>
    <li class="listitem">
     <p class="para">
     现在允许 <code class="code">catch (Exception)</code> 一个 exception 而无需捕获到变量中。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      支持 <span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> 类型。
      
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Private methods declared on a parent class no longer enforce any inheritance rules on the methods
      of a child class (with the exception of final private constructors).
      The following example illustrates which restrictions have been removed:
      </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">class </span><span style="color: #0000BB">ParentClass </span><span style="color: #007700">{<br>    private function </span><span style="color: #0000BB">method1</span><span style="color: #007700">() {}<br>    private function </span><span style="color: #0000BB">method2</span><span style="color: #007700">() {}<br>    private static function </span><span style="color: #0000BB">method3</span><span style="color: #007700">() {}<br>    </span><span style="color: #FF8000">// Throws a warning, as "final" no longer has an effect:<br>    </span><span style="color: #007700">private final function </span><span style="color: #0000BB">method4</span><span style="color: #007700">() {}<br>}<br>class </span><span style="color: #0000BB">ChildClass </span><span style="color: #007700">extends </span><span style="color: #0000BB">ParentClass </span><span style="color: #007700">{<br>    </span><span style="color: #FF8000">// All of the following are now allowed, even though the modifiers aren't<br>    // the same as for the private methods in the parent class.<br>    </span><span style="color: #007700">public abstract function </span><span style="color: #0000BB">method1</span><span style="color: #007700">() {}<br>    public static function </span><span style="color: #0000BB">method2</span><span style="color: #007700">() {}<br>    public function </span><span style="color: #0000BB">method3</span><span style="color: #007700">() {}<br>    public function </span><span style="color: #0000BB">method4</span><span style="color: #007700">() {}<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      
     
    </li>
    <li class="listitem">
     <p class="para">
      <span class="function"><a href="function.get-resource-id.html" class="function">get_resource_id()</a></span> has been added, which returns the same value as
      <code class="code">(int) $resource</code>. It provides the same functionality under a clearer API.
     </p>
    </li>
   </ul>
  </div>
 </div>

 <div class="sect2" id="migration80.new-features.date">
  <h3 class="title">Date and Time</h3>
  
  <ul class="itemizedlist">
   <li class="listitem">
    <p class="para">
     <span class="methodname"><a href="datetime.createfrominterface.html" class="methodname">DateTime::createFromInterface()</a></span> and
     <span class="methodname"><a href="datetimeimmutable.createfrominterface.html" class="methodname">DateTimeImmutable::createFromInterface()</a></span> have been added.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The DateTime format specifier <code class="literal">p</code> has been added, which is the same as
     <code class="literal">P</code> but returns <code class="literal">Z</code> rather than <code class="literal">+00:00</code>
     for UTC.
    </p>
   </li>
  </ul>
 </div>

 <div class="sect2" id="migration80.new-features.dom">
  <h3 class="title">DOM</h3>

  <p class="para">
   <span class="interfacename"><strong class="interfacename">DOMParentNode</strong></span> and <span class="interfacename"><strong class="interfacename">DOMChildNode</strong></span> with
   new traversal and manipulation APIs have been added.
   
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.filter">
  <h3 class="title">Filter</h3>

  <p class="para">
   <strong><code>FILTER_VALIDATE_BOOL</code></strong> has been added as an alias for
   <strong><code>FILTER_VALIDATE_BOOLEAN</code></strong>. The new name is preferred, as it uses the canonical
   type name.
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.enchant">
  <h3 class="title">Enchant</h3>

  <p class="para">
   <span class="function"><a href="function.enchant-dict-add.html" class="function">enchant_dict_add()</a></span>, <span class="function"><a href="function.enchant-dict-is-added.html" class="function">enchant_dict_is_added()</a></span>, and
   <strong><code>LIBENCHANT_VERSION</code></strong> have been added.
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.fpm">
  <h3 class="title">FPM</h3>

  <p class="para">
   Added a new option <code class="literal">pm.status_listen</code> that allows getting the status from
   different endpoint (e.g. port or UDS file) which is useful for getting the status when all
   children are busy with serving long running requests.
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.hash">
  <h3 class="title">Hash</h3>

  <p class="para">
   <strong class="classname">HashContext</strong> objects can now be serialized.
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.intl">
  <h3 class="title">Internationalization Functions</h3>

  <p class="para">
   The <strong><code>IntlDateFormatter::RELATIVE_FULL</code></strong>,
   <strong><code>IntlDateFormatter::RELATIVE_LONG</code></strong>,
   <strong><code>IntlDateFormatter::RELATIVE_MEDIUM</code></strong>, and
   <strong><code>IntlDateFormatter::RELATIVE_SHORT</code></strong>
   constants have been added.
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.ldap">
  <h3 class="title">LDAP</h3>

  <p class="para">
   <span class="function"><strong>ldap_count_references()</strong></span> has been added, which returns the number
   of reference messages in a search result.
  </p>
 </div>
 <div class="sect2" id="migration80.new-features.opcache">
  <h3 class="title">OPcache</h3>

  <p class="para">
   If the opcache.record_warnings ini setting is
   enabled, OPcache will record compile-time warnings and replay them on the next include, even if
   it is served from cache.
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.openssl">
  <h3 class="title">OpenSSL</h3>

  <p class="para">
   Added Cryptographic Message Syntax (CMS) (<a href="http://www.faqs.org/rfcs/rfc5652" class="link external">» RFC 5652</a>)
   support composed of functions for encryption, decryption, signing, verifying and reading. The API
   is similar to the API for PKCS #7 functions with an addition of new encoding constants:
   <strong><code>OPENSSL_ENCODING_DER</code></strong>, <strong><code>OPENSSL_ENCODING_SMIME</code></strong>
   and <strong><code>OPENSSL_ENCODING_PEM</code></strong>:
   </p><ul class="simplelist">
    <li class="member">
     <span class="function"><a href="function.openssl-cms-encrypt.html" class="function">openssl_cms_encrypt()</a></span> encrypts the message in the file with the certificates
     and outputs the result to the supplied file.
    </li>
    <li class="member">
     <span class="function"><a href="function.openssl-cms-decrypt.html" class="function">openssl_cms_decrypt()</a></span> that decrypts the S/MIME message in the file and outputs
     the results to the supplied file.
    </li>
    <li class="member">
     <span class="function"><a href="function.openssl-cms-read.html" class="function">openssl_cms_read()</a></span> that exports the CMS file to an array of PEM certificates.
    </li>
    <li class="member">
     <span class="function"><a href="function.openssl-cms-sign.html" class="function">openssl_cms_sign()</a></span> that signs the MIME message in the file with a cert and key
     and output the result to the supplied file.
    </li>
    <li class="member">
     <span class="function"><a href="function.openssl-cms-verify.html" class="function">openssl_cms_verify()</a></span> that verifies that the data block is intact, the signer
     is who they say they are, and returns the certs of the signers.
    </li>
   </ul>
  
 </div>

 <div class="sect2" id="migration80.new-features.pcre">
  <h3 class="title">Regular Expressions (Perl-Compatible)</h3>

  <p class="para">
   <span class="function"><a href="function.preg-last-error-msg.html" class="function">preg_last_error_msg()</a></span> has been added, which returns a human-readable message for the last
   PCRE error. It complements <span class="function"><a href="function.preg-last-error.html" class="function">preg_last_error()</a></span>, which returns an integer enum value
   instead.
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.reflection">
  <h3 class="title">Reflection</h3>

  <ul class="itemizedlist">
   <li class="listitem">
    <p class="para">
     The following methods can now return information about default values of
     parameters of internal functions:
    </p>
    <p class="para">
     </p><ul class="simplelist">
      <li class="member"><span class="methodname"><a href="reflectionparameter.isdefaultvalueavailable.html" class="methodname">ReflectionParameter::isDefaultValueAvailable()</a></span></li>
      <li class="member"><span class="methodname"><a href="reflectionparameter.getdefaultvalue.html" class="methodname">ReflectionParameter::getDefaultValue()</a></span></li>
      <li class="member"><span class="methodname"><a href="reflectionparameter.isdefaultvalueconstant.html" class="methodname">ReflectionParameter::isDefaultValueConstant()</a></span></li>
      <li class="member"><span class="methodname"><a href="reflectionparameter.getdefaultvalueconstantname.html" class="methodname">ReflectionParameter::getDefaultValueConstantName()</a></span></li>
     </ul>
    
   </li>
  </ul>
 </div>

 <div class="sect2" id="migration80.new-features.sqlite3">
  <h3 class="title">SQLite3</h3>

  <p class="para">
   <span class="methodname"><a href="sqlite3.setauthorizer.html" class="methodname">SQLite3::setAuthorizer()</a></span> and respective class constants have been added
   to set a userland callback that will be used to authorize or not an action on the database.
   
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.standard">
  <h3 class="title">Standard Library</h3>

  <ul class="itemizedlist">
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.str-contains.html" class="function">str_contains()</a></span>, <span class="function"><a href="function.str-starts-with.html" class="function">str_starts_with()</a></span> and
     <span class="function"><a href="function.str-ends-with.html" class="function">str_ends_with()</a></span> have been added, which check whether <code class="parameter">haystack</code> contains,
     starts with or ends with <code class="parameter">needle</code>, respectively.
     
     
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.fdiv.html" class="function">fdiv()</a></span> has been added, which performs a floating-point division under IEEE 754 semantics.
     Division by zero is considered well-defined and will return one of <code class="literal">Inf</code>,
     <code class="literal">-Inf</code> or <code class="literal">NaN</code>.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.get-debug-type.html" class="function">get_debug_type()</a></span> has been added, which returns a type useful for error messages. Unlike
     <span class="function"><a href="function.gettype.html" class="function">gettype()</a></span>, it uses canonical type names, returns class names for objects, and
     indicates the resource type for resources.
     
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.printf.html" class="function">printf()</a></span> and friends now support the <code class="literal">%h</code> and
     <code class="literal">%H</code> format specifiers. These are the same as <code class="literal">%g</code> and
     <code class="literal">%G</code>, but always use <code class="literal">"."</code> as the decimal separator, rather
     than determining it through the <strong><code>LC_NUMERIC</code></strong> locale.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.printf.html" class="function">printf()</a></span> and friends now support using <code class="literal">"*"</code> as width or
     precision, in which case the width/precision is passed as an argument to printf. This also allows
     using precision <code class="literal">-1</code> with <code class="literal">%g</code>, <code class="literal">%G</code>,
     <code class="literal">%h</code> and <code class="literal">%H</code>. For example, the following code can be used to
     reproduce PHP's default floating point formatting:
    </p>
    <p class="para">
     </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%.*H"</span><span style="color: #007700">, (int) </span><span style="color: #0000BB">ini_get</span><span style="color: #007700">(</span><span style="color: #DD0000">"precision"</span><span style="color: #007700">), </span><span style="color: #0000BB">$float</span><span style="color: #007700">);<br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%.*H"</span><span style="color: #007700">, (int) </span><span style="color: #0000BB">ini_get</span><span style="color: #007700">(</span><span style="color: #DD0000">"serialize_precision"</span><span style="color: #007700">), </span><span style="color: #0000BB">$float</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.proc-open.html" class="function">proc_open()</a></span> now supports pseudo-terminal (PTY) descriptors. The following
     attaches <code class="literal">stdin</code>, <code class="literal">stdout</code> and <code class="literal">stderr</code> to the
     same PTY:
    </p>
    <p class="para">
     </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$proc </span><span style="color: #007700">= </span><span style="color: #0000BB">proc_open</span><span style="color: #007700">(</span><span style="color: #0000BB">$command</span><span style="color: #007700">, [[</span><span style="color: #DD0000">'pty'</span><span style="color: #007700">], [</span><span style="color: #DD0000">'pty'</span><span style="color: #007700">], [</span><span style="color: #DD0000">'pty'</span><span style="color: #007700">]], </span><span style="color: #0000BB">$pipes</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.proc-open.html" class="function">proc_open()</a></span> now supports socket pair descriptors. The following attaches a
     distinct socket pair to <code class="literal">stdin</code>, <code class="literal">stdout</code> and
     <code class="literal">stderr</code>:
    </p>
    <p class="para">
     </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$proc </span><span style="color: #007700">= </span><span style="color: #0000BB">proc_open</span><span style="color: #007700">(</span><span style="color: #0000BB">$command</span><span style="color: #007700">, [[</span><span style="color: #DD0000">'socket'</span><span style="color: #007700">], [</span><span style="color: #DD0000">'socket'</span><span style="color: #007700">], [</span><span style="color: #DD0000">'socket'</span><span style="color: #007700">]], </span><span style="color: #0000BB">$pipes</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    
    <p class="para">
     Unlike pipes, sockets do not suffer from blocking I/O issues on Windows. However, not all
     programs may work correctly with stdio sockets.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     Sorting functions are now stable, which means that equal-comparing elements will retain their
     original order.
     
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     <span class="function"><a href="function.array-diff.html" class="function">array_diff()</a></span>, <span class="function"><a href="function.array-intersect.html" class="function">array_intersect()</a></span> and their variations can
     now be used with a single array as argument. This means that usages like the following are now
     possible:
    </p>
    <p class="para">
     </p><div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">// OK even if $excludes is empty:<br></span><span style="color: #0000BB">array_diff</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">, ...</span><span style="color: #0000BB">$excludes</span><span style="color: #007700">);<br></span><span style="color: #FF8000">// OK even if $arrays only contains a single array:<br></span><span style="color: #0000BB">array_intersect</span><span style="color: #007700">(...</span><span style="color: #0000BB">$arrays</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    
   </li>
   <li class="listitem">
    <p class="para">
     The <code class="parameter">flag</code> parameter of <span class="function"><a href="function.ob-implicit-flush.html" class="function">ob_implicit_flush()</a></span> was changed
     to accept a <span class="type">bool</span> rather than an <span class="type">int</span>.
    </p>
   </li>
  </ul>
 </div>

 <div class="sect2" id="migration80.new-features.tokenizer">
  <h3 class="title">Tokenizer</h3>

  <p class="para">
   <a href="class.phptoken.html" class="classname">PhpToken</a> adds an object-based interface to the tokenizer. It provides a
   more uniform and ergonomic representation, while being more memory efficient and faster.
   
  </p>
 </div>

 <div class="sect2" id="migration80.new-features.zip">
  <h3 class="title">Zip</h3>

  <ul class="itemizedlist">
   <li class="listitem">
    <p class="para">
     The Zip extension has been updated to version 1.19.1.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     New <span class="methodname"><a href="ziparchive.setmtimename.html" class="methodname">ZipArchive::setMtimeName()</a></span> and
     <span class="methodname"><a href="ziparchive.setmtimeindex.html" class="methodname">ZipArchive::setMtimeIndex()</a></span> to set the modification time of an entry.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     New <span class="methodname"><a href="ziparchive.registerprogresscallback.html" class="methodname">ZipArchive::registerProgressCallback()</a></span> to provide updates during archive close.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     New <span class="methodname"><a href="ziparchive.registercancelcallback.html" class="methodname">ZipArchive::registerCancelCallback()</a></span> to allow cancellation during archive
     close.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     New <span class="methodname"><a href="ziparchive.replacefile.html" class="methodname">ZipArchive::replaceFile()</a></span> to replace an entry content.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     New <span class="methodname"><a href="ziparchive.iscompressionmethoddupported.html" class="methodname">ZipArchive::isCompressionMethodSupported()</a></span> to check optional compression
     features.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     New <span class="methodname"><a href="ziparchive.isencryptionmethoddupported.html" class="methodname">ZipArchive::isEncryptionMethodSupported()</a></span> to check optional encryption
     features.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <var class="varname">ZipArchive::lastId</var> property to get the index value of
     the last added entry has been added.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     Errors can now be checked after an archive has been closed using the
     <var class="varname">ZipArchive::status</var> and
     <var class="varname">ZipArchive::statusSys</var> properties, or the
     <span class="methodname"><a href="ziparchive.getstatusstring.html" class="methodname">ZipArchive::getStatusString()</a></span> method.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     The <code class="literal">'remove_path'</code> option of <span class="methodname"><a href="ziparchive.addglob.html" class="methodname">ZipArchive::addGlob()</a></span> and
     <span class="methodname"><a href="ziparchive.addpattern.html" class="methodname">ZipArchive::addPattern()</a></span> is now treated as an arbitrary string prefix (for
     consistency with the <code class="literal">'add_path'</code> option), whereas formerly it was treated as a
     directory name.
    </p>
   </li>
   <li class="listitem">
    <p class="para">
     Optional compression / encryption features are now listed in phpinfo.
    </p>
   </li>
  </ul>
 </div>

</div></div></div>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-xl-2" id="toc-list">
        <ul></ul>
    </div>
</div>    </div>
</div>
<span id="back-top">
<svg width="20" height="20" fill="currentColor">
    <use xlink:href="/css/bootstrap-icons.svg#chevron-up"/>
</svg>
</span>
 
<script>
    // 浏览量统计
    $(function () {
        let formdata = new FormData();
        formdata.append('_token', '');
        formdata.append('id', 7646);
        $.ajax({
            url: $(".sticky-top .navbar-brand").attr('href') + "/api/doc/clicks",
            type: 'POST',
            data: formdata,
            processData: false,
            contentType: false
        });
    });
    // aside-hidden
    $(function () {
        $('#aside-hidden').on('click', function () {
            $('.aside').toggle(0, function () {
                if ($(this).is(':visible')) {
                    $('.aside-middle').removeClass('col-md-12 col-lg-12').addClass('col-md-9 col-lg-10');
                } else {
                    $('.aside-middle').removeClass('col-md-9 col-lg-10').addClass('col-md-12 col-lg-12');
                }
            });
        });
    });
</script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?1522d01c436f59ddc8389f25bfa9d53e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>