<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"> 
    <meta name="csrf-token" content=""> 
    <title>dba_open - 开发帮助文档</title> 
    <meta name="keyword" content="function.dba-open"> 
    <meta name="description" content="function.dba-open"> 
    <meta name="author" content="Moments"> 
    <link href="/favicon.ico" rel="shortcut icon"> 
    <link href="/css/blog.css" rel="stylesheet"> 
    <script src="/js/blog.js"></script> 
</head>
<body>
<header class="sticky-top">
    <nav class="navbar navbar-expand navbar-dark bg-secondary justify-content-between text-uppercase">
        <div class="navbar-nav" style="overflow:hidden;">
            <a class="navbar-brand" href="https://help.pythonschool.com">
                <span class="d-md-none">
                    <svg class="text-warning" width="24" height="24" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#emoji-sunglasses"/>
                    </svg>
                </span>
                <span class="d-none d-md-flex">开发帮助文档</span>
            </a>
            <div class="navbar-nav-scroll" style="overflow: hidden;">
                <ul class="navbar-nav text-nowrap pb-4" style="overflow:auto;">
                                            <li class="nav-item">
                            <a class="nav-link" href="/docs/laravel/index.html">laravel</a>
                        </li>
                                            <li class="nav-item">
                            <a class="nav-link active" href="/docs/php/index.html">php</a>
                        </li>
                                    </ul>
            </div>
        </div>
        <div class="d-inline-flex">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/liuhuashi">
                        <svg class="text-light" width="24" height="24" fill="currentColor">
                            <use xlink:href="/css/bootstrap-icons.svg#github"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<div class="container-fluid">
    <div id="aside-hidden" class="position-fixed" style="left:0;top: 58px;cursor:pointer;z-index: 10000;">
        <svg class="align-text-bottom text-warning" width="16" height="16" fill="currentColor" stroke="currentColor" stroke-width="1">
            <use xlink:href="/css/bootstrap-icons.svg#arrow-left-square"/>
        </svg>
    </div>
    <div class="row">
        <div class="aside col-md-3 col-lg-2 border-right shadow position-sticky" style="overflow:auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
    <form class="row border-bottom p-3 bg-white sticky-top">
        <input id="search-version" class="form-control" data-version="990" type="search" placeholder="英文逗号分隔,分词搜索">
    </form>
    <ul class="nav navbar-nav nav-pills flex-column pt-2 figure-caption">
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-close.html" title="dba_close">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_close
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-delete.html" title="dba_delete">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_delete
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-exists.html" title="dba_exists">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_exists
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-fetch.html" title="dba_fetch">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_fetch
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-firstkey.html" title="dba_firstkey">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_firstkey
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-handlers.html" title="dba_handlers">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_handlers
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-insert.html" title="dba_insert">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_insert
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-key-split.html" title="dba_key_split">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_key_split
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-list.html" title="dba_list">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_list
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-nextkey.html" title="dba_nextkey">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_nextkey
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-open.html" title="dba_open">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_open
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-optimize.html" title="dba_optimize">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_optimize
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-popen.html" title="dba_popen">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_popen
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-replace.html" title="dba_replace">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_replace
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.dba-sync.html" title="dba_sync">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    dba_sync
                </a>
            </li>
            </ul>
</div>        <div class="aside-middle col-md-9 col-lg-10 row">
    <div class="col-md-9 col-xl-10" style="overflow: auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
        <div class="container main-h4-1">
            <div class="page-content">
                <div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.dba-nextkey.html">« dba_nextkey</a></li>
      <li style="float: right;"><a href="function.dba-optimize.html">dba_optimize »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="documentation.html">PHP Manual</a></li>
    <li><a href="ref.dba.html">DBA 函数</a></li>
    <li>Open database</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.dba-open" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">dba_open</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">dba_open</span> — <span class="dc-title">Open database</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.dba-open-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>dba_open</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$path</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$mode</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$handler</code><span class="initializer"> = ?</span></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">...$args</code></span>
   ) : <span class="type"><span class="type">resource</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>dba_open()</strong></span> establishes a database instance for
   <code class="parameter">path</code> with <code class="parameter">mode</code> using
   <code class="parameter">handler</code>.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.dba-open-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">path</code></dt>

     <dd>

      <p class="para">
       Commonly a regular path in your filesystem.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">mode</code></dt>

     <dd>

      <p class="para">
       It is <code class="literal">r</code> for read access, <code class="literal">w</code> for
       read/write access to an already existing database, <code class="literal">c</code>
       for read/write access and database creation if it doesn't currently exist,
       and <code class="literal">n</code> for create, truncate and read/write access.
       The database is created in BTree mode, other modes (like Hash or Queue)
       are not supported.
      </p>
      <p class="para">
       Additionally you can set the database lock method with the next char. 
       Use <code class="literal">l</code> to lock the database with a <var class="filename">.lck</var>
       file or <code class="literal">d</code> to lock the databasefile itself. It is 
       important that all of your applications do this consistently.
      </p>
      <p class="para">
       If you want to test the access and do not want to wait for the lock 
       you can add <code class="literal">t</code> as third character. When you are 
       absolutely sure that you do not require database locking you can do 
       so by using <code class="literal">-</code> instead of <code class="literal">l</code> or
       <code class="literal">d</code>. When none of <code class="literal">d</code>, 
       <code class="literal">l</code> or <code class="literal">-</code> is used, dba will lock
       on the database file as it would with <code class="literal">d</code>.
      </p>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       </p><p class="para">
        There can only be one writer for one database file. When you use dba on 
        a web server and more than one request requires write operations they can
        only be done one after another. Also read during write is not allowed.
        The dba extension uses locks to prevent this. See the following table:
        </p><table class="doctable table">
         <caption><strong>DBA locking</strong></caption>
         
          <thead>
           <tr>
            <th>already open</th>
            <th><code class="parameter">mode</code> = "rl"</th>
            <th><code class="parameter">mode</code> = "rlt"</th>
            <th><code class="parameter">mode</code> = "wl"</th>
            <th><code class="parameter">mode</code> = "wlt"</th>
            <th><code class="parameter">mode</code> = "rd"</th>
            <th><code class="parameter">mode</code> = "rdt"</th>
            <th><code class="parameter">mode</code> = "wd"</th>
            <th><code class="parameter">mode</code> = "wdt"</th>
           </tr>

          </thead>

          <tbody class="tbody">
           <tr>
            <td>not open</td>
            <td>ok</td>
            <td>ok</td>
            <td>ok</td>
            <td>ok</td>
            <td>ok</td>
            <td>ok</td>
            <td>ok</td>
            <td>ok</td>
           </tr>

           <tr>
            <td><code class="parameter">mode</code> = "rl"</td>
            <td>ok</td>
            <td>ok</td>
            <td>wait</td>
            <td>false</td>
            <td>illegal</td>
            <td>illegal</td>
            <td>illegal</td>
            <td>illegal</td>
           </tr>

           <tr>
            <td><code class="parameter">mode</code> = "wl"</td>
            <td>wait</td>
            <td>false</td>
            <td>wait</td>
            <td>false</td>
            <td>illegal</td>
            <td>illegal</td>
            <td>illegal</td>
            <td>illegal</td>
           </tr>

           <tr>
            <td><code class="parameter">mode</code> = "rd"</td>
            <td>illegal</td>
            <td>illegal</td>
            <td>illegal</td>
            <td>illegal</td>
            <td>ok</td>
            <td>ok</td>
            <td>wait</td>
            <td>false</td>
           </tr>

           <tr>
            <td><code class="parameter">mode</code> = "wd"</td>
            <td>illegal</td>
            <td>illegal</td>
            <td>illegal</td>
            <td>illegal</td>
            <td>wait</td>
            <td>false</td>
            <td>wait</td>
            <td>false</td>
           </tr>

          </tbody>
         
        </table>

        <ul class="simplelist">
         <li class="member">ok: the second call will be successfull.</li>
         <li class="member">wait: the second call waits until <span class="function"><a href="function.dba-close.html" class="function">dba_close()</a></span> is called for the first.</li>
         <li class="member">false: the second call returns false.</li>
         <li class="member">illegal: you must not mix <code class="literal">"l"</code> and <code class="literal">"d"</code> modifiers for <code class="parameter">mode</code> parameter.</li>
        </ul>
       
      </blockquote>
     </dd>

    
    
     <dt>
<code class="parameter">handler</code></dt>

     <dd>

      <p class="para">
       The name of the <a href="dba.requirements.html" class="link">handler</a> which
       shall be used for accessing <code class="parameter">path</code>. It is passed 
       all optional parameters given to <span class="function"><strong>dba_open()</strong></span> and 
       can act on behalf of them.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">args</code></dt>

     <dd>

      <p class="para">
       Optional <span class="type">string</span> parameters which are passed to the driver.
      </p>
      <p class="para">
       The <code class="literal">cdb</code>, <code class="literal">cdb_make</code>, <code class="literal">flatfile</code>,
       <code class="literal">inifile</code>, <code class="literal">qdbm</code> and <code class="literal">tcadb</code> drivers
       do not support additional parameters.
      </p>
      <p class="para">
       The <code class="literal">db1</code>, <code class="literal">db2</code>, <code class="literal">db3</code>,
       <code class="literal">db4</code>, <code class="literal">dbm</code>, <code class="literal">gdbm</code>,
       and <code class="literal">ndbm</code> drivers supports a single additional parameter <code class="literal">$filemode</code>,
       which has the same meaning as the <code class="literal">$mode</code> parameter of <span class="function"><a href="function.chmod.html" class="function">chmod()</a></span>,
       and defaults to <code class="literal">0644</code>.
      </p>
      <p class="para">
       The <code class="literal">lmdb</code> driver accepts two additional parameters. The first
       allows to specify the <code class="literal">$filemode</code> (see description above), and the
       second to specify the <code class="literal">$mapsize</code>, where the value should be a multiple
       of the page size of the OS, or zero, to use the default mapsize. The <code class="literal">$mapsize</code>
       parameter is supported as of PHP 7.3.14 and 7.4.2, respectively.
      </p>
     </dd>

    
   </dl>

  
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.dba-open-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns a positive handle on success 或者在失败时返回 <strong><code>false</code></strong>.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.dba-open-changelog">
  <h3 class="title">更新日志</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>版本</th>
      <th>说明</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>7.3.14, 7.4.2</td>
      <td>
       The <code class="literal">lmdb</code> driver now supports an additional <code class="literal">$mapsize</code>
       parameter.
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 seealso" id="refsect1-function.dba-open-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.dba-popen.html" class="function" rel="rdfs-seeAlso">dba_popen()</a> - Open database persistently</span></li>
    <li class="member"><span class="function"><a href="function.dba-close.html" class="function" rel="rdfs-seeAlso">dba_close()</a> - Close a DBA database</span></li>
   </ul>
  
 </div>

</div></div></div>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-xl-2" id="toc-list">
        <ul></ul>
    </div>
</div>    </div>
</div>
<span id="back-top">
<svg width="20" height="20" fill="currentColor">
    <use xlink:href="/css/bootstrap-icons.svg#chevron-up"/>
</svg>
</span>
 
<script>
    // 浏览量统计
    $(function () {
        let formdata = new FormData();
        formdata.append('_token', '');
        formdata.append('id', 2828);
        $.ajax({
            url: $(".sticky-top .navbar-brand").attr('href') + "/api/doc/clicks",
            type: 'POST',
            data: formdata,
            processData: false,
            contentType: false
        });
    });
    // aside-hidden
    $(function () {
        $('#aside-hidden').on('click', function () {
            $('.aside').toggle(0, function () {
                if ($(this).is(':visible')) {
                    $('.aside-middle').removeClass('col-md-12 col-lg-12').addClass('col-md-9 col-lg-10');
                } else {
                    $('.aside-middle').removeClass('col-md-9 col-lg-10').addClass('col-md-12 col-lg-12');
                }
            });
        });
    });
</script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?1522d01c436f59ddc8389f25bfa9d53e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>