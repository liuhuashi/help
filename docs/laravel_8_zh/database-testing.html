<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"> 
    <meta name="csrf-token" content=""> 
    <title>数据库测试 - 开发帮助文档</title> 
    <meta name="keyword" content="database-testing"> 
    <meta name="description" content="database-testing"> 
    <meta name="author" content="Moments"> 
    <link href="/favicon.ico" rel="shortcut icon"> 
    <link href="/css/blog.css" rel="stylesheet"> 
    <script src="/js/blog.js"></script> 
</head>
<body>
<header class="sticky-top">
    <nav class="navbar navbar-expand navbar-dark bg-secondary justify-content-between text-uppercase">
        <div class="navbar-nav" style="overflow:hidden;">
            <a class="navbar-brand" href="https://help.pythonschool.com">
                <span class="d-md-none">
                    <svg class="text-warning" width="24" height="24" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#emoji-sunglasses"/>
                    </svg>
                </span>
                <span class="d-none d-md-flex">开发帮助文档</span>
            </a>
            <div class="navbar-nav-scroll" style="overflow: hidden;">
                <ul class="navbar-nav text-nowrap pb-4" style="overflow:auto;">
                                            <li class="nav-item">
                            <a class="nav-link active" href="/docs/laravel/index.html">laravel</a>
                        </li>
                                            <li class="nav-item">
                            <a class="nav-link" href="/docs/php/index.html">php</a>
                        </li>
                                    </ul>
            </div>
        </div>
        <div class="d-inline-flex">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/liuhuashi">
                        <svg class="text-light" width="24" height="24" fill="currentColor">
                            <use xlink:href="/css/bootstrap-icons.svg#github"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<div class="container-fluid">
    <div id="aside-hidden" class="position-fixed" style="left:0;top: 58px;cursor:pointer;z-index: 10000;">
        <svg class="align-text-bottom text-warning" width="16" height="16" fill="currentColor" stroke="currentColor" stroke-width="1">
            <use xlink:href="/css/bootstrap-icons.svg#arrow-left-square"/>
        </svg>
    </div>
    <div class="row">
        <div class="aside col-md-3 col-lg-2 border-right shadow position-sticky" style="overflow:auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
    <form class="row border-bottom p-3 bg-white sticky-top">
        <input id="search-version" class="form-control" data-version="7" type="search" placeholder="英文逗号分隔,分词搜索">
    </form>
    <ul class="nav navbar-nav nav-pills flex-column pt-2 figure-caption">
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/artisan.html" title="Artisan 命令行">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Artisan 命令行
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/authentication.html" title="用户认证">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    用户认证
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/authorization.html" title="用户授权">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    用户授权
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/blade.html" title="Blade 模板">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Blade 模板
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/broadcasting.html" title="广播系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    广播系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/cache.html" title="缓存系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    缓存系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/collections.html" title="集合">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    集合
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/configuration.html" title="Configuration">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Configuration
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/console-tests.html" title="控制台测试">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    控制台测试
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/container.html" title="服务容器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    服务容器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/contracts.html" title="契约">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    契约
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/contributions.html" title="贡献导引">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    贡献导引
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/controllers.html" title="Controllers">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Controllers
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/csrf.html" title="CSRF 保护">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    CSRF 保护
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/database-testing.html" title="数据库测试">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库测试
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/database.html" title="数据库: 入门">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库: 入门
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/deployment.html" title="部署">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    部署
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/documentation.html" title="前言">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    前言
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/dusk.html" title="Laravel Dusk">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Dusk
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-collections.html" title="Eloquent: 集合">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 集合
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-mutators.html" title="Eloquent: 修改器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 修改器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-relationships.html" title="Eloquent: 关联">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 关联
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-resources.html" title="Eloquent: API 资源">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: API 资源
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-serialization.html" title="Eloquent: 序列化">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 序列化
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent.html" title="Eloquent: 入门">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 入门
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/encryption.html" title="加密解密">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    加密解密
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/envoy.html" title="Laravel Envoy">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Envoy
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/errors.html" title="错误处理">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    错误处理
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/events.html" title="事件系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    事件系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/facades.html" title="Facades">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Facades
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/filesystem.html" title="File Storage">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    File Storage
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/frontend.html" title="JavaScript &amp; CSS 脚手架">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    JavaScript &amp; CSS 脚手架
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/hashing.html" title="哈希加密">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    哈希加密
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/helpers.html" title="辅助函数">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    辅助函数
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/homestead.html" title="Laravel Homestead">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Homestead
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/horizon.html" title="Laravel Horizon">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Horizon
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/http-client.html" title="HTTP 客户端">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP 客户端
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/http-tests.html" title="HTTP Tests">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP Tests
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/installation.html" title="安装">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    安装
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/lifecycle.html" title="请求生命周期">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    请求生命周期
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/localization.html" title="本地化">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    本地化
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/logging.html" title="日志">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    日志
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/mail.html" title="邮件发送">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    邮件发送
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/middleware.html" title="中间件">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    中间件
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/migrations.html" title="数据库：迁移">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库：迁移
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/mix.html" title="编辑资源 (Mix)">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    编辑资源 (Mix)
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/mocking.html" title="Mocking">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Mocking
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/notifications.html" title="消息通知">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    消息通知
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/packages.html" title="Package Development">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Package Development
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/pagination.html" title="数据库: 分页">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库: 分页
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/passport.html" title="Laravel Passport">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Passport
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/passwords.html" title="重置密码">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    重置密码
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/providers.html" title="服务提供者">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    服务提供者
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/queries.html" title="数据库：查询构造器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库：查询构造器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/queues.html" title="队列">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    队列
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/redis.html" title="Redis">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Redis
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/releases.html" title="发行说明">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    发行说明
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/requests.html" title="HTTP 请求">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP 请求
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/responses.html" title="HTTP Responses">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP Responses
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/routing.html" title="路由">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    路由
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/sail.html" title="Laravel Sail">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Sail
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/sanctum.html" title="Laravel Sanctum">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Sanctum
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/scheduling.html" title="任务调度">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    任务调度
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/scout.html" title="Laravel Scout">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Scout
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/seeding.html" title="数据库：填充">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库：填充
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/session.html" title="HTTP 会话机制">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP 会话机制
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/socialite.html" title="Laravel 社会化登录">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 社会化登录
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/structure.html" title="目录结构">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    目录结构
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/telescope.html" title="Laravel Telescope">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Telescope
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/testing.html" title="测试：入门指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    测试：入门指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/upgrade.html" title="升级指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    升级指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/urls.html" title="生成 URL">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    生成 URL
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/valet.html" title="Laravel Valet">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Valet
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/validation.html" title="表单验证">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    表单验证
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/verification.html" title="Email 认证">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Email 认证
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/views.html" title="视图">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    视图
                </a>
            </li>
            </ul>
</div>        <div class="aside-middle col-md-9 col-lg-10 row">
    <div class="col-md-9 col-xl-10" style="overflow: auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
        <div class="container main-h4-1">
            <div class="page-content">
                <h1>数据库测试</h1>
<ul>
<li><a href="#introduction">简介</a></li>
<li><a href="#resetting-the-database-after-each-test">每次测试后重置数据库</a></li>
<li><a href="#creating-factories">创建工厂</a></li>
<li><a href="#writing-factories">写工厂</a>
<ul>
<li><a href="#factory-states">工厂状态</a></li>
<li><a href="#factory-callbacks">工厂回调</a></li>
</ul></li>
<li><a href="#using-factories">使用工厂</a>
<ul>
<li><a href="#creating-models">创建模型</a></li>
<li><a href="#persisting-models">持久化模型</a></li>
<li><a href="#sequences">序列</a></li>
</ul></li>
<li><a href="#factory-relationships">工厂关系</a>
<ul>
<li><a href="#relationships-within-definition">定义内的关系</a></li>
<li><a href="#has-many-relationships">has many 关系</a></li>
<li><a href="#belongs-to-relationships">从属关系</a></li>
<li><a href="#many-to-many-relationships">多对多关系</a></li>
<li><a href="#polymorphic-relationships">多态关系</a></li>
</ul></li>
<li><a href="#using-seeds">使用种子</a></li>
<li><a href="#available-assertions">可用断言</a></li>
</ul>
<p><a name="introduction"></a></p>
<h2>简介</h2>
<p>Laravel 提供了各种有用的工具，可以更轻松地测试数据库驱动的应用程序。首先，您可以使用 <code>assertDatabaseHas</code> 辅助器来断言数据库中存在符合给定条件的数据。例如，如果您想验证 <code>users</code> 表中是否有一条记录，其<code>email</code> 值为 <code>sally@example.com</code>，则可以执行以下操作：</p>
<pre><code>    public function testDatabase()
    {
        // Make call to application...

        $this-&gt;assertDatabaseHas('users', [
            'email' =&gt; 'sally@example.com',
        ]);
    }</code></pre>
<p>您也可以使用 <code>assertDatabaseMissing</code> 辅助器来断言数据库中不存在数据。</p>
<p><code>assertDatabaseHas</code> 方法和其他类似的辅助器是为了方便起见。您可以自由使用 PHPUnit 的任何内置断言方法来补充功能测试。</p>
<p><a name="resetting-the-database-after-each-test"></a></p>
<h2>每次测试后重置数据库</h2>
<p>在每次测试后重置数据库通常很有用，这样前一次测试中的数据就不会干扰后续测试。 <code>RefreshDatabase</code> trait 采用最佳方法来迁移测试数据库，具体取决于您使用的是内存数据库还是传统数据库。使用测试类中的 trait，将为您处理所有事情：</p>
<pre><code>    &lt;?php

    namespace Tests\Feature;

    use Illuminate\Foundation\Testing\RefreshDatabase;
    use Illuminate\Foundation\Testing\WithoutMiddleware;
    use Tests\TestCase;

    class ExampleTest extends TestCase
    {
        use RefreshDatabase;

        /**
         * A basic functional test example.
         *
         * @return void
         */
        public function testBasicExample()
        {
            $response = $this-&gt;get('/');

            // ...
        }
    }</code></pre>
<p><a name="creating-factories"></a></p>
<h2>创建工厂</h2>
<p>在测试时，您可能需要在执行测试之前向数据库中插入一些记录。 Laravel允许您使用模型工厂为每个 <a href="/docs/laravel_8_zh/eloquent.html">Eloquent模型</a> 定义默认属性集，而无需在创建此测试数据时手动指定每列的值。</p>
<p>要创建工厂，请使用 <code>make:factory</code> <a href="/docs/laravel_8_zh/artisan.html">Artisan命令</a>：</p>
<pre><code>php artisan make:factory PostFactory</code></pre>
<p>新工厂将放置在您的 <code>database/factories</code> 目录中。</p>
<p><code>--model</code> 选项可用于指示工厂创建的模型的名称。 此选项将使用给定的模型预先填充生成的工厂文件：</p>
<pre><code>php artisan make:factory PostFactory --model=Post</code></pre>
<p><a name="writing-factories"></a></p>
<h2>写工厂</h2>
<p>首先，请查看应用程序中的 <code>database/factories/UserFactory.php</code> 文件。 开箱即用，此文件包含以下工厂定义：</p>
<pre><code>    namespace Database\Factories;

    use App\Models\User;
    use Illuminate\Database\Eloquent\Factories\Factory;
    use Illuminate\Support\Str;

    class UserFactory extends Factory
    {
        /**
         * The name of the factory's corresponding model.
         *
         * @var string
         */
        protected $model = User::class;

        /**
         * Define the model's default state.
         *
         * @return array
         */
        public function definition()
        {
            return [
                'name' =&gt; $this-&gt;faker-&gt;name,
                'email' =&gt; $this-&gt;faker-&gt;unique()-&gt;safeEmail,
                'email_verified_at' =&gt; now(),
                'password' =&gt; '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', // password
                'remember_token' =&gt; Str::random(10),
            ];
        }
    }</code></pre>
<p>如您所见，工厂是最基本的形式，它们是扩展 Laravel 基本工厂类并定义<code>model</code> 属性和 <code>definition</code> 方法的类。<code>definition</code> 方法返回使用工厂创建模型时应用的默认属性值集。</p>
<p>通过 <code>faker</code> 属性， 工厂可以访问 <a href="https://github.com/fzaninotto/Faker">Faker</a> PHP 函数库， 它允许你便捷的生成各种随机数据来进行测试。</p>
<blockquote>
<p>技巧：你也可以在 <code>config/app.php</code> 配置文件中添加 <code>faker_locale</code> 选项来设置 Faker 的语言环境。</p>
</blockquote>
<p><a name="factory-states"></a></p>
<h3>工厂状态</h3>
<p>工厂状态可以让你任意组合你的模型工厂，仅需要做出适当差异化的修改，就可以达到让模型拥有多种不同的状态。例如， 你的 <code>User</code> 模型中可以修改某个默认属性值来达到标识一种 <code>suspended</code> 状态。你可以使用 <code>state</code> 方法来进行这种状态转换。您可以根据自己的喜好命名状态方法。 毕竟，这只是一个典型的PHP方法：</p>
<pre><code>/**
 * 标识用户 「 已暂停 」 状态。
 *
 * @return \Illuminate\Database\Eloquent\Factories\Factory
 */
public function suspended()
{
    return $this-&gt;state([
        'account_status' =&gt; 'suspended',
    ]);
}</code></pre>
<p>如果状态转换需要访问工厂定义的其他属性，则可以将回调传递给 <code>state</code> 方法。 回调将收到为工厂定义的原始属性数组：</p>
<pre><code>/**
 * 标识用户 「 已暂停 」 状态。
 *
 * @return \Illuminate\Database\Eloquent\Factories\Factory
 */
public function suspended()
{
    return $this-&gt;state(function (array $attributes) {
        return [
            'account_status' =&gt; 'suspended',
        ];
    });
}</code></pre>
<p><a name="factory-callbacks"></a></p>
<h3>工厂回调</h3>
<p>工厂回调是使用 <code>afterMaking</code> 和 <code>afterCreating</code> 方法注册的，并且允许你在创建模型之后执行其他任务。 您应该通过在工厂类上定义 <code>configure</code> 方法来注册这些回调。 实例化工厂后，Laravel将自动调用此方法：</p>
<pre><code>namespace Database\Factories;

use App\Models\User;
use Illuminate\Database\Eloquent\Factories\Factory;
use Illuminate\Support\Str;

class UserFactory extends Factory
{
    /**
     * 工厂所对应model的名称。
     *
     * @var string
     */
    protected $model = User::class;

    /**
     * 配置模型工厂。
     *
     * @return $this
     */
    public function configure()
    {
        return $this-&gt;afterMaking(function (User $user) {
            //
        })-&gt;afterCreating(function (User $user) {
            //
        });
    }

    // ...
}</code></pre>
<p><a name="using-factories"></a></p>
<h2>使用模型工厂</h2>
<p><a name="creating-models"></a></p>
<h3>创建模型</h3>
<p>模型工厂定义后，就可以在Eloquent模型上使用 <code>Illuminate \ Database \ Eloquent \ Factories \ HasFactory</code> 特性提供的静态 <code>factory</code> 方法来实例化该模型的工厂实例：</p>
<pre><code>namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class User extends Model
{
    use HasFactory;
}</code></pre>
<p>让我们看一些创建模型的例子。首先，我们将使用 <code>make</code> 方法创建模型但不将他们保存至数据库中：</p>
<pre><code>use App\Models\User;

public function testDatabase()
{
    $user = User::factory()-&gt;make();

    // Use model in tests...
}</code></pre>
<p>你也可以使用 <code>count</code> 方法创建一个含有多个模型的集合：</p>
<pre><code>// Create three App\Models\User instances...
$users = User::factory()-&gt;count(3)-&gt;make();</code></pre>
<p><code>HasFactory</code> 特征的 <code>factory</code> 方法将使用默认的约定来确定模型的正确工厂。 具体来说，该方法将在<code>Database \ Factories</code> 命名空间中寻找一个工厂，该工厂的类名与模型名称匹配，并且后缀为<code>Factory</code> 。 如果这些约定不适用于您的特定应用程序或工厂，则可以直接使用工厂来创建模型实例。 要使用factory类创建一个新的工厂实例，应在工厂上调用静态的 <code>new</code> 方法：</p>
<pre><code>use Database\Factories\UserFactory;

$users = UserFactory::new()-&gt;count(3)-&gt;make();</code></pre>
<h4>应用状态</h4>
<p>你也可将任何 <a href="#factory-states">状态</a> 应用于模型。如果您想对模型应用多个状态转换，则可以直接调用状态方法：</p>
<pre><code>$users = User::factory()-&gt;count(5)-&gt;suspended()-&gt;make();</code></pre>
<h4>Overriding Attributes</h4>
<p>如果您想覆盖模型的一些默认值，可以将一个值数组传递给 <code>make</code> 方法。只有指定的值将被替换，而其余的值仍设置为工厂指定的默认值：</p>
<pre><code>$user = User::factory()-&gt;make([
    'name' =&gt; 'Abigail Otwell',
]);</code></pre>
<p>另外，可以在工厂实例上直接调用 <code>state</code> 方法来执行内联状态转换：</p>
<pre><code>    $user = User::factory()-&gt;state([
        'name' =&gt; 'Abigail Otwell',
    ])-&gt;make();</code></pre>
<blockquote>
<p>技巧：<a href="/docs/laravel_8_zh/eloquent.html#mass-assignment">批量分配保护</a>  在使用工厂创建模型时，是自动禁用的。
<a name="persisting-models"></a></p>
<h3>持久化模型</h3>
</blockquote>
<p><code>create</code> 方法创建模型实例，并使用 Eloquent 的 <code>save</code> 方法将其持久化到数据库中：</p>
<pre><code>    use App\Models\User;

    public function testDatabase()
    {
        // Create a single App\Models\User instance...
        $user = User::factory()-&gt;create();

        // Create three App\Models\User instances...
        $users = User::factory()-&gt;count(3)-&gt;create();

        // Use model in tests...
    }</code></pre>
<p>您可以通过将属性数组传递给 <code>create</code> 方法来覆盖模型上的属性：</p>
<pre><code>    $user = User::factory()-&gt;create([
        'name' =&gt; 'Abigail',
    ]);</code></pre>
<p><a name="sequences"></a></p>
<h3>序列</h3>
<p>有时，您可能希望为每个创建的模型替换给定模型属性的值。 您可以通过将状态转换定义为 <code>Sequence</code> 实例来完成此操作。 例如，我们可能希望为每个创建的用户在 <code>User</code> 模型上的 <code>admin</code> 列的值在 <code>Y</code> 和 <code>N</code> 之间切换：</p>
<pre><code>    use App\Models\User;
    use Illuminate\Database\Eloquent\Factories\Sequence;

    $users = User::factory()
                    -&gt;count(10)
                    -&gt;state(new Sequence(
                        ['admin' =&gt; 'Y'],
                        ['admin' =&gt; 'N'],
                    ))
                    -&gt;create();</code></pre>
<p>在本例中，将创建 5 个用户，<code>admin</code> 值为 <code>Y</code>，创建另外 5 个用户，<code>admin</code> 值为 <code>N</code>。</p>
<p><a name="factory-relationships"></a></p>
<h2>工厂关系</h2>
<p><a name="relationships-within-definition"></a></p>
<h3>定义内的关系</h3>
<p>您可以将关系附加到工厂定义中的模型。例如，如果您想在创建 <code>Post</code> 时创建一个新的 <code>User</code> 实例，您可以这样做：</p>
<pre><code>    use App\Models\User;

    /**
     * Define the model's default state.
     *
     * @return array
     */
    public function definition()
    {
        return [
            'user_id' =&gt; User::factory(),
            'title' =&gt; $this-&gt;faker-&gt;title,
            'content' =&gt; $this-&gt;faker-&gt;paragraph,
        ];
    }</code></pre>
<p>如果关系的列取决于定义它的工厂，您可以提供一个接受求值属性数组的回调：</p>
<pre><code>    /**
     * Define the model's default state.
     *
     * @return array
     */
    public function definition()
    {
        return [
            'user_id' =&gt; User::factory(),
            'user_type' =&gt; function (array $attributes) {
                return User::find($attributes['user_id'])-&gt;type;
            },
            'title' =&gt; $this-&gt;faker-&gt;title,
            'content' =&gt; $this-&gt;faker-&gt;paragraph,
        ];
    }</code></pre>
<p><a name="has-many-relationships"></a></p>
<h3>多种关系</h3>
<p>接下来，让我们探索使用 Laravel 的流畅工厂方法建立 Eloquent 模型关系。 首先，假设我们的应用程序具有 <code>User</code> 模型和 <code>Post</code> 模型。 同样，假设 <code>User</code> 模型定义了与 <code>Post</code> 的 <code>hasMany</code> 关系。 我们可以使用工厂提供的 <code>has</code> 方法创建一个拥有三个帖子的用户。 <code>has</code> 方法接受工厂实例：</p>
<pre><code>    use App\Models\Post;
    use App\Models\User;

    $users = User::factory()
                -&gt;has(Post::factory()-&gt;count(3))
                -&gt;create();</code></pre>
<p>按照惯例，在将 <code>Post</code> 模型传递给 <code>has</code> 方法时，Laravel 会假设 <code>User</code> 模型必须有一个定义关系的 <code>posts</code> 方法。如有必要，您可以明确指定要操作的关系的名称：</p>
<pre><code>    $users = User::factory()
                -&gt;has(Post::factory()-&gt;count(3), 'posts')
                -&gt;create();</code></pre>
<p>当然，您可以对相关模型执行状态操作。此外，如果状态更改需要访问父模型，则可以传递基于闭包的状态转换：</p>
<pre><code>    $users = User::factory()
                -&gt;has(
                    Post::factory()
                            -&gt;count(3)
                            -&gt;state(function (array $attributes, User $user) {
                                return ['user_type' =&gt; $user-&gt;type];
                            })
                )
                -&gt;create();</code></pre>
<h4>使用魔术方法</h4>
<p>为了方便起见，您可以使用工厂的魔术关系方法来定义关系。 例如，以下示例将使用约定来确定应通过 <code>User</code> 模型上的 <code>posts</code>  关系方法创建相关模型：</p>
<pre><code>    $users = User::factory()
                -&gt;hasPosts(3)
                -&gt;create();</code></pre>
<p>在使用魔术方法创建工厂关系时，您可以传递要在相关模型上覆盖的属性数组：</p>
<pre><code>    $users = User::factory()
                -&gt;hasPosts(3, [
                    'published' =&gt; false,
                ])
                -&gt;create();</code></pre>
<p>如果状态更改需要访问父模型，则可以提供基于闭包的状态转换：</p>
<pre><code>    $users = User::factory()
                -&gt;hasPosts(3, function (array $attributes, User $user) {
                    return ['user_type' =&gt; $user-&gt;type];
                })
                -&gt;create();</code></pre>
<p><a name="belongs-to-relationships"></a></p>
<h3>从属关系</h3>
<p>既然我们已经探索了如何使用工厂构建「has many」关系，那么让我们来看看该关系的反面。<code>for</code> 方法可用于定义出厂创建的模型所属的模型。例如，我们可以创建三个属于单个用户的 <code>Post</code> 模型实例：</p>
<pre><code>    use App\Models\Post;
    use App\Models\User;

    $posts = Post::factory()
                -&gt;count(3)
                -&gt;for(User::factory()-&gt;state([
                    'name' =&gt; 'Jessica Archer',
                ]))
                -&gt;create();</code></pre>
<h4>使用魔术方法</h4>
<p>为方便起见，您可以使用工厂的魔术关系方法来定义「属于」关系。例如，下面的示例将使用约定来确定这三个帖子应该属于 <code>Post</code> 模型上的 <code>user</code> 关系：</p>
<pre><code>    $posts = Post::factory()
                -&gt;count(3)
                -&gt;forUser([
                    'name' =&gt; 'Jessica Archer',
                ])
                -&gt;create();</code></pre>
<p><a name="many-to-many-relationships"></a></p>
<h3>多对多关系</h3>
<p>像 [has many 关系] 一样，可以使用 <code>has</code> 方法创建「多对多」关系：</p>
<pre><code>    use App\Models\Role;
    use App\Models\User;

    $users = User::factory()
                -&gt;has(Role::factory()-&gt;count(3))
                -&gt;create();</code></pre>
<h4>Pivot (中转) 表属性</h4>
<p>如果需要定义应该在链接模型的中转表/中间表上设置的属性，可以使用「hasAttached」方法。此方法接受中转表属性名称和值的数组作为其第二个参数：</p>
<pre><code>    use App\Models\Role;
    use App\Models\User;

    $users = User::factory()
                -&gt;hasAttached(
                    Role::factory()-&gt;count(3),
                    ['active' =&gt; true]
                )
                -&gt;create();</code></pre>
<p>如果您的状态更改需要访问相关模型，则可以提供基于闭包的状态转换：</p>
<pre><code>    $users = User::factory()
                -&gt;hasAttached(
                    Role::factory()
                        -&gt;count(3)
                        -&gt;state(function (array $attributes, User $user) {
                            return ['name' =&gt; $user-&gt;name.' Role'];
                        }),
                    ['active' =&gt; true]
                )
                -&gt;create();</code></pre>
<h4>使用魔术方法</h4>
<p>为方便起见，您可以使用工厂的魔术关系方法来定义多对多关系。例如，下面的示例将使用约定来确定应通过 <code>User</code> 模型上的 <code>Roles</code> 关系方法创建相关模型：</p>
<pre><code>    $users = User::factory()
                -&gt;hasRoles(1, [
                    'name' =&gt; 'Editor'
                ])
                -&gt;create();</code></pre>
<p><a name="polymorphic-relationships"></a></p>
<h3>多态关系</h3>
<p><a href="/docs/laravel_8_zh/eloquent-relationships.html#polymorphic-relationships">多态关系</a> 也可以使用工厂创建。多态的 「morph many」关系的创建方式与典型的 「has many」 关系的创建方式相同。例如，如果 <code>Post</code> 模型与 <code>Comment</code> 模型存在 <code>morMany</code> 关系：</p>
<pre><code>    use App\Models\Post;

    $post = Post::factory()-&gt;hasComments(3)-&gt;create();</code></pre>
<h4>变形关系</h4>
<p>魔术方法不能用于创建 <code>morTo</code> 关系。相反，必须直接使用 <code>for</code> 方法，并且必须显式提供关系的名称。例如，假设 <code>Comment</code> 模型有一个 <code>commentable</code> 方法，该方法定义了一个 <code>morTo</code> 关系。在这种情况下，我们可以直接使用 <code>for</code> 方法创建属于单个帖子的三条评论：</p>
<pre><code>    $comments = Comment::factory()-&gt;count(3)-&gt;for(
        Post::factory(), 'commentable'
    )-&gt;create();</code></pre>
<h4>多态多对多关系</h4>
<p>可以像创建非多态的 「多对多」关系一样创建多态的「多对多」关系：</p>
<pre><code>    use App\Models\Tag;
    use App\Models\Video;

    $users = Video::factory()
                -&gt;hasAttached(
                    Tag::factory()-&gt;count(3),
                    ['public' =&gt; true]
                )
                -&gt;create();</code></pre>
<p>当然，魔术「has」方法也可以用于创建多态「多对多」关系：</p>
<pre><code>    $users = Video::factory()
                -&gt;hasTags(3, ['public' =&gt; true])
                -&gt;create();</code></pre>
<p><a name="using-seeds"></a></p>
<h2>使用种子</h2>
<p>如果您在功能测试时希望使用 <a href="/docs/laravel_8_zh/seeding.html">数据库种子</a> 填充您的数据库，可以使用 <code>seed</code> 方法。默认情况下，<code>seed</code> 方法会返回<code>DatabaseSeeder</code>，它应该执行您的所有其他种子程序。或者，将特定的种子器类名传递给 <code>seed</code> 方法：</p>
<pre><code>    &lt;?php

    namespace Tests\Feature;

    use Illuminate\Foundation\Testing\RefreshDatabase;
    use Illuminate\Foundation\Testing\WithoutMiddleware;
    use OrderStatusSeeder;
    use Tests\TestCase;

    class ExampleTest extends TestCase
    {
        use RefreshDatabase;

        /**
         * Test creating a new order.
         *
         * @return void
         */
        public function testCreatingANewOrder()
        {
            // Run the DatabaseSeeder...
            $this-&gt;seed();

            // Run a single seeder...
            $this-&gt;seed(OrderStatusSeeder::class);

            // ...
        }
    }</code></pre>
<p><a name="available-assertions"></a></p>
<h2>可用的断言方法</h2>
<p>Laravel为你的<a href="https://phpunit.de/">PHPUnit</a>功能测试提供了几个数据库断言方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$this-&gt;assertDatabaseCount($table, int $count);</code></td>
<td>断言数据表包含给定数量的实体。</td>
</tr>
<tr>
<td><code>$this-&gt;assertDatabaseHas($table, array $data);</code></td>
<td>断言数据表包含给定数据。</td>
</tr>
<tr>
<td><code>$this-&gt;assertDatabaseMissing($table, array $data);</code></td>
<td>断言数据表不包含给定数据。</td>
</tr>
<tr>
<td><code>$this-&gt;assertDeleted($table, array $data);</code></td>
<td>断言给定记录是否被删除。</td>
</tr>
<tr>
<td><code>$this-&gt;assertSoftDeleted($table, array $data);</code></td>
<td>断言给定记录已经被软删除。</td>
</tr>
</tbody>
</table>
<p>为方便起见, 你可以传递一个模型实例到 <code>assertDeleted</code> 和 <code>assertSoftDeleted</code> 函数来断言对应数据库记录是否被删除或软删除，底层依据的是模型主键与数据表记录建立关联。</p>
<p>举个例子, 如果你在你的测试中使用了一个模型工厂，你可以传入这个其中一个模式来帮助测试你的应用是否正确的删除了数据库的记录:</p>
<pre><code>public function testDatabase()
{
    $user = User::factory()-&gt;create();

    // 调用这个程序...

    $this-&gt;assertDeleted($user);
}</code></pre>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-xl-2" id="toc-list">
        <ul></ul>
    </div>
</div>    </div>
</div>
<span id="back-top">
<svg width="20" height="20" fill="currentColor">
    <use xlink:href="/css/bootstrap-icons.svg#chevron-up"/>
</svg>
</span>
 
<script>
    // 浏览量统计
    $(function () {
        let formdata = new FormData();
        formdata.append('_token', '');
        formdata.append('id', 319);
        $.ajax({
            url: $(".sticky-top .navbar-brand").attr('href') + "/api/doc/clicks",
            type: 'POST',
            data: formdata,
            processData: false,
            contentType: false
        });
    });
    // aside-hidden
    $(function () {
        $('#aside-hidden').on('click', function () {
            $('.aside').toggle(0, function () {
                if ($(this).is(':visible')) {
                    $('.aside-middle').removeClass('col-md-12 col-lg-12').addClass('col-md-9 col-lg-10');
                } else {
                    $('.aside-middle').removeClass('col-md-9 col-lg-10').addClass('col-md-12 col-lg-12');
                }
            });
        });
    });
</script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?1522d01c436f59ddc8389f25bfa9d53e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>