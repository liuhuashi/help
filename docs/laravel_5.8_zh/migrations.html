<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"> 
    <meta name="csrf-token" content=""> 
    <title>Laravel 的数据库迁移 Migrations - 开发帮助文档</title> 
    <meta name="keyword" content="migrations"> 
    <meta name="description" content="migrations"> 
    <meta name="author" content="Moments"> 
    <link href="/favicon.ico" rel="shortcut icon"> 
    <link href="/css/blog.css" rel="stylesheet"> 
    <script src="/js/blog.js"></script> 
</head>
<body>
<header class="sticky-top">
    <nav class="navbar navbar-expand navbar-dark bg-secondary justify-content-between text-uppercase">
        <div class="navbar-nav" style="overflow:hidden;">
            <a class="navbar-brand" href="https://help.pythonschool.com">
                <span class="d-md-none">
                    <svg class="text-warning" width="24" height="24" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#emoji-sunglasses"/>
                    </svg>
                </span>
                <span class="d-none d-md-flex">开发帮助文档</span>
            </a>
            <div class="navbar-nav-scroll" style="overflow: hidden;">
                <ul class="navbar-nav text-nowrap pb-4" style="overflow:auto;">
                                            <li class="nav-item">
                            <a class="nav-link active" href="/docs/laravel/index.html">laravel</a>
                        </li>
                                            <li class="nav-item">
                            <a class="nav-link" href="/docs/php/index.html">php</a>
                        </li>
                                    </ul>
            </div>
        </div>
        <div class="d-inline-flex">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/liuhuashi">
                        <svg class="text-light" width="24" height="24" fill="currentColor">
                            <use xlink:href="/css/bootstrap-icons.svg#github"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<div class="container-fluid">
    <div id="aside-hidden" class="position-fixed" style="left:0;top: 58px;cursor:pointer;z-index: 10000;">
        <svg class="align-text-bottom text-warning" width="16" height="16" fill="currentColor" stroke="currentColor" stroke-width="1">
            <use xlink:href="/css/bootstrap-icons.svg#arrow-left-square"/>
        </svg>
    </div>
    <div class="row">
        <div class="aside col-md-3 col-lg-2 border-right shadow position-sticky" style="overflow:auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
    <form class="row border-bottom p-3 bg-white sticky-top">
        <input id="search-version" class="form-control" data-version="5" type="search" placeholder="英文逗号分隔,分词搜索">
    </form>
    <ul class="nav navbar-nav nav-pills flex-column pt-2 figure-caption">
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/about.html" title="Laravel 5.8 中文文档">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 5.8 中文文档
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/api-authentication.html" title="API Authentication">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    API Authentication
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/artisan.html" title="Laravel 的 Artisan 命令行工具">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 Artisan 命令行工具
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/authentication.html" title="Laravel 的用户认证系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的用户认证系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/authorization.html" title="Laravel 的用户授权系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的用户授权系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/billing.html" title="Laravel 的收费系统 Cashier">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的收费系统 Cashier
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/blade.html" title="Laravel 的 Blade 模板引擎">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 Blade 模板引擎
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/braintree.html" title="Laravel Cashier (Braintree)">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Cashier (Braintree)
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/broadcasting.html" title="Laravel 的事件广播系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的事件广播系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/cache.html" title="Laravel 的缓存系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的缓存系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/collections.html" title="Laravel 的集合 Collection">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的集合 Collection
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/configuration.html" title="Laravel 的配置信息">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的配置信息
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/console-tests.html" title="Console Tests">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Console Tests
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/container.html" title="Laravel 服务容器解析">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 服务容器解析
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/contracts.html" title="Laravel 的契约 (Contracts)">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的契约 (Contracts)
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/contributions.html" title="Laravel 源代码贡献指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 源代码贡献指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/controllers.html" title="Laravel 的 HTTP 控制器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 HTTP 控制器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/csrf.html" title="Laravel 下的伪造跨站请求保护 CSRF">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 下的伪造跨站请求保护 CSRF
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/database-testing.html" title="Laravel 测试之 - 数据库测试">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 测试之 - 数据库测试
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/database.html" title="数据库：入门">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库：入门
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/deployment.html" title="Laravel 的部署">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的部署
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/documentation.html" title="主页(Index)">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    主页(Index)
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/dusk.html" title="Laravel 测试之 - 浏览器测试 (Laravel Dusk)">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 测试之 - 浏览器测试 (Laravel Dusk)
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/eloquent-collections.html" title="Eloquent：集合">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent：集合
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/eloquent-mutators.html" title="Eloquent： 修改器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent： 修改器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/eloquent-relationships.html" title="Eloquent：关联">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent：关联
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/eloquent-resources.html" title="Eloquent: API 资源">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: API 资源
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/eloquent-serialization.html" title="Eloquent: 序列化">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 序列化
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/eloquent.html" title="Eloquent: 入门">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 入门
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/encryption.html" title="Laravel 的加密解密机制">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的加密解密机制
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/envoy.html" title="Laravel 的远程服务器任务处理器 Envoy">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的远程服务器任务处理器 Envoy
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/errors.html" title="Laravel 的错误和日志记录">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的错误和日志记录
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/events.html" title="Laravel 的事件系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的事件系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/facades.html" title="Laravel 的 Facades">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 Facades
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/filesystem.html" title="Laravel 的文件系统和云存储功能集成">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的文件系统和云存储功能集成
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/frontend.html" title="Laravel 的前端资源处理 JavaScript＆CSS 构建">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的前端资源处理 JavaScript＆CSS 构建
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/hashing.html" title="Laravel 的哈希加密">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的哈希加密
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/helpers.html" title="Laravel 的辅助函数列表">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的辅助函数列表
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/homestead.html" title="Laravel 虚拟开发环境 Homestead">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 虚拟开发环境 Homestead
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/horizon.html" title="Laravel 队列监控面板 - Horizon">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 队列监控面板 - Horizon
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/http-tests.html" title="Laravel 测试之：HTTP 测试">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 测试之：HTTP 测试
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/installation.html" title="Laravel 安装指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 安装指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/license.html" title="license">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    license
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/lifecycle.html" title="Laravel 的请求生命周期">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的请求生命周期
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/localization.html" title="Laravel 的本地化功能">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的本地化功能
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/logging.html" title="Logging">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Logging
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/mail.html" title="Laravel 的 邮件发送功能">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 邮件发送功能
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/middleware.html" title="Laravel 的路由中间件">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的路由中间件
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/migrations.html" title="Laravel 的数据库迁移 Migrations">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的数据库迁移 Migrations
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/mix.html" title="Laravel 的资源任务编译器 Laravel Mix">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的资源任务编译器 Laravel Mix
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/mocking.html" title="Laravel 测试之：测试模拟器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 测试之：测试模拟器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/notifications.html" title="Laravel 的消息通知系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的消息通知系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/packages.html" title="Laravel 的扩展插件开发指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的扩展插件开发指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/pagination.html" title="Laravel 的分页功能">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的分页功能
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/passport.html" title="Laravel 的 API 认证系统 Passport">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 API 认证系统 Passport
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/passwords.html" title="Laravel 的密码重置功能">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的密码重置功能
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/providers.html" title="Laravel 的服务提供器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的服务提供器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/queries.html" title="Laravel 数据库之：数据库请求构建器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 数据库之：数据库请求构建器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/queues.html" title="Laravel 的队列系统介绍">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的队列系统介绍
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/readme.html" title="Laravel Documentation">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Documentation
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/redirects.html" title="Laravel 的 HTTP 重定向 Redirect">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 HTTP 重定向 Redirect
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/redis.html" title="Laravel 的 Redis 使用指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 Redis 使用指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/releases.html" title="发行说明">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    发行说明
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/requests.html" title="Laravel 的 HTTP 请求">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 HTTP 请求
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/responses.html" title="Laravel 的请求响应">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的请求响应
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/routing.html" title="Laravel HTTP 路由功能">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel HTTP 路由功能
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/scheduling.html" title="Laravel 的任务调度（计划任务）功能 Task Scheduling">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的任务调度（计划任务）功能 Task Scheduling
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/scout.html" title="Laravel 的搜索系统 Scout">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的搜索系统 Scout
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/seeding.html" title="Laravel 数据库之：数据填充">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 数据库之：数据填充
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/session.html" title="Laravel 的 HTTP 会话机制">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 HTTP 会话机制
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/socialite.html" title="Laravel 的 社会化登录功能">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 社会化登录功能
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/structure.html" title="Laravel 的文件夹结构">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的文件夹结构
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/telescope.html" title="Laravel Telescope">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Telescope
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/testing.html" title="Laravel 测试: 入门指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 测试: 入门指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/upgrade.html" title="Laravel 升级索引">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 升级索引
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/urls.html" title="Laravel 的 URL 生成">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的 URL 生成
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/valet.html" title="Laravel 的开发环境 Valet">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的开发环境 Valet
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/validation.html" title="Laravel 的表单验证机制详解">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的表单验证机制详解
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/verification.html" title="Email Verification">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Email Verification
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_5.8_zh/views.html" title="Laravel 的视图">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 的视图
                </a>
            </li>
            </ul>
</div>        <div class="aside-middle col-md-9 col-lg-10 row">
    <div class="col-md-9 col-xl-10" style="overflow: auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
        <div class="container main-h4-1">
            <div class="page-content">
                <h1>Laravel 的数据库迁移 Migrations</h1>
<ul>
<li><a href="#introduction">简介</a></li>
<li><a href="#generating-migrations">生成迁移</a></li>
<li><a href="#migration-structure">迁移结构</a></li>
<li><a href="#running-migrations">运行迁移</a>
<ul>
<li><a href="#rolling-back-migrations">回滚迁移</a></li>
</ul></li>
<li><a href="#tables">数据表</a>
<ul>
<li><a href="#creating-tables">创建数据表</a></li>
<li><a href="#renaming-and-dropping-tables">重命名/删除数据表</a></li>
</ul></li>
<li><a href="#columns">字段</a>
<ul>
<li><a href="#creating-columns">创建字段</a></li>
<li><a href="#column-modifiers">字段修饰</a></li>
<li><a href="#modifying-columns">修改字段</a></li>
<li><a href="#dropping-columns">删除字段</a></li>
</ul></li>
<li><a href="#indexes">索引</a>
<ul>
<li><a href="#creating-indexes">创建索引</a></li>
<li><a href="#dropping-indexes">删除索引</a></li>
<li><a href="#foreign-key-constraints">外键约束</a></li>
</ul></li>
</ul>
<p><a name="introduction"></a></p>
<h2>简介</h2>
<p>数据库迁移就像是数据库的版本控制，可以让你的团队轻松修改并共享应用程序的数据库结构。迁移通常与 Laravel 的数据库结构生成器配合使用，让你轻松地构建数据库结构。如果你曾经试过让同事手动在数据库结构中添加字段，那么数据库迁移可以让你不再需要做这样的事情。</p>
<p>Laravel <code>Schema</code> <a href="/docs/laravel_5.8_zh/facades.html">facade</a> 对所有 Laravel 支持的数据库系统提供了创建和操作数据表的相应支持。</p>
<p><a name="generating-migrations"></a></p>
<h2>生成迁移</h2>
<p>使用 <a href="/docs/laravel_5.8_zh/artisan.html">Artisan 命令</a>  <code>make:migration</code> 来创建迁移：</p>
<pre><code>php artisan make:migration create_users_table</code></pre>
<p>新的迁移文件会被放置在 <code>database/migrations</code> 目录中。每个迁移文件的名称都包含了一个时间戳，以便让 Laravel 确认迁移的顺序。</p>
<p><code>--table</code> 和 <code>--create</code> 选项可用来指定数据表的名称，或是该迁移被执行时是否将创建的新数据表。这些选项需在预生成迁移文件时填入指定的数据表：</p>
<pre><code>php artisan make:migration create_users_table --create=users

php artisan make:migration add_votes_to_users_table --table=users</code></pre>
<p>如果你想为生成的迁移指定一个自定义输出路径，则可以在运行 <code>make:migration</code> 命令时添加 <code>--path</code> 选项。给定的路径必须是相对于应用程序的基本路径。</p>
<p><a name="migration-structure"></a></p>
<h2>迁移结构</h2>
<p>迁移类通常会包含两个方法：<code>up</code> 和 <code>down</code>。<code>up</code> 方法可为数据库添加新的数据表、字段或索引，而 <code>down</code> 方法则是 <code>up</code> 方法的逆操作。</p>
<p>你可以在这两个方法中使用 Laravel 数据库结构生成器来创建以及修改数据表。若要了解  <code>Schema</code> 生成器中的所有可用方法，<a href="#creating-tables">可查阅它的文档</a>。以下的迁移实例会创建一张 <code>flights</code> 数据表：</p>
<pre><code>&lt;?php

use Illuminate\Support\Facades\Schema;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Database\Migrations\Migration;

class CreateFlightsTable extends Migration
{
    /**
     * 运行数据库迁移
     *
     * @return void
     */
    public function up()
    {
        Schema::create('flights', function (Blueprint $table) {
            $table-&gt;increments('id');
            $table-&gt;string('name');
            $table-&gt;string('airline');
            $table-&gt;timestamps();
        });
    }

    /**
     * 回滚数据库迁移
     *
     * @return void
     */
    public function down()
    {
        Schema::drop('flights');
    }
}</code></pre>
<p><a name="running-migrations"></a></p>
<h2>运行迁移</h2>
<p>使用 Artisan 命令 <code>migrate</code> 来运行所有未完成的迁移：</p>
<pre><code>php artisan migrate</code></pre>
<blockquote>
<p>{note} 如果你使用的是 <a href="/docs/laravel_5.8_zh/homestead.html">Homestead 虚拟机</a>，则应该在虚拟机中执行命令。</p>
</blockquote>
<h4>在生产环境强制执行迁移</h4>
<p>一些迁移操作是具有破坏性的，这意味着可能会导致数据丢失。为了防止有人在生产环境中运行这些命令，系统会在这些命令被运行之前与你进行确认。如果要强制忽略系统的提示运行命令，则可以使用 <code>--force</code> 标记：</p>
<pre><code>php artisan migrate --force</code></pre>
<p><a name="rolling-back-migrations"></a></p>
<h3>回滚迁移</h3>
<p>若要回滚最后一次迁移，可以使用 <code>rollback</code> 命令。此命令将回滚最后一次「迁移」，其中可能包含多个迁移文件：</p>
<pre><code>php artisan migrate:rollback</code></pre>
<p>在 <code>rollback</code> 命令后加上 <code>step</code> 参数，你可以限制回滚迁移的个数。例如，以下命令将回滚最近五次迁移：</p>
<pre><code>php artisan migrate:rollback --step=5</code></pre>
<p><code>migrate:reset</code> 命令可以回滚应用程序中的所有迁移：</p>
<pre><code>php artisan migrate:reset</code></pre>
<h4>使用单个命令来执行回滚或迁移</h4>
<p><code>migrate:refresh</code> 命令不仅会回滚数据库的所有迁移还会接着运行 <code>migrate</code> 命令。这个命令可以高效地重建整个数据库：</p>
<pre><code>php artisan migrate:refresh

// 刷新数据库结构并执行数据填充
php artisan migrate:refresh --seed</code></pre>
<p>使用 <code>refresh</code> 命令并提供 <code>step</code> 参数来回滚并再执行最后指定的迁移数。例如，以下命令将回滚并重新执行最后五次迁移：</p>
<pre><code>php artisan migrate:refresh --step=5</code></pre>
<h4>删除所有表 &amp; 迁移</h4>
<p><code>migrate:fresh</code> 命令会从数据库中删除所有表，然后执行 <code>migrate</code> 命令:</p>
<pre><code>php artisan migrate:fresh

php artisan migrate:fresh --seed</code></pre>
<p><a name="tables"></a></p>
<h2>数据表</h2>
<p><a name="creating-tables"></a></p>
<h3>创建数据表</h3>
<p>可以使用 <code>Schema</code> facade 的 <code>create</code> 方法来创建新的数据库表。<code>create</code> 方法接受两个参数：第一个参数为数据表的名称，第二个参数是 <code>闭包</code>，此闭包会接收一个用于定义新数据表的 <code>Blueprint</code> 对象：</p>
<pre><code>Schema::create('users', function (Blueprint $table) {
    $table-&gt;increments('id');
});</code></pre>
<p>当然，在创建数据表的时候，可以使用任何数据库结构生成器的 <a href="#creating-columns">字段方法</a> 来定义数据表的字段。</p>
<h4>检查数据表或字段是否存在</h4>
<p>可以使用 <code>hasTable</code> 和 <code>hasColumn</code> 方法来检查数据表或字段是否存在：</p>
<pre><code>if (Schema::hasTable('users')) {
    //
}

if (Schema::hasColumn('users', 'email')) {
    //
}</code></pre>
<h4>数据库连接 &amp; 表选项</h4>
<p>如果要对非默认连接的数据库连接执行结构操作，可以使用 <code>connection</code> 方法：</p>
<pre><code>Schema::connection('foo')-&gt;create('users', function (Blueprint $table) {
    $table-&gt;increments('id');
});</code></pre>
<p>你可以在数据库结构生成器上使用以下命令来定义表的选项：</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$table-&gt;engine = 'InnoDB';</code></td>
<td>指定表存储引擎 (MySQL)</td>
</tr>
<tr>
<td><code>$table-&gt;charset = 'utf8';</code></td>
<td>指定数据表的默认字符集 (MySQL)</td>
</tr>
<tr>
<td><code>$table-&gt;collation = 'utf8_unicode_ci';</code></td>
<td>指定数据表默认的排序规则 (MySQL)</td>
</tr>
<tr>
<td><code>$table-&gt;temporary();</code></td>
<td>创建临时表(不支持SQL Server).</td>
</tr>
</tbody>
</table>
<p><a name="renaming-and-dropping-tables"></a></p>
<h3>重命名/删除数据表</h3>
<p>若要重命名数据表，可以使用 <code>rename</code> 方法：</p>
<pre><code>Schema::rename($from, $to);</code></pre>
<p>要删除数据表，可使用 <code>drop</code> 或 <code>dropIfExists</code> 方法：</p>
<pre><code>Schema::drop('users');

Schema::dropIfExists('users');</code></pre>
<h4>重命名带外键的数据表</h4>
<p>在重命名表之前，你应该验证表上的任何外键约束在迁移文件中都有明确的名称，而不是让 Laravel 按照约定来设置一个名称。否则，外键的约束名称将引用旧表名。</p>
<p><a name="columns"></a></p>
<h2>字段</h2>
<p><a name="creating-columns"></a></p>
<h3>创建字段</h3>
<p>使用 <code>Schema</code> facade 的 <code>table</code> 方法可以更新现有的数据表。如同 <code>create</code> 方法一样，<code>table</code> 方法会接受两个参数：一个是数据表的名称，另一个则是接收可以用来向表中添加字段的 <code>Blueprint</code> 实例的<code>闭包</code>：</p>
<pre><code>Schema::table('users', function (Blueprint $table) {
    $table-&gt;string('email');
});</code></pre>
<h4>可用的字段类型</h4>
<p>数据库结构生成器包含构建表时可以指定的各种字段类型：</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$table-&gt;bigIncrements('id');</code></td>
<td>递增 ID（主键），相当于「UNSIGNED BIG INTEGER」</td>
</tr>
<tr>
<td><code>$table-&gt;bigInteger('votes');</code></td>
<td>相当于 BIGINT</td>
</tr>
<tr>
<td><code>$table-&gt;binary('data');</code></td>
<td>相当于 BLOB</td>
</tr>
<tr>
<td><code>$table-&gt;boolean('confirmed');</code></td>
<td>相当于 BOOLEAN</td>
</tr>
<tr>
<td><code>$table-&gt;char('name', 4);</code></td>
<td>相当于带有长度的 CHAR</td>
</tr>
<tr>
<td><code>$table-&gt;date('created_at');</code></td>
<td>相当于 DATE</td>
</tr>
<tr>
<td><code>$table-&gt;dateTime('created_at');</code></td>
<td>相当于 DATETIME</td>
</tr>
<tr>
<td><code>$table-&gt;dateTimeTz('created_at');</code></td>
<td>相当于带时区 DATETIME</td>
</tr>
<tr>
<td><code>$table-&gt;decimal('amount', 8, 2);</code></td>
<td>相当于带有精度与基数 DECIMAL</td>
</tr>
<tr>
<td><code>$table-&gt;double('column', 8, 2);</code></td>
<td>相当于带有精度与基数 DOUBLE</td>
</tr>
<tr>
<td><code>$table-&gt;enum('level', ['easy', 'hard']);</code></td>
<td>相当于 ENUM</td>
</tr>
<tr>
<td><code>$table-&gt;float('amount', 8, 2);</code></td>
<td>相当于带有精度与基数 FLOAT</td>
</tr>
<tr>
<td><code>$table-&gt;geometry('positions');</code></td>
<td>相当于 GEOMETRY</td>
</tr>
<tr>
<td><code>$table-&gt;geometryCollection('positions');</code></td>
<td>相当于 GEOMETRYCOLLECTION</td>
</tr>
<tr>
<td><code>$table-&gt;increments('id');</code></td>
<td>递增的 ID (主键)，相当于「UNSIGNED INTEGER」</td>
</tr>
<tr>
<td><code>$table-&gt;integer('votes');</code></td>
<td>相当于 INTEGER</td>
</tr>
<tr>
<td><code>$table-&gt;ipAddress('visitor');</code></td>
<td>相当于 IP 地址</td>
</tr>
<tr>
<td><code>$table-&gt;json('options');</code></td>
<td>相当于 JSON</td>
</tr>
<tr>
<td><code>$table-&gt;jsonb('options');</code></td>
<td>相当于 JSONB</td>
</tr>
<tr>
<td><code>$table-&gt;lineString('positions');</code></td>
<td>相当于 LINESTRING</td>
</tr>
<tr>
<td><code>$table-&gt;longText('description');</code></td>
<td>相当于 LONGTEXT</td>
</tr>
<tr>
<td><code>$table-&gt;macAddress('device');</code></td>
<td>相当于 MAC 地址</td>
</tr>
<tr>
<td><code>$table-&gt;mediumIncrements('id');</code></td>
<td>递增 ID (主键) ，相当于「UNSIGNED MEDIUM INTEGER」</td>
</tr>
<tr>
<td><code>$table-&gt;mediumInteger('votes');</code></td>
<td>相当于 MEDIUMINT</td>
</tr>
<tr>
<td><code>$table-&gt;mediumText('description');</code></td>
<td>相当于 MEDIUMTEXT</td>
</tr>
<tr>
<td><code>$table-&gt;morphs('taggable');</code></td>
<td>相当于加入递增的 <code>taggable_id</code> 与字符串 <code>taggable_type</code></td>
</tr>
<tr>
<td><code>$table-&gt;multiLineString('positions');</code></td>
<td>相当于 MULTILINESTRING</td>
</tr>
<tr>
<td><code>$table-&gt;multiPoint('positions');</code></td>
<td>相当于 MULTIPOINT</td>
</tr>
<tr>
<td><code>$table-&gt;multiPolygon('positions');</code></td>
<td>相当于 MULTIPOLYGON</td>
</tr>
<tr>
<td><code>$table-&gt;nullableMorphs('taggable');</code></td>
<td>相当于可空版本的 <code>morphs()</code> 字段</td>
</tr>
<tr>
<td><code>$table-&gt;nullableTimestamps();</code></td>
<td>相当于可空版本的 <code>timestamps()</code> 字段</td>
</tr>
<tr>
<td><code>$table-&gt;point('position');</code></td>
<td>相当于 POINT</td>
</tr>
<tr>
<td><code>$table-&gt;polygon('positions');</code></td>
<td>相当于 POLYGON</td>
</tr>
<tr>
<td><code>$table-&gt;rememberToken();</code></td>
<td>相当于可空版本的 VARCHAR(100) 的 <code>remember_token</code> 字段</td>
</tr>
<tr>
<td><code>$table-&gt;smallIncrements('id');</code></td>
<td>递增 ID (主键) ，相当于「UNSIGNED SMALL INTEGER」</td>
</tr>
<tr>
<td><code>$table-&gt;smallInteger('votes');</code></td>
<td>相当于 SMALLINT</td>
</tr>
<tr>
<td><code>$table-&gt;softDeletes();</code></td>
<td>相当于为软删除添加一个可空的 <code>deleted_at</code> 字段</td>
</tr>
<tr>
<td><code>$table-&gt;softDeletesTz();</code></td>
<td>相当于为软删除添加一个可空的 带时区的 <code>deleted_at</code> 字段</td>
</tr>
<tr>
<td><code>$table-&gt;string('name', 100);</code></td>
<td>相当于带长度的 VARCHAR</td>
</tr>
<tr>
<td><code>$table-&gt;text('description');</code></td>
<td>相当于 TEXT</td>
</tr>
<tr>
<td><code>$table-&gt;time('sunrise');</code></td>
<td>相当于 TIME</td>
</tr>
<tr>
<td><code>$table-&gt;timeTz('sunrise');</code></td>
<td>相当于带时区的 TIME</td>
</tr>
<tr>
<td><code>$table-&gt;timestamp('added_on');</code></td>
<td>相当于 TIMESTAMP</td>
</tr>
<tr>
<td><code>$table-&gt;timestampTz('added_on');</code></td>
<td>相当于带时区的 TIMESTAMP</td>
</tr>
<tr>
<td><code>$table-&gt;tinyIncrements('id');</code></td>
<td>相当于自动递增 UNSIGNED TINYINT</td>
</tr>
<tr>
<td><code>$table-&gt;tinyInteger('votes');</code></td>
<td>相当于 TINYINT</td>
</tr>
<tr>
<td><code>$table-&gt;unsignedBigInteger('votes');</code></td>
<td>相当于 Unsigned BIGINT</td>
</tr>
<tr>
<td><code>$table-&gt;unsignedDecimal('amount', 8, 2);</code></td>
<td>相当于带有精度和基数的 UNSIGNED DECIMAL</td>
</tr>
<tr>
<td><code>$table-&gt;unsignedInteger('votes');</code></td>
<td>相当于 Unsigned INT</td>
</tr>
<tr>
<td><code>$table-&gt;unsignedMediumInteger('votes');</code></td>
<td>相当于 Unsigned MEDIUMINT</td>
</tr>
<tr>
<td><code>$table-&gt;unsignedSmallInteger('votes');</code></td>
<td>相当于 Unsigned SMALLINT</td>
</tr>
<tr>
<td><code>$table-&gt;unsignedTinyInteger('votes');</code></td>
<td>相当于 Unsigned TINYINT</td>
</tr>
<tr>
<td><code>$table-&gt;uuid('id');</code></td>
<td>相当于 UUID</td>
</tr>
<tr>
<td><code>$table-&gt;year('birth_year');</code></td>
<td>相当于 YEAR</td>
</tr>
</tbody>
</table>
<p><a name="column-modifiers"></a></p>
<h3>字段修饰</h3>
<p>除了上述列出的字段类型之外，还有几个可以在添加字段时使用的「修饰符」。例如，如果要把字段设置为「可空」，就使用 <code>nullable</code> 方法：</p>
<pre><code>Schema::table('users', function (Blueprint $table) {
    $table-&gt;string('email')-&gt;nullable();
});</code></pre>
<p>以下是所有可用的字段修饰符的列表。此列表不包括 <a href="#creating-indexes">索引修饰符</a>：</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-&gt;after('column')</code></td>
<td>将此字段放置在其它字段「之后」（仅限 MySQL）</td>
</tr>
<tr>
<td><code>-&gt;autoIncrement()</code></td>
<td>将 INTEGER 类型的字段设置为自动递增的主键</td>
</tr>
<tr>
<td><code>-&gt;charset('utf8')</code></td>
<td>指定一个字符集（仅限 MySQL）</td>
</tr>
<tr>
<td><code>-&gt;collation('utf8_unicode_ci')</code></td>
<td>指定列的排序规则（仅限 MySQL/SQL Server）</td>
</tr>
<tr>
<td><code>-&gt;comment('my comment')</code></td>
<td>为字段增加注释（仅限 MySQL）</td>
</tr>
<tr>
<td><code>-&gt;default($value)</code></td>
<td>为字段指定「默认」值</td>
</tr>
<tr>
<td><code>-&gt;first()</code></td>
<td>将此字段放置在数据表的「首位」（仅限 MySQL）</td>
</tr>
<tr>
<td><code>-&gt;nullable($value = true)</code></td>
<td>（默认情况下）此字段允许写入 NULL 值</td>
</tr>
<tr>
<td><code>-&gt;storedAs($expression)</code></td>
<td>创建一个存储生成的字段 （仅限 MySQL）</td>
</tr>
<tr>
<td><code>-&gt;unsigned()</code></td>
<td>设置 <code>integer</code> 类型的字段为 <code>UNSIGNED</code>（仅限 MySQL）</td>
</tr>
<tr>
<td><code>-&gt;useCurrent()</code></td>
<td>将 TIMESTAMP 类型的字段设置为使用 CURRENT_TIMESTAMP 作为默认值</td>
</tr>
<tr>
<td><code>-&gt;virtualAs($expression)</code></td>
<td>创建一个虚拟生成的字段 （仅限 MySQL）</td>
</tr>
</tbody>
</table>
<p><a name="modifying-columns"></a></p>
<h3>修改字段</h3>
<h4>先决条件</h4>
<p>在修改字段之前，请确保将 <code>doctrine/dbal</code> 依赖添加到 <code>composer.json</code> 文件中。Doctrine DBAL 库用于确定字段的当前状态，并创建对该字段进行指定调整所需的 SQL 查询：</p>
<pre><code>composer require doctrine/dbal</code></pre>
<h4>更新字段属性</h4>
<p><code>change</code> 方法可以将现有的字段类型修改为新的类型或修改属性。比如，你可能想增加字符串字段的长度，可以使用 <code>change</code> 方法把 <code>name</code> 字段的长度从 25 增加到 50 ：</p>
<pre><code>Schema::table('users', function (Blueprint $table) {
    $table-&gt;string('name', 50)-&gt;change();
});</code></pre>
<p>将字段修改为可空：</p>
<pre><code>Schema::table('users', function (Blueprint $table) {
    $table-&gt;string('name', 50)-&gt;nullable()-&gt;change();
});</code></pre>
<blockquote>
<p>{note} 只有下面的字段类型不能被「修改」: bigInteger、binary、boolean、date、dateTime、dateTimeTz、 decimal、integer、json、longText、mediumText、smallInteger、string、text、time、unsignedBigInteger、unsignedInteger 和 unsignedSmallInteger。</p>
</blockquote>
<p><a name="renaming-columns"></a></p>
<h4>重命名字段</h4>
<p>可以使用结构生成器上的 <code>renameColumn</code> 方法来重命名字段。在重命名字段前，请确保你的 <code>composer.json</code> 文件内已经加入 <code>doctrine/dbal</code> 依赖：</p>
<pre><code>Schema::table('users', function (Blueprint $table) {
    $table-&gt;renameColumn('from', 'to');
});</code></pre>
<blockquote>
<p>{note} 当前不支持 <code>enum</code> 类型的字段重命名。</p>
</blockquote>
<p><a name="dropping-columns"></a></p>
<h3>删除字段</h3>
<p>可以使用结构生成器上的 <code>dropColumn</code> 方法来删除字段。在从 SQLite 数据库删除字段前，你需要在 <code>composer.json</code> 文件中加入 <code>doctrine/dbal</code> 依赖并在终端执行 <code>composer update</code> 来安装该依赖：</p>
<pre><code>Schema::table('users', function (Blueprint $table) {
    $table-&gt;dropColumn('votes');
});</code></pre>
<p>你可以传递一个字段数组给 <code>dropCloumn</code> 方法来删除多个字段：</p>
<pre><code>Schema::table('users', function (Blueprint $table) {
    $table-&gt;dropColumn(['votes', 'avatar', 'location']);
});</code></pre>
<blockquote>
<p>{note} 不支持在使用 SQLite 数据库时在单个迁移中删除或修改多个字段。</p>
</blockquote>
<h4>可用的命令别名</h4>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$table-&gt;dropRememberToken();</code></td>
<td>删除 <code>remember_token</code> 字段</td>
</tr>
<tr>
<td><code>$table-&gt;dropSoftDeletes();</code></td>
<td>删除 <code>deleted_at</code> 字段</td>
</tr>
<tr>
<td><code>$table-&gt;dropSoftDeletesTz();</code></td>
<td><code>dropSoftDeletes()</code> 方法的别名</td>
</tr>
<tr>
<td><code>$table-&gt;dropTimestamps();</code></td>
<td>删除 <code>created_at</code> 和 <code>updated_at</code> 字段</td>
</tr>
<tr>
<td><code>$table-&gt;dropTimestampsTz();</code></td>
<td><code>dropTimestamps()</code> 方法的别名</td>
</tr>
</tbody>
</table>
<p><a name="indexes"></a></p>
<h2>索引</h2>
<p><a name="creating-indexes"></a></p>
<h3>创建索引</h3>
<p>结构生成器支持多种类型的索引。首先，先指定字段值唯一，即简单地在字段定义之后链式调用 <code>unique</code> 方法来创建索引，例如：</p>
<pre><code>$table-&gt;string('email')-&gt;unique();</code></pre>
<p>或者，你也可以在定义完字段之后创建索引。例如：</p>
<pre><code>$table-&gt;unique('email');</code></pre>
<p>你甚至可以将数组传递给索引方法来创建一个复合（或合成）索引：</p>
<pre><code>$table-&gt;index(['account_id', 'created_at']);</code></pre>
<p>Laravel 会自动生成一个合理的索引名称，但你也可以传递第二个参数来自定义索引名称:</p>
<pre><code>$table-&gt;index('email', 'unique_email');</code></pre>
<h4>可用的索引类型</h4>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$table-&gt;primary('id');</code></td>
<td>添加主键</td>
</tr>
<tr>
<td><code>$table-&gt;primary(['id', 'parent_id']);</code></td>
<td>添加复合键</td>
</tr>
<tr>
<td><code>$table-&gt;unique('email');</code></td>
<td>添加唯一索引</td>
</tr>
<tr>
<td><code>$table-&gt;index('state');</code></td>
<td>添加普通索引</td>
</tr>
<tr>
<td><code>$table-&gt;spatialIndex('location');</code></td>
<td>添加空间索引（ SQLite 除外）</td>
</tr>
</tbody>
</table>
<h4>索引长度 &amp; MySQL / MariaDB</h4>
<p>Laravel 默认使用 <code>utf8mb4</code> 字符，它支持在数据库中存储「emojis」。如果你是在版本低于5.7.7 的 MySQL release 或者版本低于10.2.2 的 MariaDB release 上创建索引，那就需要你手动配置迁移生成的默认字符串长度。即在 <code>AppServiceProvider</code> 中调用 <code>Schema::defaultStringLength</code> 方法来配置它：</p>
<pre><code>use Illuminate\Support\Facades\Schema;

/**
 * 引导任何应用程序服务
 *
 * @return void
 */
public function boot()
{
    Schema::defaultStringLength(191);
}</code></pre>
<p>或者，你可以开启数据库的 <code>innodb_large_prefix</code> 选项，至于如何正确开启，请自行查阅数据库文档。</p>
<p><a name="dropping-indexes"></a></p>
<h3>删除索引</h3>
<p>若要移除索引，则必须指定索引的名称。Laravel 默认会自动给索引分配合理的名称。其将数据表名称、索引的字段名称及索引类型简单地连接在了一起。举例如下：</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$table-&gt;dropPrimary('users_id_primary');</code></td>
<td>从「users」表中删除主键。</td>
</tr>
<tr>
<td><code>$table-&gt;dropUnique('users_email_unique');</code></td>
<td>从「users」表中删除唯一索引。</td>
</tr>
<tr>
<td><code>$table-&gt;dropIndex('geo_state_index');</code></td>
<td>从「geo」表中删除基本索引。</td>
</tr>
<tr>
<td><code>$table-&gt;dropSpatialIndex('geo_location_spatialindex');</code></td>
<td>从「geo」表中删除空间索引（SQLite除外）。</td>
</tr>
</tbody>
</table>
<p>如果将字段数组传递给 <code>dropIndex</code> 方法，会删除根据表名、字段和键类型生成的索引名称：</p>
<pre><code>Schema::table('geo', function (Blueprint $table) {
    $table-&gt;dropIndex(['state']); // 移除索引 'geo_state_index'
});</code></pre>
<p><a name="foreign-key-constraints"></a></p>
<h3>外键约束</h3>
<p>Laravel 还支持创建用于在数据库层中的强制引用完整性的外键约束。例如，让我们在 <code>posts</code> 表上定义一个引用 <code>users</code> 表的 <code>id</code> 字段的 <code>user_id</code> 字段：</p>
<pre><code>Schema::table('posts', function (Blueprint $table) {
    $table-&gt;integer('user_id')-&gt;unsigned();

    $table-&gt;foreign('user_id')-&gt;references('id')-&gt;on('users');
});</code></pre>
<p>还可以为约束的「on delete」和「on update」属性指定所需的操作：</p>
<pre><code>$table-&gt;foreign('user_id')
      -&gt;references('id')-&gt;on('users')
      -&gt;onDelete('cascade');</code></pre>
<p>你可以使用 <code>dropForeign</code> 方法删除外键。外键约束采用的命名方式与索引相同。即，将数据表名称和约束的字段连接起来，接着加上「_foreign」后缀：</p>
<pre><code>$table-&gt;dropForeign('posts_user_id_foreign');</code></pre>
<p>或者，你也可以传递一个字段数组，在删除的时候会按照约定自动转换为对应的外键名称：</p>
<pre><code>$table-&gt;dropForeign(['user_id']);</code></pre>
<p>你可以在迁移文件里使用以下方法来开启或关闭外键约束：</p>
<pre><code>Schema::enableForeignKeyConstraints();

Schema::disableForeignKeyConstraints();</code></pre>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-xl-2" id="toc-list">
        <ul></ul>
    </div>
</div>    </div>
</div>
<span id="back-top">
<svg width="20" height="20" fill="currentColor">
    <use xlink:href="/css/bootstrap-icons.svg#chevron-up"/>
</svg>
</span>
 
<script>
    // 浏览量统计
    $(function () {
        let formdata = new FormData();
        formdata.append('_token', '');
        formdata.append('id', 191);
        $.ajax({
            url: $(".sticky-top .navbar-brand").attr('href') + "/api/doc/clicks",
            type: 'POST',
            data: formdata,
            processData: false,
            contentType: false
        });
    });
    // aside-hidden
    $(function () {
        $('#aside-hidden').on('click', function () {
            $('.aside').toggle(0, function () {
                if ($(this).is(':visible')) {
                    $('.aside-middle').removeClass('col-md-12 col-lg-12').addClass('col-md-9 col-lg-10');
                } else {
                    $('.aside-middle').removeClass('col-md-9 col-lg-10').addClass('col-md-12 col-lg-12');
                }
            });
        });
    });
</script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?1522d01c436f59ddc8389f25bfa9d53e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>