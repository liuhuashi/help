<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"> 
    <meta name="csrf-token" content=""> 
    <title>msg_send - 开发帮助文档</title> 
    <meta name="keyword" content="function.msg-send"> 
    <meta name="description" content="function.msg-send"> 
    <meta name="author" content="Moments"> 
    <link href="/favicon.ico" rel="shortcut icon"> 
    <link href="/css/blog.css" rel="stylesheet"> 
    <script src="/js/blog.js"></script> 
</head>
<body>
<header class="sticky-top">
    <nav class="navbar navbar-expand navbar-dark bg-secondary justify-content-between text-uppercase">
        <div class="navbar-nav" style="overflow:hidden;">
            <a class="navbar-brand" href="https://help.pythonschool.com">
                <span class="d-md-none">
                    <svg class="text-warning" width="24" height="24" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#emoji-sunglasses"/>
                    </svg>
                </span>
                <span class="d-none d-md-flex">开发帮助文档</span>
            </a>
            <div class="navbar-nav-scroll" style="overflow: hidden;">
                <ul class="navbar-nav text-nowrap pb-4" style="overflow:auto;">
                                            <li class="nav-item">
                            <a class="nav-link" href="/docs/laravel/index.html">laravel</a>
                        </li>
                                            <li class="nav-item">
                            <a class="nav-link active" href="/docs/php/index.html">php</a>
                        </li>
                                    </ul>
            </div>
        </div>
        <div class="d-inline-flex">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/liuhuashi">
                        <svg class="text-light" width="24" height="24" fill="currentColor">
                            <use xlink:href="/css/bootstrap-icons.svg#github"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<div class="container-fluid">
    <div id="aside-hidden" class="position-fixed" style="left:0;top: 58px;cursor:pointer;z-index: 10000;">
        <svg class="align-text-bottom text-warning" width="16" height="16" fill="currentColor" stroke="currentColor" stroke-width="1">
            <use xlink:href="/css/bootstrap-icons.svg#arrow-left-square"/>
        </svg>
    </div>
    <div class="row">
        <div class="aside col-md-3 col-lg-2 border-right shadow position-sticky" style="overflow:auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
    <form class="row border-bottom p-3 bg-white sticky-top">
        <input id="search-version" class="form-control" data-version="578" type="search" placeholder="英文逗号分隔,分词搜索">
    </form>
    <ul class="nav navbar-nav nav-pills flex-column pt-2 figure-caption">
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.ftok.html" title="ftok">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    ftok
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.msg-get-queue.html" title="msg_get_queue">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    msg_get_queue
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.msg-queue-exists.html" title="msg_queue_exists">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    msg_queue_exists
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.msg-receive.html" title="msg_receive">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    msg_receive
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.msg-remove-queue.html" title="msg_remove_queue">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    msg_remove_queue
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.msg-send.html" title="msg_send">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    msg_send
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.msg-set-queue.html" title="msg_set_queue">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    msg_set_queue
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.msg-stat-queue.html" title="msg_stat_queue">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    msg_stat_queue
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.sem-acquire.html" title="sem_acquire">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    sem_acquire
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.sem-get.html" title="sem_get">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    sem_get
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.sem-release.html" title="sem_release">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    sem_release
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.sem-remove.html" title="sem_remove">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    sem_remove
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.shm-attach.html" title="shm_attach">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    shm_attach
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.shm-detach.html" title="shm_detach">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    shm_detach
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.shm-get-var.html" title="shm_get_var">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    shm_get_var
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.shm-has-var.html" title="shm_has_var">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    shm_has_var
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.shm-put-var.html" title="shm_put_var">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    shm_put_var
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.shm-remove-var.html" title="shm_remove_var">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    shm_remove_var
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/function.shm-remove.html" title="shm_remove">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    shm_remove
                </a>
            </li>
            </ul>
</div>        <div class="aside-middle col-md-9 col-lg-10 row">
    <div class="col-md-9 col-xl-10" style="overflow: auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
        <div class="container main-h4-1">
            <div class="page-content">
                <div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.msg-remove-queue.html">« msg_remove_queue</a></li>
      <li style="float: right;"><a href="function.msg-set-queue.html">msg_set_queue »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="documentation.html">PHP Manual</a></li>
    <li><a href="ref.sem.html">Semaphore 函数</a></li>
    <li>Send a message to a message queue</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.msg-send" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">msg_send</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.3.0, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">msg_send</span> — <span class="dc-title">Send a message to a message queue</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.msg-send-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>msg_send</strong></span>
    ( <span class="methodparam"><span class="type"><span class="type SysvMessageQueue">SysvMessageQueue</span></span> <code class="parameter">$queue</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$message_type</code></span>
   , <span class="methodparam"><span class="type"><span class="type">string</span>|<span class="type">int</span>|<span class="type">float</span>|<span class="type">bool</span></span> <code class="parameter">$message</code></span>
   , <span class="methodparam"><span class="type">bool</span> <code class="parameter">$serialize</code><span class="initializer"> = <strong><code>true</code></strong></span></span>
   , <span class="methodparam"><span class="type">bool</span> <code class="parameter">$blocking</code><span class="initializer"> = <strong><code>true</code></strong></span></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter reference">&amp;$error_code</code><span class="initializer"> = <strong><code>null</code></strong></span></span>
   ) : <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>msg_send()</strong></span> sends a <code class="parameter">message</code> of type
   <code class="parameter">message_type</code> (which MUST be greater than 0) to
   the message queue specified by <code class="parameter">queue</code>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.msg-send-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">queue</code></dt>

     <dd>

      <p class="para">
       The message queue.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">message_type</code></dt>

     <dd>

      <p class="para">
       The type of the message (MUST be greater than 0)
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">message</code></dt>

     <dd>

      <p class="para">
       The body of the message.
      </p>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       </p><p class="para">
        If <code class="parameter">serialize</code> set to <strong><code>false</code></strong> is supplied,
        MUST be of type: <span class="type">string</span>, <span class="type">int</span>, <span class="type">float</span> 
        or <span class="type">bool</span>. In other case a warning will be issued.
       </p>
      </blockquote>
     </dd>

    
    
     <dt>
<code class="parameter">serialize</code></dt>

     <dd>

      <p class="para">
       The optional <code class="parameter">serialize</code> controls how the
       <code class="parameter">message</code> is sent.  <code class="parameter">serialize</code>
       defaults to <strong><code>true</code></strong> which means that the <code class="parameter">message</code> is
       serialized using the same mechanism as the session module before being
       sent to the queue.  This allows complex arrays and objects to be sent to
       other PHP scripts, or if you are using the WDDX serializer, to any WDDX
       compatible client.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">blocking</code></dt>

     <dd>

      <p class="para">
       If the message is too large to fit in the queue, your script will wait
       until another process reads messages from the queue and frees enough
       space for your message to be sent.
       This is called blocking; you can prevent blocking by setting the
       optional <code class="parameter">blocking</code> parameter to <strong><code>false</code></strong>, in which
       case <span class="function"><strong>msg_send()</strong></span> will immediately return <strong><code>false</code></strong> if the
       message is too big for the queue, and set the optional
       <code class="parameter">error_code</code> to <strong><code>MSG_EAGAIN</code></strong>,
       indicating that you should try to send your message again a little
       later on.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">error_code</code></dt>

     <dd>

      <p class="para">
       If the function fails, the optional errorcode will be set to the value of the system errno variable.
      </p>
     </dd>

    
   </dl>

  
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.msg-send-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>true</code></strong>， 或者在失败时返回 <strong><code>false</code></strong>。
  </p>
  <p class="para">
   Upon successful completion the message queue data structure is updated as
   follows: <code class="parameter">msg_lspid</code> is set to the process-ID of the
   calling process, <code class="parameter">msg_qnum</code> is incremented by 1 and
   <code class="parameter">msg_stime</code> is set to the current time.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.msg-send-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>8.0.0</td>
       <td>
        <code class="parameter">queue</code> expects a <strong class="classname">SysvMessageQueue</strong>
        instance now; previously, a <span class="type">resource</span> was expected.
       </td>
      </tr>

     </tbody>
    
   </table>

  
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.msg-send-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.msg-remove-queue.html" class="function" rel="rdfs-seeAlso">msg_remove_queue()</a> - Destroy a message queue</span></li>
    <li class="member"><span class="function"><a href="function.msg-receive.html" class="function" rel="rdfs-seeAlso">msg_receive()</a> - Receive a message from a message queue</span></li>
    <li class="member"><span class="function"><a href="function.msg-stat-queue.html" class="function" rel="rdfs-seeAlso">msg_stat_queue()</a> - Returns information from the message queue data structure</span></li>
    <li class="member"><span class="function"><a href="function.msg-set-queue.html" class="function" rel="rdfs-seeAlso">msg_set_queue()</a> - Set information in the message queue data structure</span></li>
   </ul>
  
 </div>
  

</div></div></div>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-xl-2" id="toc-list">
        <ul></ul>
    </div>
</div>    </div>
</div>
<span id="back-top">
<svg width="20" height="20" fill="currentColor">
    <use xlink:href="/css/bootstrap-icons.svg#chevron-up"/>
</svg>
</span>
 
<script>
    // 浏览量统计
    $(function () {
        let formdata = new FormData();
        formdata.append('_token', '');
        formdata.append('id', 4167);
        $.ajax({
            url: $(".sticky-top .navbar-brand").attr('href') + "/api/doc/clicks",
            type: 'POST',
            data: formdata,
            processData: false,
            contentType: false
        });
    });
    // aside-hidden
    $(function () {
        $('#aside-hidden').on('click', function () {
            $('.aside').toggle(0, function () {
                if ($(this).is(':visible')) {
                    $('.aside-middle').removeClass('col-md-12 col-lg-12').addClass('col-md-9 col-lg-10');
                } else {
                    $('.aside-middle').removeClass('col-md-9 col-lg-10').addClass('col-md-12 col-lg-12');
                }
            });
        });
    });
</script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?1522d01c436f59ddc8389f25bfa9d53e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>