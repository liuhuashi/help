<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"> 
    <meta name="csrf-token" content=""> 
    <title>预定义常量 - 开发帮助文档</title> 
    <meta name="keyword" content="mysqlnd-qc.constants"> 
    <meta name="description" content="mysqlnd-qc.constants"> 
    <meta name="author" content="Moments"> 
    <link href="/favicon.ico" rel="shortcut icon"> 
    <link href="/css/blog.css" rel="stylesheet"> 
    <script src="/js/blog.js"></script> 
</head>
<body>
<header class="sticky-top">
    <nav class="navbar navbar-expand navbar-dark bg-secondary justify-content-between text-uppercase">
        <div class="navbar-nav" style="overflow:hidden;">
            <a class="navbar-brand" href="https://help.pythonschool.com">
                <span class="d-md-none">
                    <svg class="text-warning" width="24" height="24" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#emoji-sunglasses"/>
                    </svg>
                </span>
                <span class="d-none d-md-flex">开发帮助文档</span>
            </a>
            <div class="navbar-nav-scroll" style="overflow: hidden;">
                <ul class="navbar-nav text-nowrap pb-4" style="overflow:auto;">
                                            <li class="nav-item">
                            <a class="nav-link" href="/docs/laravel/index.html">laravel</a>
                        </li>
                                            <li class="nav-item">
                            <a class="nav-link active" href="/docs/php/index.html">php</a>
                        </li>
                                    </ul>
            </div>
        </div>
        <div class="d-inline-flex">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/liuhuashi">
                        <svg class="text-light" width="24" height="24" fill="currentColor">
                            <use xlink:href="/css/bootstrap-icons.svg#github"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<div class="container-fluid">
    <div id="aside-hidden" class="position-fixed" style="left:0;top: 58px;cursor:pointer;z-index: 10000;">
        <svg class="align-text-bottom text-warning" width="16" height="16" fill="currentColor" stroke="currentColor" stroke-width="1">
            <use xlink:href="/css/bootstrap-icons.svg#arrow-left-square"/>
        </svg>
    </div>
    <div class="row">
        <div class="aside col-md-3 col-lg-2 border-right shadow position-sticky" style="overflow:auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
    <form class="row border-bottom p-3 bg-white sticky-top">
        <input id="search-version" class="form-control" data-version="836" type="search" placeholder="英文逗号分隔,分词搜索">
    </form>
    <ul class="nav navbar-nav nav-pills flex-column pt-2 figure-caption">
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/intro.mysqlnd-qc.html" title="简介">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    简介
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/mysqlnd-qc.changes.html" title="Change History">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Change History
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/mysqlnd-qc.constants.html" title="预定义常量">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    预定义常量
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/mysqlnd-qc.quickstart.html" title="Quickstart and Examples">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Quickstart and Examples
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/mysqlnd-qc.setup.html" title="安装／配置">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    安装／配置
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/php/ref.mysqlnd-qc.html" title="mysqlnd_qc 函数">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    mysqlnd_qc 函数
                </a>
            </li>
            </ul>
</div>        <div class="aside-middle col-md-9 col-lg-10 row">
    <div class="col-md-9 col-xl-10" style="overflow: auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
        <div class="container main-h4-1">
            <div class="page-content">
                <div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mysqlnd-qc.configuration.html">« 运行时配置</a></li>
      <li style="float: right;"><a href="ref.mysqlnd-qc.html">mysqlnd_qc 函数 »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="documentation.html">PHP Manual</a></li>
    <li><a href="book.mysqlnd-qc.html">mysqlnd_qc</a></li>
    <li>预定义常量</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mysqlnd-qc.constants" class="appendix">
 <h1>预定义常量</h1>

 <p class="simpara">下列常量由此扩展定义，且仅在此扩展编译入 PHP 或在运行时动态载入时可用。</p>
 <p class="para">
  <em class="emphasis">SQL hint related</em>
 </p>
 <p class="para">
  </p><div class="example" id="example-1855">
   <p><strong>示例 #1 Using SQL hint constants</strong></p>
   <div class="example-contents"><p>
    The query cache is controlled by SQL hints. SQL hints are used to enable and
    disable caching. SQL hints can be used to set the
    <code class="literal">TTL</code> of a query.
   </p></div>
   <div class="example-contents"><p>
    The SQL hints recognized by the query cache can be manually changed at
    compile time. This makes it possible to use
    <code class="literal">mysqlnd_qc</code> in environments in which the default
    SQL hints are already taken and interpreted by other systems. Therefore
    it is recommended to use the SQL hint string constants instead of
    manually adding the default SQL hints to the query string.
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/* Use constants for maximum portability */<br></span><span style="color: #0000BB">$query </span><span style="color: #007700">= </span><span style="color: #DD0000">"/*" </span><span style="color: #007700">. </span><span style="color: #0000BB">MYSQLND_QC_ENABLE_SWITCH </span><span style="color: #007700">. </span><span style="color: #DD0000">"*/SELECT id FROM test"</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/* Valid but less portable: default TTL */<br></span><span style="color: #0000BB">$query </span><span style="color: #007700">= </span><span style="color: #DD0000">"/*qc=on*/SELECT id FROM test"</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">/* Valid but less portable: per statement TTL */<br></span><span style="color: #0000BB">$query </span><span style="color: #007700">= </span><span style="color: #DD0000">"/*qc=on*//*qc_ttl=5*/SELECT id FROM test"</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"MYSQLND_QC_ENABLE_SWITCH: %s\n"</span><span style="color: #007700">, </span><span style="color: #0000BB">MYSQLND_QC_ENABLE_SWITCH</span><span style="color: #007700">);<br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"MYSQLND_QC_DISABLE_SWITCH: %s\n"</span><span style="color: #007700">, </span><span style="color: #0000BB">MYSQLND_QC_DISABLE_SWITCH</span><span style="color: #007700">);<br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"MYSQLND_QC_TTL_SWITCH: %s\n"</span><span style="color: #007700">, </span><span style="color: #0000BB">MYSQLND_QC_TTL_SWITCH</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程会输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
MYSQLND_QC_ENABLE_SWITCH: qc=on
MYSQLND_QC_DISABLE_SWITCH: qc=off
MYSQLND_QC_TTL_SWITCH: qc_ttl=

</pre></div>
   </div>

  </div>
 

 <p class="para">
  </p><dl>

   
    <dt id="constant.mysqlnd-qc-enable-switch">
     <strong><code>MYSQLND_QC_ENABLE_SWITCH</code></strong>
     (<span class="type">string</span>)
    </dt>

    <dd>

     <span class="simpara">
      SQL hint used to enable caching of a query.
     </span>
    </dd>

   
   
    <dt id="constant.mysqlnd-qc-disable-switch">
     <strong><code>MYSQLND_QC_DISABLE_SWITCH</code></strong>
     (<span class="type">string</span>)
    </dt>

    <dd>

     <span class="simpara">
      SQL hint used to disable caching of a query if
      <code class="literal">mysqlnd_qc.cache_by_default = 1</code>.
     </span>
    </dd>

   
   
    <dt id="constant.mysqlnd-qc-ttl-switch">
     <strong><code>MYSQLND_QC_TTL_SWITCH</code></strong>
     (<span class="type">string</span>)
    </dt>

    <dd>

     <span class="simpara">
      SQL hint used to set the TTL of a result set.
     </span>
    </dd>

   
   
    <dt id="constant.mysqlnd-qc-server-id">
     <strong><code>MYSQLND_QC_SERVER_ID_SWITCH</code></strong>
     (<span class="type">string</span>)
    </dt>

    <dd>

     <span class="simpara">
      This SQL hint should not be used in general.
     </span>
     <span class="simpara">
      It is needed by <a href="book.mysqlnd-ms.html" class="link">PECL/mysqlnd_ms</a>
      to group cache entries for one statement
      but originating from different physical connections. If the
      hint is used connection settings such as user, hostname and charset
      are not considered for generating a cache key of a query.
      Instead the given value and the query string are used as input
      to the hashing function that generates the key.
     </span>
     <span class="simpara">
      PECL/mysqlnd_ms may, if instructed, cache results from
      MySQL Replication slaves. Because it can hold many connections
      to the slave the cache key shall not be formed from the user,
      hostname or other settings that may vary for the various slave
      connections. Instead, PECL/mysqlnd_ms provides an identifier
      which refers to the group of slave connections that shall be enabled
      to share cache entries no matter which physical slave connection was
      to generate the cache entry.
     </span>
     <span class="simpara">
      Use of this feature outside of PECL/mysqlnd_ms is not recommended.
     </span>
    </dd>

   
  </dl>

 
 <p class="para">
  <em class="emphasis"><span class="function"><a href="function.mysqlnd-qc-set-cache-condition.html" class="function">mysqlnd_qc_set_cache_condition()</a></span> related</em>
 </p>
 <p class="para">
  </p><div class="example" id="example-1856">
   <p><strong>示例 #2 Example <span class="function"><a href="function.mysqlnd-qc-set-cache-condition.html" class="function">mysqlnd_qc_set_cache_condition()</a></span> usage</strong></p>
   <div class="example-contents"><p>
    The function <span class="function"><a href="function.mysqlnd-qc-set-cache-condition.html" class="function">mysqlnd_qc_set_cache_condition()</a></span> allows setting conditions
    for automatic caching of statements which don't begin with the SQL hints
    necessary to manually enable caching.
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/* Cache all accesses to tables with the name "new%" in schema/database "db_example" for 1 second */<br></span><span style="color: #007700">if (!</span><span style="color: #0000BB">mysqlnd_qc_set_cache_condition</span><span style="color: #007700">(</span><span style="color: #0000BB">MYSQLND_QC_CONDITION_META_SCHEMA_PATTERN</span><span style="color: #007700">, </span><span style="color: #DD0000">"db_example.new%"</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">)) {<br>  die(</span><span style="color: #DD0000">"Failed to set cache condition!"</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">$mysqli </span><span style="color: #007700">= new </span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"host"</span><span style="color: #007700">, </span><span style="color: #DD0000">"user"</span><span style="color: #007700">, </span><span style="color: #DD0000">"password"</span><span style="color: #007700">, </span><span style="color: #DD0000">"db_example"</span><span style="color: #007700">, </span><span style="color: #DD0000">"port"</span><span style="color: #007700">);<br></span><span style="color: #FF8000">/* cached although no SQL hint given  */<br></span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT id, title FROM news"</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$pdo_mysql </span><span style="color: #007700">= new </span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysql:host=host;dbname=db_example;port=port"</span><span style="color: #007700">, </span><span style="color: #DD0000">"user"</span><span style="color: #007700">, </span><span style="color: #DD0000">"password"</span><span style="color: #007700">);<br></span><span style="color: #FF8000">/* not cached: no SQL hint, no pattern match */<br></span><span style="color: #0000BB">$pdo_mysql</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT id, title FROM latest_news"</span><span style="color: #007700">);<br></span><span style="color: #FF8000">/* cached: TTL 1 second, pattern match */<br></span><span style="color: #0000BB">$pdo_mysql</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT id, title FROM news"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 
 <p class="para">
  </p><dl>

   
    <dt id="constant.mysqlnd-qc-condition-meta-schema-pattern">
     <strong><code>MYSQLND_QC_CONDITION_META_SCHEMA_PATTERN</code></strong>
     (<span class="type">int</span>)
    </dt>

    <dd>

     <span class="simpara">
      Used as a parameter of <span class="function"><a href="function.mysqlnd-qc-set-cache-condition.html" class="function">mysqlnd_qc_set_cache_condition()</a></span>
      to set conditions for schema based automatic caching.
     </span>
    </dd>

   
  </dl>

 
 <p class="para">
  <em class="emphasis">Other</em>
 </p>
 <p class="para">
  The plugin version number can be obtained using either
  <strong><code>MYSQLND_QC_VERSION</code></strong>, which is the string representation 
  of the numerical version number, or <strong><code>MYSQLND_QC_VERSION_ID</code></strong>, 
  which is an integer such as 10000. Developers can calculate the version number 
  as follows.
 </p>
 <p class="para">
   </p><table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Version (part)</th>
      <th>Example</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>Major*10000</td>
      <td>1*10000 = 10000</td>
     </tr>

     <tr>
      <td>Minor*100</td>
      <td>0*100 = 0</td>
     </tr>

     <tr>
      <td>Patch</td>
      <td>0 = 0</td>
     </tr>

     <tr>
      <td>MYSQLND_QC_VERSION_ID</td>
      <td>10000</td>
     </tr>

    </tbody>
   
  </table>

 
 <p class="para">
  </p><dl>

   
    <dt id="constant.mysqlnd-qc-version">
     <strong><code>MYSQLND_QC_VERSION</code></strong>
     (<span class="type">string</span>)
    </dt>

    <dd>

     <span class="simpara">
      Plugin version string, for example, <q class="quote">1.0.0-prototype</q>.
     </span>
    </dd>

   
  </dl>

 
 <p class="para">
  </p><dl>

   
    <dt id="constant.mysqlnd-qc-version-id">
     <strong><code>MYSQLND_QC_VERSION_ID</code></strong>
     (<span class="type">int</span>)
    </dt>

    <dd>

     <span class="simpara">
      Plugin version number, for example, 10000.
     </span>
    </dd>

   
  </dl>

 
</div>
</div></div>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-xl-2" id="toc-list">
        <ul></ul>
    </div>
</div>    </div>
</div>
<span id="back-top">
<svg width="20" height="20" fill="currentColor">
    <use xlink:href="/css/bootstrap-icons.svg#chevron-up"/>
</svg>
</span>
 
<script>
    // 浏览量统计
    $(function () {
        let formdata = new FormData();
        formdata.append('_token', '');
        formdata.append('id', 8309);
        $.ajax({
            url: $(".sticky-top .navbar-brand").attr('href') + "/api/doc/clicks",
            type: 'POST',
            data: formdata,
            processData: false,
            contentType: false
        });
    });
    // aside-hidden
    $(function () {
        $('#aside-hidden').on('click', function () {
            $('.aside').toggle(0, function () {
                if ($(this).is(':visible')) {
                    $('.aside-middle').removeClass('col-md-12 col-lg-12').addClass('col-md-9 col-lg-10');
                } else {
                    $('.aside-middle').removeClass('col-md-9 col-lg-10').addClass('col-md-12 col-lg-12');
                }
            });
        });
    });
</script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?1522d01c436f59ddc8389f25bfa9d53e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>