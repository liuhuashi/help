<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"> 
    <meta name="csrf-token" content=""> 
    <title>表单验证 - 开发帮助文档</title> 
    <meta name="keyword" content="validation"> 
    <meta name="description" content="validation"> 
    <meta name="author" content="Moments"> 
    <link href="/favicon.ico" rel="shortcut icon"> 
    <link href="/css/blog.css" rel="stylesheet"> 
    <script src="/js/blog.js"></script> 
</head>
<body>
<header class="sticky-top">
    <nav class="navbar navbar-expand navbar-dark bg-secondary justify-content-between text-uppercase">
        <div class="navbar-nav" style="overflow:hidden;">
            <a class="navbar-brand" href="https://help.pythonschool.com">
                <span class="d-md-none">
                    <svg class="text-warning" width="24" height="24" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#emoji-sunglasses"/>
                    </svg>
                </span>
                <span class="d-none d-md-flex">开发帮助文档</span>
            </a>
            <div class="navbar-nav-scroll" style="overflow: hidden;">
                <ul class="navbar-nav text-nowrap pb-4" style="overflow:auto;">
                                            <li class="nav-item">
                            <a class="nav-link active" href="/docs/laravel/index.html">laravel</a>
                        </li>
                                            <li class="nav-item">
                            <a class="nav-link" href="/docs/php/index.html">php</a>
                        </li>
                                    </ul>
            </div>
        </div>
        <div class="d-inline-flex">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/liuhuashi">
                        <svg class="text-light" width="24" height="24" fill="currentColor">
                            <use xlink:href="/css/bootstrap-icons.svg#github"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<div class="container-fluid">
    <div id="aside-hidden" class="position-fixed" style="left:0;top: 58px;cursor:pointer;z-index: 10000;">
        <svg class="align-text-bottom text-warning" width="16" height="16" fill="currentColor" stroke="currentColor" stroke-width="1">
            <use xlink:href="/css/bootstrap-icons.svg#arrow-left-square"/>
        </svg>
    </div>
    <div class="row">
        <div class="aside col-md-3 col-lg-2 border-right shadow position-sticky" style="overflow:auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
    <form class="row border-bottom p-3 bg-white sticky-top">
        <input id="search-version" class="form-control" data-version="7" type="search" placeholder="英文逗号分隔,分词搜索">
    </form>
    <ul class="nav navbar-nav nav-pills flex-column pt-2 figure-caption">
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/artisan.html" title="Artisan 命令行">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Artisan 命令行
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/authentication.html" title="用户认证">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    用户认证
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/authorization.html" title="用户授权">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    用户授权
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/blade.html" title="Blade 模板">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Blade 模板
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/broadcasting.html" title="广播系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    广播系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/cache.html" title="缓存系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    缓存系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/collections.html" title="集合">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    集合
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/configuration.html" title="Configuration">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Configuration
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/console-tests.html" title="控制台测试">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    控制台测试
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/container.html" title="服务容器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    服务容器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/contracts.html" title="契约">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    契约
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/contributions.html" title="贡献导引">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    贡献导引
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/controllers.html" title="Controllers">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Controllers
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/csrf.html" title="CSRF 保护">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    CSRF 保护
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/database-testing.html" title="数据库测试">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库测试
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/database.html" title="数据库: 入门">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库: 入门
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/deployment.html" title="部署">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    部署
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/documentation.html" title="前言">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    前言
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/dusk.html" title="Laravel Dusk">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Dusk
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-collections.html" title="Eloquent: 集合">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 集合
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-mutators.html" title="Eloquent: 修改器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 修改器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-relationships.html" title="Eloquent: 关联">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 关联
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-resources.html" title="Eloquent: API 资源">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: API 资源
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-serialization.html" title="Eloquent: 序列化">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 序列化
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent.html" title="Eloquent: 入门">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 入门
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/encryption.html" title="加密解密">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    加密解密
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/envoy.html" title="Laravel Envoy">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Envoy
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/errors.html" title="错误处理">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    错误处理
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/events.html" title="事件系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    事件系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/facades.html" title="Facades">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Facades
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/filesystem.html" title="File Storage">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    File Storage
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/frontend.html" title="JavaScript &amp; CSS 脚手架">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    JavaScript &amp; CSS 脚手架
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/hashing.html" title="哈希加密">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    哈希加密
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/helpers.html" title="辅助函数">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    辅助函数
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/homestead.html" title="Laravel Homestead">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Homestead
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/horizon.html" title="Laravel Horizon">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Horizon
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/http-client.html" title="HTTP 客户端">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP 客户端
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/http-tests.html" title="HTTP Tests">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP Tests
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/installation.html" title="安装">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    安装
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/lifecycle.html" title="请求生命周期">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    请求生命周期
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/localization.html" title="本地化">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    本地化
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/logging.html" title="日志">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    日志
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/mail.html" title="邮件发送">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    邮件发送
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/middleware.html" title="中间件">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    中间件
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/migrations.html" title="数据库：迁移">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库：迁移
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/mix.html" title="编辑资源 (Mix)">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    编辑资源 (Mix)
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/mocking.html" title="Mocking">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Mocking
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/notifications.html" title="消息通知">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    消息通知
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/packages.html" title="Package Development">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Package Development
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/pagination.html" title="数据库: 分页">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库: 分页
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/passport.html" title="Laravel Passport">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Passport
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/passwords.html" title="重置密码">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    重置密码
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/providers.html" title="服务提供者">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    服务提供者
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/queries.html" title="数据库：查询构造器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库：查询构造器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/queues.html" title="队列">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    队列
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/redis.html" title="Redis">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Redis
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/releases.html" title="发行说明">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    发行说明
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/requests.html" title="HTTP 请求">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP 请求
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/responses.html" title="HTTP Responses">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP Responses
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/routing.html" title="路由">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    路由
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/sail.html" title="Laravel Sail">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Sail
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/sanctum.html" title="Laravel Sanctum">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Sanctum
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/scheduling.html" title="任务调度">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    任务调度
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/scout.html" title="Laravel Scout">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Scout
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/seeding.html" title="数据库：填充">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库：填充
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/session.html" title="HTTP 会话机制">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP 会话机制
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/socialite.html" title="Laravel 社会化登录">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 社会化登录
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/structure.html" title="目录结构">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    目录结构
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/telescope.html" title="Laravel Telescope">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Telescope
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/testing.html" title="测试：入门指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    测试：入门指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/upgrade.html" title="升级指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    升级指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/urls.html" title="生成 URL">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    生成 URL
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/valet.html" title="Laravel Valet">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Valet
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/validation.html" title="表单验证">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    表单验证
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/verification.html" title="Email 认证">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Email 认证
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/views.html" title="视图">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    视图
                </a>
            </li>
            </ul>
</div>        <div class="aside-middle col-md-9 col-lg-10 row">
    <div class="col-md-9 col-xl-10" style="overflow: auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
        <div class="container main-h4-1">
            <div class="page-content">
                <h1>表单验证</h1>
<ul>
<li><a href="#introduction">简介</a></li>
<li><a href="#validation-quickstart">快速验证</a>
<ul>
<li><a href="#quick-defining-the-routes">定义路由</a></li>
<li><a href="#quick-creating-the-controller">创建控制器</a></li>
<li><a href="#quick-writing-the-validation-logic">编写验证逻辑</a></li>
<li><a href="#quick-displaying-the-validation-errors">显示验证的错误信息</a></li>
<li><a href="#a-note-on-optional-fields">可选字段的注意事项</a></li>
</ul></li>
<li><a href="#form-request-validation">表单请求验证</a>
<ul>
<li><a href="#creating-form-requests">创建表单请求验证</a></li>
<li><a href="#authorizing-form-requests">表单请求认证授权</a></li>
<li><a href="#customizing-the-error-messages">自定义验证错误信息</a></li>
<li><a href="#customizing-the-validation-attributes">自定义验证属性</a></li>
<li><a href="#prepare-input-for-validation">准备验证数据</a></li>
</ul></li>
<li><a href="#manually-creating-validators">手动创建验证器</a>
<ul>
<li><a href="#automatic-redirection">自动重定向</a></li>
<li><a href="#named-error-bags">命名错误信息包</a></li>
<li><a href="#after-validation-hook">验证后的钩子</a></li>
</ul></li>
<li><a href="#working-with-error-messages">处理错误信息</a>
<ul>
<li><a href="#custom-error-messages">自定义验证错误信息</a></li>
</ul></li>
<li><a href="#available-validation-rules">可用的验证规则</a></li>
<li><a href="#conditionally-adding-rules">按条件添加验证规则</a></li>
<li><a href="#validating-arrays">对数组的验证</a></li>
<li><a href="#custom-validation-rules">自定义验证规则</a>
<ul>
<li><a href="#using-rule-objects">使用规则类</a></li>
<li><a href="#using-closures">使用闭包</a></li>
<li><a href="#using-extensions">使用扩展</a></li>
<li><a href="#implicit-extensions">隐式扩展</a></li>
</ul></li>
</ul>
<p><a name="introduction"></a></p>
<h2>简介</h2>
<p>Laravel 提供了几种不同的方法来验证传入应用程序的数据。 默认情况下，Laravel 的基类控制器使用了一个名为 <code>ValidatesRequests</code> 的 trait，它提供了一种方便的方法以使用各种强大的验证规则来验证传入的 HTTP 请求。</p>
<p><a name="validation-quickstart"></a></p>
<h2>快速验证</h2>
<p>为了了解 Laravel 强大的验证功能，我们先看一个表单验证并将错误展示给用户的完整示例。</p>
<p><a name="quick-defining-the-routes"></a></p>
<h3>定义路由</h3>
<p>首先，假设我们在 <code>routes/web.php</code> 路由文件中定义了下面这些路由：</p>
<pre><code>use App\Http\Controllers\PostController;

Route::get('post/create', [PostController::class, 'create']);

Route::post('post', [PostController::class, 'store']);</code></pre>
<p><code>GET</code> 路由会显示一个供用户创建新博客文章的表单，而 <code>POST</code> 路由会将新的博客文章存储到数据库中。</p>
<p><a name="quick-creating-the-controller"></a></p>
<h3>创建控制器</h3>
<p>接下来，让我们一起来看看处理这些路由的简单控制器。我们暂时留空了 <code>store</code> 方法。</p>
<pre><code>&lt;?php

namespace App\Http\Controllers;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

class PostController extends Controller
{
    /**
     * 显示创建博客文章的表单
     *
     * @return Response
     */
    public function create()
    {
        return view('post.create');
    }

    /**
     * 存储一篇新的博客文章
     *
     * @param  Request  $request
     * @return Response
     */
    public function store(Request $request)
    {
        // 验证并存储博客文章...
    }
}</code></pre>
<p><a name="quick-writing-the-validation-logic"></a></p>
<h3>编写验证逻辑</h3>
<p>现在我们开始在 <code>store</code> 方法中编写用来验证新的博客文章的逻辑代码。为此，我们将使用 <code>Illuminate\Http\Request</code> 类提供的 <code>validate</code> 方法。如果验证通过，你的代码会继续正常运行。如果验证失败，则会抛出异常，并自动将对应的错误响应返回给用户。 在传统 HTTP 请求下，会生成一个重定向响应， 而对于 AJAX 请求则会发送 JSON 响应。</p>
<p>为了深入理解 <code>validate</code> 方法，让我们接着回到 <code>store</code> 方法中：</p>
<pre><code>/**
 * 存储一篇新的博客文章
 *
 * @param  Request  $request
 * @return Response
 */
public function store(Request $request)
{
    $validatedData = $request-&gt;validate([
        'title' =&gt; 'required|unique:posts|max:255',
        'body' =&gt; 'required',
    ]);

    // 博客文章验证通过...
}</code></pre>
<p>如你所见，我们将所需的验证规则传递至 <code>validate</code> 方法中。另外再提醒一次，如果验证失败，会自动生成一个对应的响应。如果验证通过，那我们的控制器会继续正常运行。</p>
<p>或者，验证规则可以使用数组而不是单个 <code>|</code> 分隔的字符串：</p>
<pre><code>$validatedData = $request-&gt;validate([
    'title' =&gt; ['required', 'unique:posts', 'max:255'],
    'body' =&gt; ['required'],
]);</code></pre>
<p>你可以使用 <code>validateWithBag</code> 方法来验证请求，并将所有错误信息储存在一个 <a href="#named-error-bags">命名错误信息包</a> 中：</p>
<pre><code>$validatedData = $request-&gt;validateWithBag('post', [
    'title' =&gt; ['required', 'unique:posts', 'max:255'],
    'body' =&gt; ['required'],
]);</code></pre>
<h4>在首次验证失败时停止运行</h4>
<p>有时候我们希望某个字段在第一次验证失败后就停止运行验证规则，只需要将 <code>bail</code> 添加到规则中：</p>
<pre><code>$request-&gt;validate([
    'title' =&gt; 'bail|required|unique:posts|max:255',
    'body' =&gt; 'required',
]);</code></pre>
<p>在这个例子中，如果 <code>title</code> 字段没有通过 <code>unique</code> 规则，那么不会继续验证 <code>max</code> 规则。规则会按照分配时的顺序来验证。</p>
<h4>嵌套字段的说明</h4>
<p>如果你的 HTTP 请求包含「嵌套」参数（比如数组）， 你可以在验证规则中使用「点」语法来指定这些参数：</p>
<pre><code>$request-&gt;validate([
    'title' =&gt; 'required|unique:posts|max:255',
    'author.name' =&gt; 'required',
    'author.description' =&gt; 'required',
]);</code></pre>
<p>另外，如果你的字段名称包含点，则可以通过使用反斜杠将点转义，以防止将其解释为“点”语法：</p>
<pre><code>$request-&gt;validate([
    'title' =&gt; 'required|unique:posts|max:255',
    'v1\.0' =&gt; 'required',
]);</code></pre>
<p><a name="quick-displaying-the-validation-errors"></a></p>
<h3>显示验证错误信息</h3>
<p>那么，如果传入的请求参数未通过给定的验证规则呢？正如前面所提到的，Laravel 会自动将用户重定向到之前的位置。另外，所有的验证错误信息会自动存储到 <a href="/docs/laravel_8_zh/session.html#flash-data">闪存 session</a> 中。</p>
<p>再次提示，我们没有必要在 <code>GET</code> 路由中显式地绑定错误信息到视图中。这是因为 Laravel 会检查 session 数据中的错误，如果可用的话，将会自动将其绑定到视图中去。其中的 <code>$errors</code> 变量是 <code>Illuminate\Support\MessageBag</code> 的一个实例。要获取关于该对象更多的信息， <a href="#working-with-error-messages">请参阅这篇文档</a> 。</p>
<blockquote>
<p>技巧：<code>$errors</code> 由  <code>web</code> 中间件组提供的 <code>Illuminate\View\Middleware\ShareErrorsFromSession</code> 中间件绑定到视图中。<strong>当该中间件被应用后，<code>$errors</code> 变量在您的视图中总是可用的</strong>，因此您可以假设 <code>$errors</code> 变量总是被定义了且总是安全可用的。</p>
</blockquote>
<p>所以，在如下的例子中，当表单验证失败时，用户将被重定向到控制器的 <code>create</code> 方法中，我们可在视图中显示错误信息：</p>
<pre><code>&lt;!-- /resources/views/post/create.blade.php --&gt;

&lt;h1&gt;Create Post&lt;/h1&gt;

@if ($errors-&gt;any())
    &lt;div class="alert alert-danger"&gt;
        &lt;ul&gt;
            @foreach ($errors-&gt;all() as $error)
                &lt;li&gt;{{ $error }}&lt;/li&gt;
            @endforeach
        &lt;/ul&gt;
    &lt;/div&gt;
@endif

&lt;!-- Create Post Form --&gt;</code></pre>
<h4><code>@error</code> 指令</h4>
<p>您亦可使用 <code>@error</code> <a href="/docs/laravel_8_zh/blade.html">Blade</a> 指令方便地检查给定的属性是否存在验证错误信息。在 <code>@error</code> 指令中，您可以输出 <code>$message</code> 变量以显示错误信息：</p>
<pre><code>&lt;!-- /resources/views/post/create.blade.php --&gt;

&lt;label for="title"&gt;Post Title&lt;/label&gt;

&lt;input id="title" type="text" class="@error('title') is-invalid @enderror"&gt;

@error('title')
    &lt;div class="alert alert-danger"&gt;{{ $message }}&lt;/div&gt;
@enderror</code></pre>
<p><a name="a-note-on-optional-fields"></a></p>
<h3>关于可选字段的注意事项</h3>
<p>默认情况下， 在您的 Laravel 应用的全局中间件堆栈 <code>App\Http\Kernel</code> 类中包含了 <code>TrimStrings</code> 和 <code>ConvertEmptyStringsToNull</code> 中间件。因此，如果您不想让 <code>null</code> 被验证器标识为非法的话，您需要将「可选」字段标志为 <code>nullable</code> ：</p>
<pre><code>$request-&gt;validate([
    'title' =&gt; 'required|unique:posts|max:255',
    'body' =&gt; 'required',
    'publish_at' =&gt; 'nullable|date',
]);</code></pre>
<p>在上述例子中，我们指定了 <code>publish_at</code> 字段可以是空的或者是一个有效的日期格式。如果 <code>nullable</code> 修饰词没有被添加到规则定义中，验证器会将 <code>null</code> 视为无效的日期格式。</p>
<p><a name="quick-ajax-requests-and-validation"></a></p>
<h4>AJAX 请求和验证</h4>
<p>在上述例子中，我们使用传统的表单发送数据到应用。当然，许多应用可能使用 AJAX 来进行请求，此时， Laravel 不会生成重定向响应。取而代之的， Laravel 将会生成一个包含错误信息的 JSON 响应，该响应的 HTTP 状态码将被置为 422 。</p>
<p><a name="form-request-validation"></a></p>
<h2>验证表单请求</h2>
<p><a name="creating-form-requests"></a></p>
<h3>创建表单请求验证</h3>
<p>面对更复杂的情况，您可以创建一个「表单请求」来应对更复杂的验证逻辑。表单请求是一个包含了验证逻辑的自定义请求类。要创建一个表单请求类，请使用  <code>make:request</code> Artisan CLI 命令：</p>
<pre><code>php artisan make:request StoreBlogPost</code></pre>
<p>该命令生成的类将被置于 <code>app/Http/Requests</code> 目录中。如果这个目录不存在，在您运行 <code>make:request</code> 命令后将会创建这个目录。让我们添加一些验证规则到 <code>rules</code> 方法中：</p>
<pre><code>/**
 * 获取应用于请求的规则
 *
 * @return array
 */
public function rules()
{
    return [
        'title' =&gt; 'required|unique:posts|max:255',
        'body' =&gt; 'required',
    ];
}</code></pre>
<blockquote>
<p>技巧：您可以向 <code>rules</code> 方法传入所需的任何依赖项。它们将被 Laravel <a href="/docs/laravel_8_zh/container.html">服务容器</a> 自动解析。</p>
</blockquote>
<p>所以，验证规则是如何运行的呢？你所需要做的就是在控制器方法中类型提示传入的请求。在调用控制器方法之前验证传入的表单请求，这意味着你不需要在控制器中写任何验证逻辑：</p>
<pre><code>/**
 * 存储传入的博客文章
 *
 * @param  StoreBlogPost  $request
 * @return Response
 */
public function store(StoreBlogPost $request)
{
    // 传入的请求通过验证...

    // 获取通过验证的数据...
    $validated = $request-&gt;validated();
}</code></pre>
<p>如果验证失败，就会生成一个让用户返回到先前的位置的重定向响应。这些错误也会被闪存到 session 中，以便这些错误都可以在页面中显示出来。如果传入的请求是 AJAX，会向用户返回具有 422 状态代码和验证错误信息的 JSON 数据的 HTTP 响应。</p>
<h4>在表单请求后添加钩子</h4>
<p>如果你想在表单请求「之后」添加钩子，可以使用 <code>withValidator</code> 方法。这个方法接收一个完整的验证构造器，允许你在验证结果返回之前调用任何方法：</p>
<pre><code>/**
 * 配置验证实例
 *
 * @param  \Illuminate\Validation\Validator  $validator
 * @return void
 */
public function withValidator($validator)
{
    $validator-&gt;after(function ($validator) {
        if ($this-&gt;somethingElseIsInvalid()) {
            $validator-&gt;errors()-&gt;add('field', 'Something is wrong with this field!');
        }
    });
}</code></pre>
<h3>表单请求授权验证</h3>
<p>表单请求类内也包含了 <code>authorize</code> 方法。在这个方法中，你可以检查经过身份验证的用户确定其是否具有更新给定资源的权限。比方说，你可以判断用户是否拥有更新文章评论的权限：</p>
<pre><code>/**
 * 判断用户是否有请求权限
 *
 * @return bool
 */
public function authorize()
{
    $comment = Comment::find($this-&gt;route('comment'));

    return $comment &amp;&amp; $this-&gt;user()-&gt;can('update', $comment);
}</code></pre>
<p>由于所有的表单请求都是继承了 Laravel 中的请求基类，所以我们可以使用 <code>user</code> 方法去获取当前认证登录的用户。同时请注意上述例子中对 <code>route</code> 方法的调用。这个方法允许你在被调用的路由上获取其定义的 URI 参数，譬如下面例子中的 <code>{comment}</code> 参数：</p>
<pre><code>Route::post('comment/{comment}');</code></pre>
<p>如果 <code>authorize</code> 方法返回 <code>false</code>，则会自动返回一个包含 403 状态码的 HTTP 响应，也不会运行控制器的方法。</p>
<p>如果你打算在应用程序的其它部分处理授权逻辑，只需从 <code>authorize</code> 方法返回 <code>true</code>：</p>
<pre><code>/**
 * 判断用户是否有请求权限
 *
 * @return bool
 */
public function authorize()
{
    return true;
}</code></pre>
<blockquote>
<p>Tip：你可以向 <code>authorize</code> 方法传入所需的任何依赖项。他们会自动被 Laravel 提供的 <a href="/docs/laravel_8_zh/container.html">服务容器</a> 自动解析。</p>
</blockquote>
<h3>自定义错误消息</h3>
<p>你可以通过重写表单请求的 <code>messages</code> 方法来自定义错误消息。此方法应返回属性 / 规则对及其对应错误消息的数组：.</p>
<pre><code>/**
 * 获取已定义验证规则的错误消息
 *
 * @return array
 */
public function messages()
{
    return [
        'title.required' =&gt; 'A title is required',
        'body.required' =&gt; 'A message is required',
    ];
}</code></pre>
<h3>自定义验证属性</h3>
<p>如果你希望将验证消息的 <code>:attribute</code> 部分替换为自定义属性名称，则可以重写 <code>attributes</code> 方法来指定自定义名称。此方法应返回属性 / 名称对的数组：</p>
<pre><code>/**
 * 获取验证错误的自定义属性
 *
 * @return array
 */
public function attributes()
{
    return [
        'email' =&gt; 'email address',
    ];
}</code></pre>
<p><a name="prepare-input-for-validation"></a></p>
<h3>准备验证输入</h3>
<p>如果您需要在应用验证规则前清除请求中的任何数据，您可以使用 <code>prepareForValidation</code> 方法：</p>
<pre><code>use Illuminate\Support\Str;

/**
 * 准备验证数据
 *
 * @return void
 */
protected function prepareForValidation()
{
    $this-&gt;merge([
        'slug' =&gt; Str::slug($this-&gt;slug),
    ]);
}</code></pre>
<p><a name="manually-creating-validators"></a></p>
<h2>手动创建验证器</h2>
<p>如果您不想再请求中使用 <code>validate</code> 方法，您可以使用 <code>Validator</code> <a href="/docs/laravel_8_zh/facades.html">门面</a> 手动创建一个验证器实例。门面中的 <code>make</code> 方法将会生成一个新的验证器实例：</p>
<pre><code>&lt;?php

namespace App\Http\Controllers;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Validator;

class PostController extends Controller
{
    /**
     * 存储一篇博客文章
     *
     * @param  Request  $request
     * @return Response
     */
    public function store(Request $request)
    {
        $validator = Validator::make($request-&gt;all(), [
            'title' =&gt; 'required|unique:posts|max:255',
            'body' =&gt; 'required',
        ]);

        if ($validator-&gt;fails()) {
            return redirect('post/create')
                        -&gt;withErrors($validator)
                        -&gt;withInput();
        }

        // Store the blog post...
    }
}</code></pre>
<p><code>make</code> 方法中的第一个参数是期望校验的数据。第二个参数是应用到数据上的校验规则。</p>
<p>如果校验失败，您可以使用 <code>withErrors</code> 方法将错误信息闪存至 session 中。使用该方法时， <code>$errors</code> 会自动与之后的视图共享，您可以很方便将其回显给用户。<code>withErrors</code> 方法接受验证器实例， <code>MessageBag</code> 或是 PHP <code>数组</code>。</p>
<p><a name="automatic-redirection"></a></p>
<h3>自动重定向</h3>
<p>如果您想要在手动创建验证器实例的同时，使用请求的 <code>validate</code> 方法的自动重定向功能，那么您可以在现有的验证器实例上调用 <code>validate</code> 方法。如果校验失败，用户将被自动重定向，或在 AJAX 请求下，将会返回一个 JSON 响应：</p>
<pre><code>Validator::make($request-&gt;all(), [
    'title' =&gt; 'required|unique:posts|max:255',
    'body' =&gt; 'required',
])-&gt;validate();</code></pre>
<p>如果校验失败，您可以使用 <code>validateWithBag</code> 方法将错误信息存储到 <a href="#named-error-bags">命名错误包</a> 中。</p>
<pre><code>Validator::make($request-&gt;all(), [
    'title' =&gt; 'required|unique:posts|max:255',
    'body' =&gt; 'required',
])-&gt;validateWithBag('post');</code></pre>
<p><a name="named-error-bags"></a></p>
<h3>命名错误包</h3>
<p>如果您的一个页面中存在多个表单，您可以为错误的 <code>MessageBag</code> 命名，用于检索指定表单的错误信息。只需将名称作为 <code>withErrors</code> 的第二个参数传递给它：</p>
<pre><code>return redirect('register')
            -&gt;withErrors($validator, 'login');</code></pre>
<p>您可以通过 <code>$errors</code> 变量访问命名后的 <code>MessageBag</code> 实例：</p>
<pre><code>{{ $errors-&gt;login-&gt;first('email') }}</code></pre>
<p><a name="after-validation-hook"></a></p>
<h3>验证后钩子</h3>
<p>验证器允许您在完成验证操作后执行附加的回调。以便您处理下一步的验证，甚至是往信息集合中添加更多的错误信息。您可以在验证器实例上使用 <code>after</code> 方法以实现之：</p>
<pre><code>$validator = Validator::make(...);

$validator-&gt;after(function ($validator) {
    if ($this-&gt;somethingElseIsInvalid()) {
        $validator-&gt;errors()-&gt;add('field', 'Something is wrong with this field!');
    }
});

if ($validator-&gt;fails()) {
    //
}</code></pre>
<p><a name="working-with-error-messages"></a></p>
<h2>处理错误信息</h2>
<p>通过 <code>Validator</code> 实例调用 <code>errors</code> 方法，它会返回一个 <code>Illuminate\Support\MessageBag</code> 实例，该实例包含了各种可以很方便地处理错误信息的方法。并自动给所有视图提供 <code>$errors</code> 变量，也是 <code>MessageBag</code> 类的一个实例。</p>
<h4>检索特定字段的第一个错误信息</h4>
<p>您可以使用 <code>first</code> 方法检索给定字段的第一个错误信息：</p>
<pre><code>$errors = $validator-&gt;errors();

echo $errors-&gt;first('email');</code></pre>
<h4>检索特定字段的所有错误信息</h4>
<p>您可以使用 <code>get</code> 方法检索给定字段所有信息的数组：</p>
<pre><code>foreach ($errors-&gt;get('email') as $message) {
    //
}</code></pre>
<p>如果要验证表单的数组字段，您可以使用 <code>*</code> 字符来获取每一个数组元素的所有错误信息：</p>
<pre><code>foreach ($errors-&gt;get('attachments.*') as $message) {
    //
}</code></pre>
<h4>检索所有字段的所有错误信息</h4>
<p>您可以使用 <code>all</code> 方法获取所有字段的所有错误信息的数组：</p>
<pre><code>foreach ($errors-&gt;all() as $message) {
    //
}</code></pre>
<h4>判断特定字段是否含有错误信息</h4>
<p><code>has</code> 方法可用于判断给定字段是否包含任何错误信息：</p>
<pre><code>if ($errors-&gt;has('email')) {
    //
}</code></pre>
<p><a name="custom-error-messages"></a></p>
<h3>自定义错误信息</h3>
<p>如果有需要，您可以使用自定义的错误信息来替换默认的错误信息。有几种方法可以指定自定义错误信息。首先，您可以将自定义信息作为 <code>Validator::make</code> 方法的第三个参数：</p>
<pre><code>$messages = [
    'required' =&gt; 'The :attribute field is required.',
];

$validator = Validator::make($input, $rules, $messages);</code></pre>
<p>在该例中，<code>:attribute</code> 占位符将被验证字段的实际名称替换。您亦可在验证消息中使用其他占位符。例如：</p>
<pre><code>$messages = [
    'same' =&gt; 'The :attribute and :other must match.',
    'size' =&gt; 'The :attribute must be exactly :size.',
    'between' =&gt; 'The :attribute value :input is not between :min - :max.',
    'in' =&gt; 'The :attribute must be one of the following types: :values',
];</code></pre>
<h4>为给定的属性自定义信息</h4>
<p>有时，您可能只想为特定字段指定自定义错误信息。您可以属性名称后使用「点」标记来实现。例如：</p>
<pre><code>$messages = [
    'email.required' =&gt; 'We need to know your e-mail address!',
];</code></pre>
<p><a name="localization"></a></p>
<h4>在语言文件中自定义信息</h4>
<p>在大多数情况下，您可能选择在语言文件中指定自定义信息，而不是将其传递给 <code>Validator</code> 。您可以在 <code>resources/lang/xx/validation.php</code> 语言文件中的 <code>attributes</code> 数组指定自定义信息来实现：</p>
<pre><code>'custom' =&gt; [
    'email' =&gt; [
        'required' =&gt; 'We need to know your e-mail address!',
    ],
],</code></pre>
<h4>指定自定义属性值</h4>
<p>如果您想要将错误信息中的 <code>:attribute</code> 部分替换为自定义的属性名称，您可以在 <code>resources/lang/xx/validation.php</code> 语言文件中的 <code>attributes</code> 属性数组中指定自定义名称以实现：</p>
<pre><code>'attributes' =&gt; [
    'email' =&gt; 'email address',
],</code></pre>
<p>您亦可通过将自定义属性作为 <code>Validator::make</code> 的第四个参数传递给它来实现：</p>
<pre><code>$customAttributes = [
    'email' =&gt; 'email address',
];

$validator = Validator::make($input, $rules, $messages, $customAttributes);</code></pre>
<h4>在语言文件中指定自定义值</h4>
<p>有时，您可能需要将错误信息中的 <code>:value</code> 部分替换为自定义的表示形式。例如，下方规则中将 <code>cc</code> 指定为 <code>payment_type</code> 的值：</p>
<pre><code>$request-&gt;validate([
    'credit_card_number' =&gt; 'required_if:payment_type,cc'
]);</code></pre>
<p>如果规则校验失败，它将生成如下的错误信息：</p>
<pre><code>The credit card number field is required when payment type is cc.</code></pre>
<p>要将 payment type 显示的 <code>cc</code> 替换为自定义的显示形式，您可以通过在 <code>validation</code> 语言文件中定义 <code>values</code> 数组来实现之：</p>
<pre><code>'values' =&gt; [
    'payment_type' =&gt; [
        'cc' =&gt; 'credit card'
    ],
],</code></pre>
<p>现在，如果规则校验失败，将生成如下的错误信息：</p>
<pre><code>The credit card number field is required when payment type is credit card.</code></pre>
<p><a name="available-validation-rules"></a></p>
<h2>可用的验证规则</h2>
<p>下方列出了所有可用的验证规则及其功能：</p>
<style>
    .collection-method-list > p {
        column-count: 3; -moz-column-count: 3; -webkit-column-count: 3;
        column-gap: 2em; -moz-column-gap: 2em; -webkit-column-gap: 2em;
    }

    .collection-method-list a {
        display: block;
    }
</style>
<div class="collection-method-list">
<p><a href="#rule-accepted">Accepted</a>
<a href="#rule-active-url">Active URL</a>
<a href="#rule-after">After (Date)</a>
<a href="#rule-after-or-equal">After Or Equal (Date)</a>
<a href="#rule-alpha">Alpha</a>
<a href="#rule-alpha-dash">Alpha Dash</a>
<a href="#rule-alpha-num">Alpha Numeric</a>
<a href="#rule-array">Array</a>
<a href="#rule-bail">Bail</a>
<a href="#rule-before">Before (Date)</a>
<a href="#rule-before-or-equal">Before Or Equal (Date)</a>
<a href="#rule-between">Between</a>
<a href="#rule-boolean">Boolean</a>
<a href="#rule-confirmed">Confirmed</a>
<a href="#rule-date">Date</a>
<a href="#rule-date-equals">Date Equals</a>
<a href="#rule-date-format">Date Format</a>
<a href="#rule-different">Different</a>
<a href="#rule-digits">Digits</a>
<a href="#rule-digits-between">Digits Between</a>
<a href="#rule-dimensions">Dimensions (Image Files)</a>
<a href="#rule-distinct">Distinct</a>
<a href="#rule-email">Email</a>
<a href="#rule-ends-with">Ends With</a>
<a href="#rule-exclude-if">Exclude If</a>
<a href="#rule-exclude-unless">Exclude Unless</a>
<a href="#rule-exists">Exists (Database)</a>
<a href="#rule-file">File</a>
<a href="#rule-filled">Filled</a>
<a href="#rule-gt">Greater Than</a>
<a href="#rule-gte">Greater Than Or Equal</a>
<a href="#rule-image">Image (File)</a>
<a href="#rule-in">In</a>
<a href="#rule-in-array">In Array</a>
<a href="#rule-integer">Integer</a>
<a href="#rule-ip">IP Address</a>
<a href="#rule-json">JSON</a>
<a href="#rule-lt">Less Than</a>
<a href="#rule-lte">Less Than Or Equal</a>
<a href="#rule-max">Max</a>
<a href="#rule-mimetypes">MIME Types</a>
<a href="#rule-mimes">MIME Type By File Extension</a>
<a href="#rule-min">Min</a>
<a href="#rule-not-in">Not In</a>
<a href="#rule-not-regex">Not Regex</a>
<a href="#rule-nullable">Nullable</a>
<a href="#rule-numeric">Numeric</a>
<a href="#rule-password">Password</a>
<a href="#rule-present">Present</a>
<a href="#rule-regex">Regular Expression</a>
<a href="#rule-required">Required</a>
<a href="#rule-required-if">Required If</a>
<a href="#rule-required-unless">Required Unless</a>
<a href="#rule-required-with">Required With</a>
<a href="#rule-required-with-all">Required With All</a>
<a href="#rule-required-without">Required Without</a>
<a href="#rule-required-without-all">Required Without All</a>
<a href="#rule-same">Same</a>
<a href="#rule-size">Size</a>
<a href="#conditionally-adding-rules">Sometimes</a>
<a href="#rule-starts-with">Starts With</a>
<a href="#rule-string">String</a>
<a href="#rule-timezone">Timezone</a>
<a href="#rule-unique">Unique (Database)</a>
<a href="#rule-url">URL</a>
<a href="#rule-uuid">UUID</a></p>
</div>
<p><a name="rule-accepted"></a></p>
<h4>accepted</h4>
<p>待验证字段必须是 <em>yes</em> ， <em>on</em> ，<em>1</em> 或 <em>true</em> 。这在确认「服务条款」是否同意时很有用。</p>
<p><a name="rule-active-url"></a></p>
<h4>active_url</h4>
<p>根据 PHP 函数 <code>dns_get_record</code> ，验证字段必须具有有效的 A 或 AAAA 记录。URL 所提供的主机名时在传递给 <code>dns_get_record</code> 函数前使用 <code>parse_url</code> 函数获取到的。</p>
<p><a name="rule-after"></a></p>
<h4>after:<em>date</em></h4>
<p>待验证字段必须是给定的日期之后的值对应的日期。日期将被传递给 PHP 函数 <code>strtotime</code>：</p>
<pre><code>'start_date' =&gt; 'required|date|after:tomorrow'</code></pre>
<p>您亦可指定另一个要与日期比较的字段，而不是传递要由 <code>strtotime</code> 处理的日期字符串：</p>
<pre><code>'finish_date' =&gt; 'required|date|after:start_date'</code></pre>
<p><a name="rule-after-or-equal"></a></p>
<h4>after_or_equal:<em>date</em></h4>
<p>待验证字段的值对应的日期必须在给定日期之后或与给定的日期相同。可参阅 <a href="#rule-after">after</a> 规则获取更多信息。</p>
<p><a name="rule-alpha"></a></p>
<h4>alpha</h4>
<p>待验证字段只能由字母组成。</p>
<p><a name="rule-alpha-dash"></a></p>
<h4>alpha_dash</h4>
<p>待验证字段可能包含字母、数字，短破折号（-）和下划线（_）。</p>
<p><a name="rule-alpha-num"></a></p>
<h4>alpha_num</h4>
<p>待验证字段只能由字母和数字组成。</p>
<p><a name="rule-array"></a></p>
<h4>array</h4>
<p>待验证字段必须是有效的 PHP <code>数组</code>。</p>
<p><a name="rule-bail"></a></p>
<h4>bail</h4>
<p>在首次验证失败后立即终止验证。</p>
<p><a name="rule-before"></a></p>
<h4>before:<em>date</em></h4>
<p>待验证字段的值对应的日期必须在给定的日期之前。日期将会传递给 PHP 函数 <code>strtotime</code>。此外，与 <a href="#rule-after"><code>after</code></a> 规则一致，可以将另外一个待验证的字段作为 <code>date</code> 的值。</p>
<p><a name="rule-before-or-equal"></a></p>
<h4>before_or_equal:<em>date</em></h4>
<p>验证字段必须是在给定日期之前或与之相同的日期。这个日期值将会被传递给 PHP 的 <code>strtotime</code> 函数来计算。除此之外，像 <a href="#rule-after"><code>after</code></a> 规则一样，验证中另一个字段的名称可以作为值传递给 <code>date</code>。</p>
<p><a name="rule-between"></a></p>
<h4>between:<em>min</em>,<em>max</em></h4>
<p>验证字段的大小必须在给定的 min 和 max 之间。字符串、数字、数组和文件的计算方式都使用 <a href="#rule-size"><code>size</code></a> 方法。</p>
<p><a name="rule-boolean"></a></p>
<h4>boolean</h4>
<p>验证的字段必须可以转换为 Boolean 类型。 可接受的输入为 <code>true</code> ， <code>false</code> ， <code>1</code> ， <code>0</code> ， <code>"1"</code> 和 <code>"0"</code> 。</p>
<p><a name="rule-confirmed"></a></p>
<h4>confirmed</h4>
<p>验证字段必须具有匹配字段 <code>foo_confirmation</code> 。例如，验证字段为 <code>password</code> ，输入中必须存在与之匹配的 <code>password_confirmation</code> 字段。</p>
<p><a name="rule-date"></a></p>
<h4>date</h4>
<p>根据 PHP <code>strtotime</code> 函数，验证的字段必须是有效的日期。</p>
<p><a name="rule-date-equals"></a></p>
<h4>date_equals:date</h4>
<p>验证字段必须等于给定日期。日期将传递到 PHP <code>strtotime</code> 函数。</p>
<p><a name="rule-date-format"></a></p>
<h4>date_format:<em>format</em></h4>
<p>验证字段必须匹配给定的日期格式。当验证某个字段的时候，你应该 只使用 <code>date</code> 或者 <code>date_format</code> ，而不是同时使用。此验证规则支持 PHP 所有的 <a href="https://www.php.net/manual/en/class.datetime.php">DateTime</a> 类。</p>
<p><a name="rule-different"></a></p>
<h4>different:<em>field</em></h4>
<p>验证的字段值必须与字段 <em>field</em> 的值不同。</p>
<p><a name="rule-digits"></a></p>
<h4>digits:<em>value</em></h4>
<p>验证的字段必须为 <code>numeric</code> ，并且必须具有确切长度 <em>value</em>。</p>
<p><a name="rule-digits-between"></a></p>
<h4>digits_between:<em>min</em>,<em>max</em></h4>
<p>验证中的字段必须为 <code>numeric</code>，并且长度必须在给定的 <em>min</em> 和 <em>max</em> 之间。</p>
<p><a name="rule-dimensions"></a></p>
<h4>dimensions</h4>
<p>验证的文件必须是图片并且图片比例必须符合规则:</p>
<pre><code>'avatar' =&gt; 'dimensions:min_width=100,min_height=200'</code></pre>
<p>可用的规则为: <em>min_width</em>, <em>max_width</em>, <em>min_height</em>, <em>max_height</em>, <em>width</em>, <em>height</em>, <em>ratio</em>.</p>
<p><em>ratio</em> 约束应该表示为宽度除以高度。 这可以通过像 <code>3/2</code> 这样的语句或像 <code>1.5</code> 这样的 <code>float</code> 来指定：:</p>
<pre><code>'avatar' =&gt; 'dimensions:ratio=3/2'</code></pre>
<p>由于此规则需要多个参数，因此你可以 <code>Rule::dimensions</code> 方法来构造可读性高的规则：</p>
<pre><code>use Illuminate\Validation\Rule;

Validator::make($data, [
    'avatar' =&gt; [
        'required',
        Rule::dimensions()-&gt;maxWidth(1000)-&gt;maxHeight(500)-&gt;ratio(3 / 2),
    ],
]);</code></pre>
<p><a name="rule-distinct"></a></p>
<h4>distinct</h4>
<p>验证数组时，指定的字段不能有任何重复值。</p>
<pre><code>'foo.*.id' =&gt; 'distinct'</code></pre>
<p><a name="rule-email"></a></p>
<h4>email</h4>
<p>验证的字段必须符合 <code>e-mail</code> 地址格式。当前版本，此种验证规则由 <a href="https://github.com/egulias/EmailValidator"><code>egulias/email-validator</code></a> 提供支持。默认使用 RFCValidation 验证样式，但你也可以使其他验证样式:</p>
<pre><code>'email' =&gt; 'email:rfc,dns'</code></pre>
<p>例子使用 <code>RFCValidation</code> 和 <code>DNSCheckValidation</code> 验证样式。所有可用验证样式列表:</p>
<ul>
<li><code>rfc</code>: <code>RFCValidation</code></li>
<li><code>strict</code>: <code>NoRFCWarningsValidation</code></li>
<li><code>dns</code>: <code>DNSCheckValidation</code></li>
<li><code>spoof</code>: <code>SpoofCheckValidation</code></li>
<li><code>filter</code>: <code>FilterEmailValidation</code></li>
</ul>
<p>当下版本 <code>filter</code> 验证规则使用 PHP 的 <code>filter_var</code> 方法进行验证，在 5.8 版本接入 Laravel 。 <code>dns</code> 和 <code>spoof</code> 验证器需要 PHP 的 <code>intl</code> 扩展。</p>
<p><a name="rule-ends-with"></a></p>
<h4>ends_with:<em>foo</em>,<em>bar</em>,...</h4>
<p>验证的字段必须以给定的值之一结尾。</p>
<p><a name="rule-exclude-if"></a></p>
<h4>exclude_if:<em>anotherfield</em>,<em>value</em></h4>
<p>如果_anotherfield_字段等于<em>value</em>，验证下的字段将被 <code>validate</code> 和 <code>validated</code> 方法返回的请求数据排除。</p>
<p><a name="rule-exclude-unless"></a></p>
<h4>exclude_unless:<em>anotherfield</em>,<em>value</em></h4>
<p>验证下的字段将被 <code>validate</code> 和 <code>validated</code> 方法返回的请求数据排除，除非 <em>anotherfield</em> 的字段等于 <em>value</em> 。</p>
<p><a name="rule-exists"></a></p>
<h4>exists:<em>table</em>,<em>column</em></h4>
<p>验证的字段必须存在于给定的数据库表中。</p>
<h4>Exists 规则的基本用法</h4>
<pre><code>'state' =&gt; 'exists:states'</code></pre>
<p>如果未指定 <code>column</code> 选项，则将使用字段名称。</p>
<h4>指定列名</h4>
<pre><code>'state' =&gt; 'exists:states,abbreviation'</code></pre>
<p>如果你需要指定 <code>exists</code> 方法用来查询的数据库。你可以通过使用「点」语法将数据库的名称添加到数据表前面来实现这个目的：</p>
<pre><code>'email' =&gt; 'exists:connection.staff,email'</code></pre>
<p>你也可以使用关联模型来指定表名。</p>
<pre><code>'user_id' =&gt; 'exists:App\Models\User,id'</code></pre>
<p>如果要自定义验证规则执行的查询，可以使用 <code>Rule</code> 类来定义规则。在这个例子中，我们使用数组指定验证规则，而不是使用 <code>|</code> 字符来分隔它们：</p>
<pre><code>use Illuminate\Validation\Rule;

Validator::make($data, [
    'email' =&gt; [
        'required',
        Rule::exists('staff')-&gt;where(function ($query) {
            $query-&gt;where('account_id', 1);
        }),
    ],
]);</code></pre>
<p><a name="rule-file"></a></p>
<h4>file</h4>
<p>验证的字段必须是成功上传的文件。</p>
<p><a name="rule-filled"></a></p>
<h4>filled</h4>
<p>验证的字段在存在时不能为空。</p>
<p><a name="rule-gt"></a></p>
<h4>gt:<em>field</em></h4>
<p>验证字段必须大于给定的 <em>field</em>。两个字段必须是相同的类型。字符串、数字、数组和文件都使用 <a href="#rule-size"><code>size</code></a> 进行相同的评估。</p>
<p><a name="rule-gte"></a></p>
<h4>gte:<em>field</em></h4>
<p>验证字段必须大于或等于给定的 <em>field</em> 。两个字段必须是相同的类型。字符串、数字、数组和文件都使用 <a href="#rule-size"><code>size</code></a> 进行相同的评估。</p>
<p><a name="rule-image"></a></p>
<h4>image</h4>
<p>验证的文件必须是图片 (jpeg, png, bmp, gif, svg, or webp)</p>
<p><a name="rule-in"></a></p>
<h4>in:<em>foo</em>,<em>bar</em>,...</h4>
<p>验证字段必须包含在给定的值列表中。由于此规则通常要求您 <code>implode</code> 数组，因此可以使用 <code>Rule::in</code> 方法流畅地构造规则：</p>
<pre><code>use Illuminate\Validation\Rule;

Validator::make($data, [
    'zones' =&gt; [
        'required',
        Rule::in(['first-zone', 'second-zone']),
    ],
]);</code></pre>
<p><a name="rule-in-array"></a></p>
<h4>in_array:<em>anotherfield</em>.*</h4>
<p>验证的字段必须存在于另一个字段 <em>anotherfield</em> 的值中。</p>
<p><a name="rule-integer"></a></p>
<h4>integer</h4>
<p>验证的字段必须是整数。</p>
<blockquote>
<p>注意：此种验证规则不是验证数据是 「integer」 类型，仅验证字符串或数值包含一个「integer」。</p>
</blockquote>
<p><a name="rule-ip"></a></p>
<h4>ip</h4>
<p>验证的字段必须是 IP 地址。</p>
<p><a name="rule-ip4"></a></p>
<h4>ipv4</h4>
<p>验证的字段必须是 IPv4 地址。</p>
<p><a name="rule-ip6"></a></p>
<h4>ipv6</h4>
<p>验证的字段必须是 IPv6 地址。</p>
<p><a name="rule-json"></a></p>
<h4>json</h4>
<p>验证的字段必须是有效的 JSON 字符串。</p>
<p><a name="rule-lt"></a></p>
<h4>lt:<em>field</em></h4>
<p>验证的字段必须小于给定的字段。这两个字段必须是相同的类型。字符串、数值、数组和文件大小的计算方式与 <a href="#rule-size"><code>size</code></a> 方法进行评估。</p>
<p><a name="rule-lte"></a></p>
<h4>lte:<em>field</em></h4>
<p>验证中的字段必须小于或等于给定的 字段 。这两个字段必须是相同的类型。字符串、数值、数组和文件大小的计算方式与 <a href="#rule-size"><code>size</code></a> 方法进行评估。</p>
<p><a name="rule-max"></a></p>
<h4>max:<em>value</em></h4>
<p>验证中的字段必须小于或等于 <code>value</code>。字符串、数字、数组或是文件大小的计算方式都用 <a href="#rule-size"><code>size</code></a>规则。</p>
<p><a name="rule-mimetypes"></a></p>
<h4>mimetypes:<em>text/plain</em>,...</h4>
<p>验证的文件必须具备与列出的其中一个扩展相匹配的 MIME 类型：</p>
<pre><code>'video' =&gt; 'mimetypes:video/avi,video/mpeg,video/quicktime'</code></pre>
<p>为了确定上传文件的 MIME，框架将会读取文件，然后自动推测文件 MIME 类型，这可能与客户端提供的 MIME 类型不一致 。</p>
<p><a name="rule-mimes"></a></p>
<h4>mimes:<em>foo</em>,<em>bar</em>,...</h4>
<p>验证的文件必须具有与列出的其中一个扩展名相对应的 MIME 类型。</p>
<h4>MIME 规则基本用法</h4>
<pre><code>'photo' =&gt; 'mimes:jpeg,bmp,png'</code></pre>
<p>即使你可能只需要验证指定扩展名，但此规则实际上会去验证文件的 MIME 类型，其通过读取文件内容来推测它的 MIME 类型。</p>
<p>可以在以下链接中找到完整的 MIME 类型列表及相对应的扩展名：<a href="https://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types">https://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types</a></p>
<p><a name="rule-min"></a></p>
<h4>min:<em>value</em></h4>
<p>验证字段必须具有最小值。 字符串，数值，数组，文件大小的计算方式都与 <a href="#rule-size"><code>size</code></a> 规则一致.</p>
<p><a name="rule-not-in"></a></p>
<h4>not_in:<em>foo</em>,<em>bar</em>,...</h4>
<p>验证字段不能包含在给定的值的列表中。 使用 <code>Rule::notIn</code> 方法可以更流畅的构建这个规则：</p>
<pre><code>use Illuminate\Validation\Rule;

Validator::make($data, [
    'toppings' =&gt; [
        'required',
        Rule::notIn(['sprinkles', 'cherries']),
    ],
]);</code></pre>
<p><a name="rule-not-regex"></a></p>
<h4>not_regex:<em>pattern</em></h4>
<p>验证字段必须与给定的正则表达式不匹配。</p>
<p>验证时，这个规则使用 PHP <code>preg_match</code> 函数。指定的模式应遵循 <code>preg_match</code> 所需的相同格式，也包括有效的分隔符。 例如： <code>'email' =&gt; 'not_regex:/^.+$/i'</code>。</p>
<p><strong>注意：</strong> 当使用 <code>regex</code> / <code>not_regex</code> 模式时， 可能需要在数组中指定规则，而不是使用 <code>|</code> 分隔符 ，特别是在正则表达式包含 <code>|</code> 字符 的情况下。</p>
<p><a name="rule-nullable"></a></p>
<h4>nullable</h4>
<p>验证字段可以为 <code>null</code>。这在验证基本数据类型时特别有用，例如可以包含空值的字符串和整数。</p>
<p><a name="rule-numeric"></a></p>
<h4>numeric</h4>
<p>验证字段必须为数值。</p>
<p><a name="rule-password"></a></p>
<h4>password</h4>
<p>验证字段必须与当前登录用户的密码相同。你可以通过传入第一个参数来指定身份验证看守器（Authentication Guard）。</p>
<pre><code>'password' =&gt; 'password:api'</code></pre>
<p><a name="rule-present"></a></p>
<h4>present</h4>
<p>验证字段必须存在于输入数据中，但可以为空。</p>
<p><a name="rule-regex"></a></p>
<h4>regex:<em>pattern</em></h4>
<p>验证字段必须与给定的正则表达式匹配。</p>
<p>验证时，这个规则使用 PHP 的 <code>preg_match</code> 函数。 指定的模式应遵循 <code>preg_match</code> 所需的相同格式，也包括有效的分隔符。 例如： <code>'email' =&gt; 'not_regex:/^.+$/i'</code> 。</p>
<p><strong>注意：</strong> 当使用 <code>regex</code> / <code>not_regex</code> 模式时， 可能需要在数组中指定规则，而不是使用 <code>|</code> 分隔符 ，特别是在正则表达式包含 <code>|</code> 字符 的情况下。</p>
<p><a name="rule-required"></a></p>
<h4>required</h4>
<p>验证的字段必须存在于输入数据中，而不是空。如果满足以下条件之一，则字段被视为「空」：</p>
<ul>
<li>值为 <code>null</code>。</li>
<li>值为空字符串。</li>
<li>值为空数组或空 <code>Countable</code> 对象。</li>
<li>值为无路径的上传文件。</li>
</ul>
<p><a name="rule-required-if"></a></p>
<h4>required_if:<em>anotherfield</em>,<em>value</em>,...</h4>
<p>如果其它字段 <code>_anotherfield_</code> 为任一值（ <code>_value1_</code> 或 <code>_value2_</code> 或 <code>_value3_</code> 等，也可只有一个 <code>_value1_</code>） ，则此验证字段必须存在且不为空。</p>
<p>如果您需要构造更复杂的条件 <code>required_if</code> 规则， 您可以使用 <code>Rule::requiredIf</code> 方法。这个方法可以接受一个布尔值或是一个闭包函数，当传递闭包函数时，闭包函数应该返回 <code>true</code> 或 <code>false</code> ，以表明是否需要验证此字段：</p>
<pre><code>use Illuminate\Validation\Rule;

Validator::make($request-&gt;all(), [
    'role_id' =&gt; Rule::requiredIf($request-&gt;user()-&gt;is_admin),
]);

Validator::make($request-&gt;all(), [
    'role_id' =&gt; Rule::requiredIf(function () use ($request) {
        return $request-&gt;user()-&gt;is_admin;
    }),
]);</code></pre>
<p><a name="rule-required-unless"></a></p>
<h4>required_unless:<em>anotherfield</em>,<em>value</em>,...</h4>
<p>如果其它字段 <code>_anotherfield_</code> 不等于任一值 <code>_value_</code> ，则此验证字段必须存在且不为空。</p>
<p><a name="rule-required-with"></a></p>
<h4>required_with:<em>foo</em>,<em>bar</em>,...</h4>
<p>在其他任一指定字段出现时，验证的字段才必须存在且不为空。</p>
<p><a name="rule-required-with-all"></a></p>
<h4>required_with_all:<em>foo</em>,<em>bar</em>,...</h4>
<p>只有在其他指定字段全部出现时，验证的字段才必须存在且不为空。</p>
<p><a name="rule-required-without"></a></p>
<h4>required_without:<em>foo</em>,<em>bar</em>,...</h4>
<p>在其他指定任一字段不出现时，验证的字段才必须存在且不为空。</p>
<p><a name="rule-required-without-all"></a></p>
<h4>required_without_all:<em>foo</em>,<em>bar</em>,...</h4>
<p>只有在其他指定字段全部不出现时，验证的字段才必须存在且不为空。</p>
<p><a name="rule-same"></a></p>
<h4>same:<em>field</em></h4>
<p>验证字段的值必须与给定字段的值相同。</p>
<p><a name="rule-size"></a></p>
<h4>size:<em>value</em></h4>
<p>验证字段必须与给定值的大小一致。对于字符串，value 对应字符数。对于数字，value 对应给定的整数值（attribute 必须有 <code>numeric</code> 或者 <code>integer</code> 规则）。对于数组，size 对应数组的 <code>count</code> 值。对于文件，size 对应文件大小（单位 kB）。让我们来看几个例子：</p>
<pre><code>// 验证字符串长度是否为 12...
'title' =&gt; 'size:12';

// 验证数字是否为 10...
'seats' =&gt; 'integer|size:10';

// 验证数组的长度（拥有的元素）是否为 5...
'tags' =&gt; 'array|size:5';

// 验证上传的文件是否为 512 kB...
'image' =&gt; 'file|size:512';</code></pre>
<p><a name="rule-starts-with"></a></p>
<h4>starts_with:<em>foo</em>,<em>bar</em>,...</h4>
<p>验证字段必须以给定值之一开头。</p>
<p><a name="rule-string"></a></p>
<h4>string</h4>
<p>验证字段必须是一个字符串。如果允许这个字段为 <code>null</code>，需要给这个字段分配 <code>nullable</code> 规则。</p>
<p><a name="rule-timezone"></a></p>
<h4>timezone</h4>
<p>验证字段必须为符合 PHP 函数 <code>timezone_identifiers_list</code> 所定义的有效时区标识。</p>
<p><a name="rule-unique"></a></p>
<h4>unique:<em>table</em>,<em>column</em>,<em>except</em>,<em>idColumn</em></h4>
<p>验证字段在给定的数据库表中必须是唯一的。</p>
<p><strong>指定自定义数据表 / 列名：</strong></p>
<p>除直接指定表名外，你也可以指定 Eloquent 模型。</p>
<pre><code>'email' =&gt; 'unique:App\Models\User,email_address'</code></pre>
<p><code>column</code> 选项可用于指定相应数据库列的字段。 如果未指定 <code>column</code> 选项，则使用字段本身名称。</p>
<pre><code>'email' =&gt; 'unique:users,email_address'</code></pre>
<p><strong>自定义数据库连接</strong></p>
<p>有时，你可能需要为验证器创建的数据库查询设置自定义连接。上面的例子中，将 <code>unique:users</code> 设置为验证规则，等于使用默认数据库连接来查询数据库。如果要对其进行修改，请使用「点」语法来指定连接和表名：</p>
<pre><code>'email' =&gt; 'unique:connection.users,email_address'</code></pre>
<p><strong>强制 Unique 规则忽略指定 ID:</strong></p>
<p>有时，你可能希望在进行字段唯一性验证时忽略指定 ID 。例如， 在「更新个人资料」页面会包含用户名、邮箱和地点。这时你会想要验证更新的 E-mail 值是否唯一。如果用户仅更改了用户名字段而没有改 E-mail 字段，就不需要抛出验证错误，因为此用户已经是这个 E-mail 的拥有者了。</p>
<p>使用 <code>Rule</code> 类定义规则来指示验证器忽略用户的 ID 。这个例子中通过数组来指定验证规则，而不是使用 <code>|</code> 字符来分隔：</p>
<pre><code>use Illuminate\Validation\Rule;

Validator::make($data, [
    'email' =&gt; [
        'required',
        Rule::unique('users')-&gt;ignore($user-&gt;id),
    ],
]);</code></pre>
<blockquote>
<p>注意：您永远不应该将任何用户控制的请求输入传递给 <code>ignore</code> 方法。您应该只通过 <code>Eloquent</code> 模型的实例来传递系统生成的唯一 ID，例如自动递增 ID 或 UUID 。否则，您的应用程序将更容易受到 SQL 注入攻击。</p>
</blockquote>
<p>您可以传递整个模型实例，而不是将模型实例的主键值 传递给 <code>ignore</code> 方法。 Laravel 将自动从模型实例中获取主键值：</p>
<pre><code>Rule::unique('users')-&gt;ignore($user)</code></pre>
<p>如果您的数据表使用的主键名称不是 <code>id</code> ，那就在调用 <code>ignore</code> 方法时指定字段的名称：</p>
<pre><code>Rule::unique('users')-&gt;ignore($user-&gt;id, 'user_id')</code></pre>
<p>默认情况下， <code>unique</code> 规则将检查与要验证字段名称相匹配的列的唯一性。 但是，您可以传递一个不同的列名作为 <code>unique</code> 方法的第二个参数：</p>
<pre><code>Rule::unique('users', 'email_address')-&gt;ignore($user-&gt;id),</code></pre>
<p><strong>增加额外的 Where 语句:</strong></p>
<p>您也可以通过 <code>where</code> 方法指定额外的查询条件。例如， 我们添加 <code>account_id</code> 为 <code>1</code> 的约束：</p>
<pre><code>'email' =&gt; Rule::unique('users')-&gt;where(function ($query) {
    return $query-&gt;where('account_id', 1);
})</code></pre>
<p><a name="rule-url"></a></p>
<h4>url</h4>
<p>验证的字段必须是有效的 URL。</p>
<p><a name="rule-uuid"></a></p>
<h4>uuid</h4>
<p>验证字段必须是有效的 RFC 4122（版本 1,3,4 或 5）通用唯一标识符（UUID）。</p>
<h2>按条件增加规则</h2>
<h4>字段包含特定值跳过验证</h4>
<p>如果另一个字段具有给定的值，您可能偶尔希望不验证给定字段。您可以使用 <code>exclude_if</code> 验证规则来实现这一点。在本例中，如果 <code>has_appointment</code> 字段的值为 <code>false</code> ，则不会验证 <code>appointment_date</code> 和 <code>doctor_name</code> 字段:</p>
<pre><code>$v = Validator::make($data, [
    'has_appointment' =&gt; 'required|bool',
    'appointment_date' =&gt; 'exclude_if:has_appointment,false|required|date',
    'doctor_name' =&gt; 'exclude_if:has_appointment,false|required|string',
]);</code></pre>
<p>您可以使用 <code>exclude_unless</code> 规则来验证给定字段，除非另一个字段具有给定的值:</p>
<pre><code>$v = Validator::make($data, [
    'has_appointment' =&gt; 'required|bool',
    'appointment_date' =&gt; 'exclude_unless:has_appointment,true|required|date',
    'doctor_name' =&gt; 'exclude_unless:has_appointment,true|required|string',
]);</code></pre>
<p><a name="conditionally-adding-rules"></a></p>
<h4>存在时则验证</h4>
<p>在某些情况下，你可能希望将要验证的字段存在于输入数组中时，才对该字段执行验证。可以在规则列表中增加 <code>sometimes</code> 来实现：</p>
<pre><code>$v = Validator::make($data, [
    'email' =&gt; 'sometimes|required|email',
]);</code></pre>
<p>在上面的例子中， <code>email</code> 字段只有在 <code>$data</code> 数组中存在时才会被验证。</p>
<blockquote>
<p>技巧：如果你尝试验证应该始终存在但可能为空的字段，请查阅 <a href="#a-note-on-optional-fields">可选字段的注意事项</a></p>
</blockquote>
<h4>复杂条件验证</h4>
<p>有时候你可能需要增加基于更复杂的条件逻辑的验证规则。例如，你可以希望某个指定字段在另一个字段的值超过 100 时才为必填。或者当某个指定字段存在时，另外两个字段才能具有给定的值。增加这样的验证条件并不难。首先，使用 静态规则 创建一个 <code>Validator</code> 实例:</p>
<pre><code>$v = Validator::make($data, [
    'email' =&gt; 'required|email',
    'games' =&gt; 'required|numeric',
]);</code></pre>
<p>假设我们有一个专为游戏收藏家所设计的网页应用程序。如果游戏收藏家收藏超过一百款游戏，我们会希望他们来说明下为什么他们会拥有这么多游戏。比如说他们有可能经营了一家游戏分销商店，或者只是为了享受收集的乐趣。为了在特定条件下加入此验证需求，可以在 <code>Validator</code> 实例中使用 <code>sometimes</code> 方法。</p>
<pre><code>$v-&gt;sometimes('reason', 'required|max:500', function ($input) {
    return $input-&gt;games &gt;= 100;
});</code></pre>
<p>传递给 <code>sometimes</code> 的第一个参数是我们需要有条件验证的名称字段，第二个参数是我们想要添加的规则，如果作为第三个参数的 <code>闭包</code> 返回 <code>true</code>，则规则被添加。该方法让构建复杂条件验证变得简单，你甚至可以一次为多个字段添加条件验证：</p>
<pre><code>$v-&gt;sometimes(['reason', 'cost'], 'required', function ($input) {
    return $input-&gt;games &gt;= 100;
});</code></pre>
<blockquote>
<p>技巧：传递给 <code>闭包</code> 的 <code>$input</code> 参数是 <code>Illuminate\Support\Fluent</code> 的一个实例，可用于访问输入和文件。</p>
</blockquote>
<p><a name="validating-arrays"></a></p>
<h2>验证数组</h2>
<p>验证表单的输入为数组的字段也不再难了。 你可以使用「点」方法来验证数组中的属性。例如， 如果传入的 HTTP 请求中包含 <code>photos[profile]</code> 字段，可以如下验证：</p>
<pre><code>$validator = Validator::make($request-&gt;all(), [
    'photos.profile' =&gt; 'required|image',
]);</code></pre>
<p>我们还可以验证数组的每个元素。 例如，要验证给定数组输入中每个 <code>email</code> 是否是唯一的，可以这么做：</p>
<pre><code>$validator = Validator::make($request-&gt;all(), [
    'person.*.email' =&gt; 'email|unique:users',
    'person.*.first_name' =&gt; 'required_with:person.*.last_name',
]);</code></pre>
<p>类似地，在语言文件中你也可以使用 <code>*</code> 字符指定验证消息，从而可以使用单个验证消息定义基于数组字段的验证规则：</p>
<pre><code>'custom' =&gt; [
    'person.*.email' =&gt; [
        'unique' =&gt; 'Each person must have a unique e-mail address',
    ]
],</code></pre>
<p><a name="custom-validation-rules"></a></p>
<h2>自定义验证规则</h2>
<p><a name="using-rule-objects"></a></p>
<h3>使用规则对象</h3>
<p>尽管 Laravel 提供了多种多样有用的校验规则；但您亦可进行自定义。注册自定义校验规则的方法之一便是使用规则对象。您可以使用 <code>make:rule</code> 生成新的规则对象。接下来，让我们使用该命令生成一个校验字符串是否是大写的规则， Laravel 会将新规则置于 <code>app/Rules</code> 目录中：</p>
<pre><code>php artisan make:rule Uppercase</code></pre>
<p>当规则创建成功后，我们便可定义其行为。规则对象包含两个方法： <code>passes</code> 和 <code>message</code> 。 <code>passes</code> 方法接收属性值及其名称，它应该返回以 <code>true</code> 和 <code>false</code> 表示的属性值是否通过验证的结果。 <code>message</code> 方法应该返回验证失败时使用的错误信息：</p>
<pre><code>&lt;?php

namespace App\Rules;

use Illuminate\Contracts\Validation\Rule;

class Uppercase implements Rule
{
    /**
     * 判断是否通过验证规则
     *
     * @param  string  $attribute
     * @param  mixed  $value
     * @return bool
     */
    public function passes($attribute, $value)
    {
        return strtoupper($value) === $value;
    }

    /**
     * 获取校验错误信息
     *
     * @return string
     */
    public function message()
    {
        return 'The :attribute must be uppercase.';
    }
}</code></pre>
<p>如果您想要从您的翻译文件中获取错误信息，您可以在您的 <code>message</code> 中使用 <code>trans</code> 助手方法：</p>
<pre><code>/**
 * 获取校验错误信息
 *
 * @return string
 */
public function message()
{
    return trans('validation.uppercase');
}</code></pre>
<p>一旦定义了规则，您便可以通过将规则的实例化与其他校验规则一起传递给验证器：</p>
<pre><code>use App\Rules\Uppercase;

$request-&gt;validate([
    'name' =&gt; ['required', 'string', new Uppercase],
]);</code></pre>
<p><a name="using-closures"></a></p>
<h3>使用闭包</h3>
<p>如果您的规则在应用中仅仅使用一次，那您便可使用闭包来代替规则对象。闭包函数接收属性的方法，属性的值以及在校验失败时的回调函数 <code>$fail</code>：</p>
<pre><code>$validator = Validator::make($request-&gt;all(), [
    'title' =&gt; [
        'required',
        'max:255',
        function ($attribute, $value, $fail) {
            if ($value === 'foo') {
                $fail($attribute.' is invalid.');
            }
        },
    ],
]);</code></pre>
<p><a name="using-extensions"></a></p>
<h3>使用扩展</h3>
<p>另一种注册自定义校验规则的方式是在 <code>Validator</code> <a href="/docs/laravel_8_zh/facades">门面</a> 中使用 <code>extend</code> 方法。接下来，让我们在 <a href="/docs/laravel_8_zh/providers.html">服务提供者</a> 中使用这个方法来注册一个自定义校验规则：</p>
<pre><code>&lt;?php

namespace App\Providers;

use Illuminate\Support\ServiceProvider;
use Illuminate\Support\Facades\Validator;

class AppServiceProvider extends ServiceProvider
{
    /**
     * 注册服务提供器
     *
     * @return void
     */
    public function register()
    {
        //
    }

    /**
     * 驱动应用服务
     *
     * @return void
     */
    public function boot()
    {
        Validator::extend('foo', function ($attribute, $value, $parameters, $validator) {
            return $value == 'foo';
        });
    }
}</code></pre>
<p>自定义校验闭包函数接收四个参数：要被验证的属性名称 <code>$attribute</code> ，要被验证的属性值 <code>$value</code> ，传入验证规则的参数数组 <code>$parameters</code> 以及 <code>Validator</code> 实例。</p>
<p>您亦可通过传递类和方法到 <code>extend</code> 方法中来代替闭包：</p>
<pre><code>Validator::extend('foo', 'FooValidator@validate');</code></pre>
<h4>定义错误信息</h4>
<p>您还需要为您的自定义规则定义错误信息。您既可使用行内的自定义信息数组，也可将其添加到验证语言文件中以实现之。错误信息应该被置于数组的第一位，而不是放在只用于存放属性指定错误信息的 <code>custom</code> 数组内：</p>
<pre><code>"foo" =&gt; "Your input was invalid!",

"accepted" =&gt; "The :attribute must be accepted.",

// 其余的错误信息...</code></pre>
<p>在创建自定义校验规则时，您可能需要为错误信息自定义占位符。您可以通过创建自定义验证器然后调用 <code>Validator</code> 门面的 <code>replacer</code> 方法以实现之。您可以在 <a href="/docs/laravel_8_zh/providers.html">服务提供者</a> 的 <code>boot</code> 方法执行如下操作：</p>
<pre><code>/**
 * 驱动应用程序
 *
 * @return void
 */
public function boot()
{
    Validator::extend(...);

    Validator::replacer('foo', function ($message, $attribute, $rule, $parameters) {
        return str_replace(...);
    });
}</code></pre>
<p><a name="implicit-extensions"></a></p>
<h3>隐式扩展</h3>
<p>默认情况下，当要验证的属性不存在或者包含一个空字符串时，包含自定义扩展的校验规则是不会执行的。例如， <a href="#rule-unique"><code>unique</code></a> 规则不会校验空字符串：</p>
<pre><code>$rules = ['name' =&gt; 'unique:users,name'];

$input = ['name' =&gt; ''];

Validator::make($input, $rules)-&gt;passes(); // true</code></pre>
<p>如果想要实现即使属性为空，规则也要校验，那么就需要暗示该属性是必须的。要创建这样的 「隐式」扩展，请使用 <code>Validator::extendImplicit()</code> 方法：</p>
<pre><code>Validator::extendImplicit('foo', function ($attribute, $value, $parameters, $validator) {
    return $value == 'foo';
});</code></pre>
<blockquote>
<p>注意：「隐式」扩展仅仅暗示该属性是必须的。至于它到底是确实还是空值，这取决于你。</p>
</blockquote>
<h4>隐式规则对象</h4>
<p>如果您想在属性为空时执行规则对象，那么您应该实现 <code>Illuminate\Contracts\Validation\ImplicitRule</code> 接口。这个接口将充当验证器的 「标识接口」；因此，它不会包含任何您需要实现的方法。</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-xl-2" id="toc-list">
        <ul></ul>
    </div>
</div>    </div>
</div>
<span id="back-top">
<svg width="20" height="20" fill="currentColor">
    <use xlink:href="/css/bootstrap-icons.svg#chevron-up"/>
</svg>
</span>
 
<script>
    // 浏览量统计
    $(function () {
        let formdata = new FormData();
        formdata.append('_token', '');
        formdata.append('id', 378);
        $.ajax({
            url: $(".sticky-top .navbar-brand").attr('href') + "/api/doc/clicks",
            type: 'POST',
            data: formdata,
            processData: false,
            contentType: false
        });
    });
    // aside-hidden
    $(function () {
        $('#aside-hidden').on('click', function () {
            $('.aside').toggle(0, function () {
                if ($(this).is(':visible')) {
                    $('.aside-middle').removeClass('col-md-12 col-lg-12').addClass('col-md-9 col-lg-10');
                } else {
                    $('.aside-middle').removeClass('col-md-9 col-lg-10').addClass('col-md-12 col-lg-12');
                }
            });
        });
    });
</script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?1522d01c436f59ddc8389f25bfa9d53e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>