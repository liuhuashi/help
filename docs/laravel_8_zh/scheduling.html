<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"> 
    <meta name="csrf-token" content=""> 
    <title>任务调度 - 开发帮助文档</title> 
    <meta name="keyword" content="scheduling"> 
    <meta name="description" content="scheduling"> 
    <meta name="author" content="Moments"> 
    <link href="/favicon.ico" rel="shortcut icon"> 
    <link href="/css/blog.css" rel="stylesheet"> 
    <script src="/js/blog.js"></script> 
</head>
<body>
<header class="sticky-top">
    <nav class="navbar navbar-expand navbar-dark bg-secondary justify-content-between text-uppercase">
        <div class="navbar-nav" style="overflow:hidden;">
            <a class="navbar-brand" href="https://help.pythonschool.com">
                <span class="d-md-none">
                    <svg class="text-warning" width="24" height="24" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#emoji-sunglasses"/>
                    </svg>
                </span>
                <span class="d-none d-md-flex">开发帮助文档</span>
            </a>
            <div class="navbar-nav-scroll" style="overflow: hidden;">
                <ul class="navbar-nav text-nowrap pb-4" style="overflow:auto;">
                                            <li class="nav-item">
                            <a class="nav-link active" href="/docs/laravel/index.html">laravel</a>
                        </li>
                                            <li class="nav-item">
                            <a class="nav-link" href="/docs/php/index.html">php</a>
                        </li>
                                    </ul>
            </div>
        </div>
        <div class="d-inline-flex">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/liuhuashi">
                        <svg class="text-light" width="24" height="24" fill="currentColor">
                            <use xlink:href="/css/bootstrap-icons.svg#github"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>
<div class="container-fluid">
    <div id="aside-hidden" class="position-fixed" style="left:0;top: 58px;cursor:pointer;z-index: 10000;">
        <svg class="align-text-bottom text-warning" width="16" height="16" fill="currentColor" stroke="currentColor" stroke-width="1">
            <use xlink:href="/css/bootstrap-icons.svg#arrow-left-square"/>
        </svg>
    </div>
    <div class="row">
        <div class="aside col-md-3 col-lg-2 border-right shadow position-sticky" style="overflow:auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
    <form class="row border-bottom p-3 bg-white sticky-top">
        <input id="search-version" class="form-control" data-version="7" type="search" placeholder="英文逗号分隔,分词搜索">
    </form>
    <ul class="nav navbar-nav nav-pills flex-column pt-2 figure-caption">
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/artisan.html" title="Artisan 命令行">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Artisan 命令行
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/authentication.html" title="用户认证">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    用户认证
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/authorization.html" title="用户授权">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    用户授权
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/blade.html" title="Blade 模板">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Blade 模板
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/broadcasting.html" title="广播系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    广播系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/cache.html" title="缓存系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    缓存系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/collections.html" title="集合">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    集合
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/configuration.html" title="Configuration">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Configuration
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/console-tests.html" title="控制台测试">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    控制台测试
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/container.html" title="服务容器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    服务容器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/contracts.html" title="契约">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    契约
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/contributions.html" title="贡献导引">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    贡献导引
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/controllers.html" title="Controllers">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Controllers
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/csrf.html" title="CSRF 保护">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    CSRF 保护
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/database-testing.html" title="数据库测试">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库测试
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/database.html" title="数据库: 入门">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库: 入门
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/deployment.html" title="部署">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    部署
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/documentation.html" title="前言">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    前言
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/dusk.html" title="Laravel Dusk">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Dusk
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-collections.html" title="Eloquent: 集合">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 集合
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-mutators.html" title="Eloquent: 修改器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 修改器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-relationships.html" title="Eloquent: 关联">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 关联
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-resources.html" title="Eloquent: API 资源">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: API 资源
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent-serialization.html" title="Eloquent: 序列化">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 序列化
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/eloquent.html" title="Eloquent: 入门">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Eloquent: 入门
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/encryption.html" title="加密解密">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    加密解密
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/envoy.html" title="Laravel Envoy">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Envoy
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/errors.html" title="错误处理">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    错误处理
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/events.html" title="事件系统">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    事件系统
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/facades.html" title="Facades">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Facades
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/filesystem.html" title="File Storage">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    File Storage
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/frontend.html" title="JavaScript &amp; CSS 脚手架">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    JavaScript &amp; CSS 脚手架
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/hashing.html" title="哈希加密">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    哈希加密
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/helpers.html" title="辅助函数">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    辅助函数
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/homestead.html" title="Laravel Homestead">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Homestead
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/horizon.html" title="Laravel Horizon">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Horizon
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/http-client.html" title="HTTP 客户端">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP 客户端
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/http-tests.html" title="HTTP Tests">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP Tests
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/installation.html" title="安装">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    安装
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/lifecycle.html" title="请求生命周期">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    请求生命周期
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/localization.html" title="本地化">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    本地化
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/logging.html" title="日志">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    日志
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/mail.html" title="邮件发送">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    邮件发送
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/middleware.html" title="中间件">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    中间件
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/migrations.html" title="数据库：迁移">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库：迁移
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/mix.html" title="编辑资源 (Mix)">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    编辑资源 (Mix)
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/mocking.html" title="Mocking">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Mocking
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/notifications.html" title="消息通知">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    消息通知
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/packages.html" title="Package Development">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Package Development
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/pagination.html" title="数据库: 分页">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库: 分页
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/passport.html" title="Laravel Passport">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Passport
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/passwords.html" title="重置密码">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    重置密码
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/providers.html" title="服务提供者">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    服务提供者
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/queries.html" title="数据库：查询构造器">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库：查询构造器
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/queues.html" title="队列">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    队列
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/redis.html" title="Redis">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Redis
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/releases.html" title="发行说明">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    发行说明
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/requests.html" title="HTTP 请求">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP 请求
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/responses.html" title="HTTP Responses">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP Responses
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/routing.html" title="路由">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    路由
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/sail.html" title="Laravel Sail">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Sail
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/sanctum.html" title="Laravel Sanctum">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Sanctum
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/scheduling.html" title="任务调度">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    任务调度
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/scout.html" title="Laravel Scout">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Scout
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/seeding.html" title="数据库：填充">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    数据库：填充
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/session.html" title="HTTP 会话机制">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    HTTP 会话机制
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/socialite.html" title="Laravel 社会化登录">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel 社会化登录
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/structure.html" title="目录结构">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    目录结构
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/telescope.html" title="Laravel Telescope">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Telescope
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/testing.html" title="测试：入门指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    测试：入门指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/upgrade.html" title="升级指南">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    升级指南
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/urls.html" title="生成 URL">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    生成 URL
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/valet.html" title="Laravel Valet">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Laravel Valet
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/validation.html" title="表单验证">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    表单验证
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/verification.html" title="Email 认证">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    Email 认证
                </a>
            </li>
                    <li class="nav-item">
                <a class="nav-link" href="/docs/laravel_8_zh/views.html" title="视图">
                    <svg class="align-text-bottom text-dark" width="16" height="16" fill="currentColor">
                        <use xlink:href="/css/bootstrap-icons.svg#eyeglasses"/>
                    </svg>
                    视图
                </a>
            </li>
            </ul>
</div>        <div class="aside-middle col-md-9 col-lg-10 row">
    <div class="col-md-9 col-xl-10" style="overflow: auto;height: calc(100vh - 58px);padding-bottom: calc(100vh/3);">
        <div class="container main-h4-1">
            <div class="page-content">
                <h1>任务调度</h1>
<ul>
<li><a href="#introduction">简介</a></li>
<li><a href="#defining-schedules">定义调度</a>
<ul>
<li><a href="#scheduling-artisan-commands">Artisan 命令调度</a></li>
<li><a href="#scheduling-queued-jobs">队列任务调度</a></li>
<li><a href="#scheduling-shell-commands">Shell 命令调度</a></li>
<li><a href="#schedule-frequency-options">调度频率设置</a></li>
<li><a href="#timezones">时区</a></li>
<li><a href="#preventing-task-overlaps">避免任务重复</a></li>
<li><a href="#running-tasks-on-one-server">任务只运行在一台服务器上</a></li>
<li><a href="#background-tasks">后台任务</a></li>
<li><a href="#maintenance-mode">维护模式</a></li>
</ul></li>
<li><a href="#task-output">任务输出</a></li>
<li><a href="#task-hooks">任务钩子</a></li>
</ul>
<p><a name="introduction"></a></p>
<h2>简介</h2>
<p>过去，你可能需要在服务器上为每一个调度任务去创建 Cron 条目。但是，这种方式很快会变得很痛苦，因为这些任务调度不在源代码中，并且你每次都需要通过 SSH 链接登录到服务器中才能增加 Cron 条目。</p>
<p>Laravel 的命令行调度器允许你在 Laravel 中清晰明了地定义命令调度。在使用这个任务调度器时，你只需要在你的服务器上创建单个 Cron 入口。你的任务调度在 <code>app/Console/Kernel.php</code> 的 <code>schedule</code> 方法中进行定义。为了帮助你更好的入门，这个方法中有个简单的例子。</p>
<h3>启动调度器</h3>
<p>使用这个调度器时，只需要把下面的 Cron 条目添加到你的服务器中。如果你不知道如何在服务器中添加 Cron 条目，可以考虑使用诸如 <a href="https://forge.laravel.com">Laravel Forge</a> 之类的服务来管理 Cron 条目：</p>
<pre><code>* * * * * cd /path-to-your-project &amp;&amp; php artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1</code></pre>
<p>该 Cron 会每分钟调用一次 Laravel 的命令行调度器。在执行  <code>schedule:run</code> 命令时，Laravel 会根据你的调度执行预定的程序。</p>
<p><a name="defining-schedules"></a></p>
<h2>定义调度</h2>
<p>你可以在 <code>App\Console\Kernel</code> 类的 <code>schedule</code> 方法中定义所有的调度任务。 在开始之前，让我们来看一个例子。在此例中，我们计划每天午夜执行一个 <code>闭包</code>。在 <code>闭包</code> 中，我们会执行一个数据库查询来清空一张表：</p>
<pre><code>&lt;?php

namespace App\Console;

use Illuminate\Console\Scheduling\Schedule;
use Illuminate\Foundation\Console\Kernel as ConsoleKernel;
use Illuminate\Support\Facades\DB;

class Kernel extends ConsoleKernel
{
    /**
     * 应用中自定义的 Artisan 命令
     *
     * @var array
     */
    protected $commands = [
        //
    ];

    /**
     * 定义应用中的命令调度
     *
     * @param  \Illuminate\Console\Scheduling\Schedule  $schedule
     * @return void
     */
    protected function schedule(Schedule $schedule)
    {
        $schedule-&gt;call(function () {
            DB::table('recent_users')-&gt;delete();
        })-&gt;daily();
    }
}</code></pre>
<p>除了使用闭包来定义任务调度外，你也可以使用 <a href="https://secure.php.net/manual/en/language.oop5.magic.php#object.invoke">可调用对象</a>。可调用对象是简单的PHP类，包含一个 <code>__invoke</code> 方法：</p>
<pre><code>$schedule-&gt;call(new DeleteRecentUsers)-&gt;daily();</code></pre>
<p><a name="scheduling-artisan-commands"></a></p>
<h3>Artisan 命令调度</h3>
<p>除了调用闭包这种方式来调度外，你还可以调用 <a href="/docs/laravel_8_zh/artisan.html">Artisan commands</a> 和操作系统命令。例如，你可以给 <code>command</code> 方法传递命令名称或者类来调度一个 Artisan 命令：</p>
<pre><code>$schedule-&gt;command('emails:send Taylor --force')-&gt;daily();

$schedule-&gt;command(EmailsCommand::class, ['Taylor', '--force'])-&gt;daily();</code></pre>
<p><a name="scheduling-queued-jobs"></a></p>
<h3>队列任务调度</h3>
<p><code>job</code> 方法可以用来调度<a href="/docs/laravel_8_zh/queues.html">队列任务</a> 。此方法提供了一种快捷方式来调度任务，而无需使用 <code>call</code> 方法创建闭包来调度任务：</p>
<pre><code>$schedule-&gt;job(new Heartbeat)-&gt;everyFiveMinutes();

// 分发任务到「heartbeats」队列...
$schedule-&gt;job(new Heartbeat, 'heartbeats')-&gt;everyFiveMinutes();</code></pre>
<p><a name="scheduling-shell-commands"></a></p>
<h3>Shell 调度命令</h3>
<p><code>exec</code> 方法可用于向操作系统发送命令：</p>
<pre><code>$schedule-&gt;exec('node /home/forge/script.js')-&gt;daily();</code></pre>
<p><a name="schedule-frequency-options"></a></p>
<h3>调度频率选项</h3>
<p>你可以为你的任务分配多种调度计划：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-&gt;cron('* * * * *');</code></td>
<td>自定义 Cron 计划执行任务</td>
</tr>
<tr>
<td><code>-&gt;everyMinute();</code></td>
<td>每分钟执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;everyTwoMinutes();</code></td>
<td>每两分钟执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;everyThreeMinutes();</code></td>
<td>每三分钟执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;everyFourMinutes();</code></td>
<td>每四分钟执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;everyFiveMinutes();</code></td>
<td>每五分钟执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;everyTenMinutes();</code></td>
<td>每十分钟执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;everyFifteenMinutes();</code></td>
<td>每十五分钟执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;everyThirtyMinutes();</code></td>
<td>每三十分钟执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;hourly();</code></td>
<td>每小时执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;hourlyAt(17);</code></td>
<td>每小时第 17 分钟执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;everyTwoHours();</code></td>
<td>每两小时执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;everyThreeHours();</code></td>
<td>每三小时执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;everyFourHours();</code></td>
<td>每四小时执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;everySixHours();</code></td>
<td>每六小时执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;daily();</code></td>
<td>每天 0 点执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;dailyAt('13:00');</code></td>
<td>每天 13:00 执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;twiceDaily(1, 13);</code></td>
<td>每天 01:00 和 13:00 各执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;weekly();</code></td>
<td>每周日 00:00 执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;weeklyOn(1, '8:00');</code></td>
<td>每周一的 08:00 执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;monthly();</code></td>
<td>每月第一天 00:00 执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;monthlyOn(4, '15:00');</code></td>
<td>每月 4 号的 15:00 执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;lastDayOfMonth('15:00');</code></td>
<td>每月最后一天 15:00 执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;quarterly();</code></td>
<td>每季度第一天 00:00 执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;yearly();</code></td>
<td>每年第一天 00:00 执行一次任务</td>
</tr>
<tr>
<td><code>-&gt;timezone('America/New_York');</code></td>
<td>设置时区</td>
</tr>
</tbody>
</table>
<p>这些方法可以与额外的约束条件相结合，此时我们便可创建在一周的特定时间运行的甚至是更精细的计划任务。例如，在每周一执行命令：</p>
<pre><code>// 在每周一的 13:00 执行...
$schedule-&gt;call(function () {
    //
})-&gt;weekly()-&gt;mondays()-&gt;at('13:00');

// 在每个工作日的 8:00 到 17:00 之间的每个小时周期执行...
$schedule-&gt;command('foo')
          -&gt;weekdays()
          -&gt;hourly()
          -&gt;timezone('America/Chicago')
          -&gt;between('8:00', '17:00');</code></pre>
<p>下方列出了额外的约束条件：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-&gt;weekdays();</code></td>
<td>限制任务在工作日执行</td>
</tr>
<tr>
<td><code>-&gt;weekends();</code></td>
<td>限制任务在周末执行</td>
</tr>
<tr>
<td><code>-&gt;sundays();</code></td>
<td>限制任务在周日执行</td>
</tr>
<tr>
<td><code>-&gt;mondays();</code></td>
<td>限制任务在周一执行</td>
</tr>
<tr>
<td><code>-&gt;tuesdays();</code></td>
<td>限制任务在周二执行</td>
</tr>
<tr>
<td><code>-&gt;wednesdays();</code></td>
<td>限制任务在周三执行</td>
</tr>
<tr>
<td><code>-&gt;thursdays();</code></td>
<td>限制任务在周四执行</td>
</tr>
<tr>
<td><code>-&gt;fridays();</code></td>
<td>限制任务在周五执行</td>
</tr>
<tr>
<td><code>-&gt;saturdays();</code></td>
<td>限制任务在周六执行</td>
</tr>
<tr>
<td><code>-&gt;days(array\|mixed);</code></td>
<td>限制任务在每周的指定日期执行</td>
</tr>
<tr>
<td><code>-&gt;between($start, $end);</code></td>
<td>限制任务在 <code>$start</code> 和 <code>$end</code> 区间执行</td>
</tr>
<tr>
<td><code>-&gt;when(Closure);</code></td>
<td>限制任务在闭包返回为真时执行</td>
</tr>
<tr>
<td><code>-&gt;environments($env);</code></td>
<td>限制任务在特定环境中执行</td>
</tr>
</tbody>
</table>
<h4>周几（Day）限制</h4>
<p><code>days</code> 方法可以用于限制任务在每周的哪一天执行。举个例子，您可以在让一个命令每周的周日和周三每小时执行一次：</p>
<pre><code>$schedule-&gt;command('reminders:send')
                -&gt;hourly()
                -&gt;days([0, 3]);</code></pre>
<h4>时间范围限制</h4>
<p><code>between</code> 方法可用于限制任务在一天中的某个时间段执行：</p>
<pre><code>$schedule-&gt;command('reminders:send')
                    -&gt;hourly()
                    -&gt;between('7:00', '22:00');</code></pre>
<p>相似地， <code>unlessBetween</code> 方法也可用于限制任务不在一天中的某个时间段执行：</p>
<pre><code>$schedule-&gt;command('reminders:send')
                    -&gt;hourly()
                    -&gt;unlessBetween('23:00', '4:00');</code></pre>
<h4>闭包检测限制</h4>
<p><code>when</code> 方法可根据检测结果来执行任务。换言之，若给定的闭包返回 <code>true</code> ，若无其他限制条件阻止，任务就会一直执行：</p>
<pre><code>$schedule-&gt;command('emails:send')-&gt;daily()-&gt;when(function () {
    return true;
});</code></pre>
<p><code>skip</code> 可看作是 <code>when</code> 的逆方法。若 <code>skip</code> 方法返回 <code>true</code> ，任务将不会执行</p>
<pre><code>$schedule-&gt;command('emails:send')-&gt;daily()-&gt;skip(function () {
    return true;
});</code></pre>
<p>当链式调用 <code>when</code> 方法时，仅当所有 <code>when</code> 都返回 <code>true</code> 时，任务才会执行。</p>
<h4>环境限制</h4>
<p><code>environments</code> 方法可限制任务在给定环境中执行：</p>
<pre><code>$schedule-&gt;command('emails:send')
            -&gt;daily()
            -&gt;environments(['staging', 'production']);</code></pre>
<p><a name="timezones"></a></p>
<h3>时区</h3>
<p><code>timezone</code> 方法可指定任务在给定时区中的时间执行：</p>
<pre><code>$schedule-&gt;command('report:generate')
         -&gt;timezone('America/New_York')
         -&gt;at('02:00')</code></pre>
<p>若想给所有计划任务分配相同的时区，那么需要在 <code>app/Console/Kernel.php</code> 文件中定义 <code>scheduleTimezone</code> 方法。这个方法会返回一个默认时区，最终分配给所有计划任务：</p>
<pre><code>/**
 * 获取计划事件默认使用的时区
 *
 * @return \DateTimeZone|string|null
 */
protected function scheduleTimezone()
{
    return 'America/Chicago';
}</code></pre>
<blockquote>
<p>注意：请记住，有些时区会使用夏令时。当夏令时发生调整时，你的任务可能会执行两次，甚至根本不会执行。因此，我们建议尽可能避免使用时区来安排计划任务。</p>
</blockquote>
<p><a name="preventing-task-overlaps"></a></p>
<h3>避免任务重复</h3>
<p>默认情况下，即使之前的任务实例还在执行，调度内的任务也会执行。为避免这种情况的发生，你可以使用 <code>withoutOverlapping</code> 方法：</p>
<pre><code>$schedule-&gt;command('emails:send')-&gt;withoutOverlapping();</code></pre>
<p>在此例中，若  <code>emails:send</code> <a href="/docs/laravel_8_zh/artisan.html">Artisan 命令</a> 还未运行，那它将会每分钟执行一次。当你的任务执行时间非常不确定，导致你无法准确预测任务的执行时间，那 <code>withoutOverlapping</code> 方法会特别有用。</p>
<p>如有需要，你可以在「without overlapping」锁过期之前，指定它的过期时间。默认情况下，这个锁会在 24 小时后过期。</p>
<pre><code>$schedule-&gt;command('emails:send')-&gt;withoutOverlapping(10);</code></pre>
<p><a name="running-tasks-on-one-server"></a></p>
<h3>任务只运行在一台服务器上</h3>
<blockquote>
<p>注意：你的应用默认缓存驱动必须是 <code>database</code> 、 <code>memcached</code> 或 <code>redis</code> 才能使用这个特性。除此之外，所有服务器必须使用同一台中央缓存服务器来通信。</p>
</blockquote>
<p>若你的应用在多台服务器中运行，你可能需要限制某个计划任务仅在单台服务器上运行。假如你有一个计划任务：在每周五晚生成一份新报告。若此任务调度器在三台服务器上运行，那么该任务就会在三台服务器上运行并生成三份报告。这样不好。</p>
<p>当你定义计划任务时，可使用 <code>onOneServer</code> 方法表明该任务仅在单台服务器上运行。如此，第一台获取到该任务的服务器，会给它附加一个原子锁，这样便可防止其他服务器在同一时间内执行同一个任务：</p>
<pre><code>$schedule-&gt;command('report:generate')
                -&gt;fridays()
                -&gt;at('17:00')
                -&gt;onOneServer();</code></pre>
<p><a name="background-tasks"></a></p>
<h3>后台任务</h3>
<p>默认情况下，计划同时运行的多个命令将会顺序执行。若你有长时间运行的命令，这可能导致后续命令的启动时间比预期的更晚。你可以使用 <code>runInBackground</code> 方法让命令在后台运行，如此，它们便可同时运行了:</p>
<pre><code>$schedule-&gt;command('analytics:report')
         -&gt;daily()
         -&gt;runInBackground();</code></pre>
<blockquote>
<p>注意：仅能在通过 <code>command</code> 和 <code>exec</code> 方法调度任务时，方能使用  <code>runInBackground</code> 方法。</p>
</blockquote>
<p><a name="maintenance-mode"></a></p>
<h3>维护模式</h3>
<p>Laravel 的队列任务在 <a href="/docs/laravel_8_zh/configuration.html#maintenance-mode">维护模式</a> 下不会运行。因为我们不想你的调度任务干扰到你服务器上可能还未完成的项目。不过，如果你确实是想在维护模式下强制调度任务执行，你可以使用 <code>evenInMaintenanceMode</code> 方法：</p>
<pre><code>$schedule-&gt;command('emails:send')-&gt;evenInMaintenanceMode();</code></pre>
<p><a name="task-output"></a></p>
<h2>任务输出</h2>
<p>Laravel 调度器提供了一些方便的方法来处理调度任务输出。首先，你可以使用 <code>sendOutputTo</code> 方法来输出到文件以便于后续检查：</p>
<pre><code>$schedule-&gt;command('emails:send')
         -&gt;daily()
         -&gt;sendOutputTo($filePath);</code></pre>
<p>如果希望将输出 <code>附加</code> 到给定文件，可以使用 <code>appendOutputTo</code> 方法：</p>
<pre><code>$schedule-&gt;command('emails:send')
         -&gt;daily()
         -&gt;appendOutputTo($filePath);</code></pre>
<p>使用 <code>emailOutputTo</code> 方法，你可以将输出发送到指定邮箱。在使用邮件发送之前，你需要配置 Laravel 的 <a href="/docs/laravel_8_zh/mail.html">邮件服务</a>：</p>
<pre><code>$schedule-&gt;command('foo')
         -&gt;daily()
         -&gt;sendOutputTo($filePath)
         -&gt;emailOutputTo('foo@example.com');</code></pre>
<p>如果你只想在命令执行失败的时候输出到邮箱，你可以使用 <code>emailOutputOnFailure</code> 方法：</p>
<pre><code>$schedule-&gt;command('foo')
         -&gt;daily()
         -&gt;emailOutputOnFailure('foo@example.com');</code></pre>
<blockquote>
<p>{note} <code>emailOutputTo</code>，<code>emailOutputOnFailure</code>，<code>sendOutputTo</code> 和 <code>appendOutputTo</code> 方法是 <code>command</code> 和 <code>exec</code> 独有的。</p>
</blockquote>
<p><a name="task-hooks"></a></p>
<h2>任务钩子</h2>
<p>使用 <code>before</code> 和 <code>after</code> 方法，你可以指定在调度任务执行前或者执行后来运行的特定代码：</p>
<pre><code>$schedule-&gt;command('emails:send')
         -&gt;daily()
         -&gt;before(function () {
             // 任务即将开始...
         })
         -&gt;after(function () {
             // 任务完成...
         });</code></pre>
<p><code>onSuccess</code> 和 <code>onFailure</code> 方法允许您指定计划任务成功或失败要执行的代码：</p>
<pre><code>$schedule-&gt;command('emails:send')
         -&gt;daily()
         -&gt;onSuccess(function () {
             // 任务成功...
         })
         -&gt;onFailure(function () {
             // 任务失败...
         });</code></pre>
<p>如果你的命令提供了有效输出，你可以在闭包中将 <code>Illuminate\Support\Stringable</code> 实例化为 <code>$output</code> 在 <code>after</code> ,  <code>onSuccess</code>  或  <code>onFailure</code> 中对其进行访问：</p>
<pre><code>use Illuminate\Support\Stringable;

$schedule-&gt;command('emails:send')
         -&gt;daily()
         -&gt;onSuccess(function (Stringable $output) {
             // 任务成功...
         })
         -&gt;onFailure(function (Stringable $output) {
             // 任务失败...
         });</code></pre>
<h4>Pinging 网址</h4>
<p>使用 <code>pingBefore</code> 和 <code>thenPing</code> 方法,  你可以在任务完成之前或完成之后来 ping 指定的 URL。当前方法在通知外部服务 [如 Laravel Envoyer ] ( <a href="https://envoyer.io">https://envoyer.io</a> ) 计划任务在将要执行或已完成时会很有用：</p>
<pre><code>$schedule-&gt;command('emails:send')
         -&gt;daily()
         -&gt;pingBefore($url)
         -&gt;thenPing($url);</code></pre>
<p>只有当条件为 true 时 ,  才可以使用 <code>pingBeforeIf</code> 和 <code>thenPingIf</code> 方法来 ping 给定 URL ：</p>
<pre><code>$schedule-&gt;command('emails:send')
         -&gt;daily()
         -&gt;pingBeforeIf($condition, $url)
         -&gt;thenPingIf($condition, $url);</code></pre>
<p>当任务成功或失败时，使用 <code>pingOnSuccess</code> 和 <code>pingOnFailure</code> 方法来 ping 给定 URL：</p>
<pre><code>$schedule-&gt;command('emails:send')
         -&gt;daily()
         -&gt;pingOnSuccess($successUrl)
         -&gt;pingOnFailure($failureUrl);</code></pre>
<p>所有ping方法都需要Guzzle HTTP库。你可以使用 composer 将 Guzzle 添加到你的项目中：</p>
<pre><code>composer require guzzlehttp/guzzle</code></pre>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-xl-2" id="toc-list">
        <ul></ul>
    </div>
</div>    </div>
</div>
<span id="back-top">
<svg width="20" height="20" fill="currentColor">
    <use xlink:href="/css/bootstrap-icons.svg#chevron-up"/>
</svg>
</span>
 
<script>
    // 浏览量统计
    $(function () {
        let formdata = new FormData();
        formdata.append('_token', '');
        formdata.append('id', 367);
        $.ajax({
            url: $(".sticky-top .navbar-brand").attr('href') + "/api/doc/clicks",
            type: 'POST',
            data: formdata,
            processData: false,
            contentType: false
        });
    });
    // aside-hidden
    $(function () {
        $('#aside-hidden').on('click', function () {
            $('.aside').toggle(0, function () {
                if ($(this).is(':visible')) {
                    $('.aside-middle').removeClass('col-md-12 col-lg-12').addClass('col-md-9 col-lg-10');
                } else {
                    $('.aside-middle').removeClass('col-md-9 col-lg-10').addClass('col-md-12 col-lg-12');
                }
            });
        });
    });
</script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?1522d01c436f59ddc8389f25bfa9d53e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>